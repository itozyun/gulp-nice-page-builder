var aa = {xml:!0, svg:!0, math:!0}, ba = {async:!0, autofocus:!0, checked:!0, compact:!0, declare:!0, defer:!0, disabled:!0, draggable:!0, hidden:!0, ismap:!0, loop:!0, multiple:!0, nohref:!0, noresize:!0, noshade:!0, novalidate:!0, nowrap:!0, readonly:!0, required:!0, reversed:!0, scoped:!0, selected:!0}, ca = {AREA:!0, BASE:!0, BASEFONT:!0, BR:!0, BGSOUND:!0, COL:!0, COMMAND:!0, FRAME:!0, HR:!0, IMG:!0, INPUT:!0, ISINDEX:!0, KEYGEN:!0, LINK:!0, META:!0, PARAM:!0, SOURCE:!0, TRACK:!0, EMBED:!0, 
WBR:!0, area:!0, base:!0, basefont:!0, br:!0, bgsound:!0, col:!0, command:!0, frame:!0, hr:!0, img:!0, input:!0, isindex:!0, keygen:!0, link:!0, meta:!0, param:!0, source:!0, track:!0, embed:!0, wbr:!0}, da = {SCRIPT:!0, STYLE:!0, TEXTAREA:!0, TITLE:!0, PLAINTEXT:!0, XMP:!0, script:!0, style:!0, textarea:!0, title:!0, plaintext:!0, xmp:!0}, H = {CAPTION:{ARTICLE:!0, SECTION:!0, NAV:!0, ASIDE:!0, H1:!0, H2:!0, H3:!0, H4:!0, H5:!0, H6:!0, HEADER:!0, FOOTER:!0, ADDRESS:!0, P:!0, HR:!0, PRE:!0, BLOCKQUOTE:!0, 
OL:!0, UL:!0, DL:!0, FIGURE:!0, DIV:!0, A:!0, EM:!0, STRONG:!0, SMALL:!0, S:!0, CITE:!0, Q:!0, DFN:!0, ABBR:!0, DATA:!0, TIME:!0, CODE:!0, VAR:!0, SAMP:!0, KBD:!0, SUB:!0, SUP:!0, I:!0, B:!0, U:!0, MARK:!0, RUBY:!0, BDI:!0, BDO:!0, SPAN:!0, BR:!0, WBR:!0, INS:!0, DEL:!0, PICTURE:!0, IMG:!0, IFRAME:!0, EMBED:!0, OBJECT:!0, VIDEO:!0, AUDIO:!0, MAP:!0, AREA:!0, math:!0, svg:!0, FORM:!0, LABEL:!0, INPUT:!0, BUTTON:!0, SELECT:!0, DATALIST:!0, TEXTAREA:!0, KEYGEN:!0, OUTPUT:!0, PROGRESS:!0, METER:!0, FIELDSET:!0, 
DETAILS:!0, DIALOG:!0, SCRIPT:!0, NOSCRIPT:!0, TEMPLATE:!0, CANVAS:!0}, DD:{ARTICLE:!0, SECTION:!0, NAV:!0, ASIDE:!0, H1:!0, H2:!0, H3:!0, H4:!0, H5:!0, H6:!0, HEADER:!0, FOOTER:!0, ADDRESS:!0, P:!0, HR:!0, PRE:!0, BLOCKQUOTE:!0, OL:!0, UL:!0, DL:!0, FIGURE:!0, DIV:!0, A:!0, EM:!0, STRONG:!0, SMALL:!0, S:!0, CITE:!0, Q:!0, DFN:!0, ABBR:!0, DATA:!0, TIME:!0, CODE:!0, VAR:!0, SAMP:!0, KBD:!0, SUB:!0, SUP:!0, I:!0, B:!0, U:!0, MARK:!0, RUBY:!0, BDI:!0, BDO:!0, SPAN:!0, BR:!0, WBR:!0, INS:!0, DEL:!0, 
PICTURE:!0, IMG:!0, IFRAME:!0, EMBED:!0, OBJECT:!0, VIDEO:!0, AUDIO:!0, MAP:!0, AREA:!0, math:!0, svg:!0, TABLE:!0, FORM:!0, LABEL:!0, INPUT:!0, BUTTON:!0, SELECT:!0, DATALIST:!0, TEXTAREA:!0, KEYGEN:!0, OUTPUT:!0, PROGRESS:!0, METER:!0, FIELDSET:!0, DETAILS:!0, DIALOG:!0, SCRIPT:!0, NOSCRIPT:!0, TEMPLATE:!0, CANVAS:!0}, DT:{ADDRESS:!0, P:!0, HR:!0, PRE:!0, BLOCKQUOTE:!0, OL:!0, UL:!0, DL:!0, FIGURE:!0, DIV:!0, A:!0, EM:!0, STRONG:!0, SMALL:!0, S:!0, CITE:!0, Q:!0, DFN:!0, ABBR:!0, DATA:!0, TIME:!0, 
CODE:!0, VAR:!0, SAMP:!0, KBD:!0, SUB:!0, SUP:!0, I:!0, B:!0, U:!0, MARK:!0, RUBY:!0, BDI:!0, BDO:!0, SPAN:!0, BR:!0, WBR:!0, INS:!0, DEL:!0, PICTURE:!0, IMG:!0, IFRAME:!0, EMBED:!0, OBJECT:!0, VIDEO:!0, AUDIO:!0, MAP:!0, AREA:!0, math:!0, svg:!0, TABLE:!0, FORM:!0, LABEL:!0, INPUT:!0, BUTTON:!0, SELECT:!0, DATALIST:!0, TEXTAREA:!0, KEYGEN:!0, OUTPUT:!0, PROGRESS:!0, METER:!0, FIELDSET:!0, DETAILS:!0, DIALOG:!0, SCRIPT:!0, NOSCRIPT:!0, TEMPLATE:!0, CANVAS:!0}, P:{A:!0, EM:!0, STRONG:!0, SMALL:!0, 
S:!0, CITE:!0, Q:!0, DFN:!0, ABBR:!0, DATA:!0, TIME:!0, CODE:!0, VAR:!0, SAMP:!0, KBD:!0, SUB:!0, SUP:!0, I:!0, B:!0, U:!0, MARK:!0, RUBY:!0, BDI:!0, BDO:!0, SPAN:!0, BR:!0, WBR:!0, INS:!0, DEL:!0, PICTURE:!0, IMG:!0, IFRAME:!0, EMBED:!0, OBJECT:!0, VIDEO:!0, AUDIO:!0, MAP:!0, AREA:!0, math:!0, svg:!0, LABEL:!0, INPUT:!0, BUTTON:!0, SELECT:!0, DATALIST:!0, TEXTAREA:!0, KEYGEN:!0, OUTPUT:!0, PROGRESS:!0, METER:!0, SCRIPT:!0, NOSCRIPT:!0, TEMPLATE:!0, CANVAS:!0}, HTML:{HEAD:!0, BODY:!0}, HEAD:{TITLE:!0, 
BASE:!0, BGSOUND:!0, LINK:!0, META:!0, STYLE:!0, SCRIPT:!0, NOSCRIPT:!0, TEMPLETE:!0}, COLGROUP:{COL:!0}, OPTGROUP:{OPTION:!0}, OPTION:{}, TBODY:{TR:!0}, TR:{TH:!0, TD:!0}, RBC:{RB:!0, RP:!0, RT:!0}};
H.LI = H.TD = H.DD;
H.TH = H.DT;
H.RB = H.RP = H.RT = H.P;
H.TFOOT = H.THEAD = H.TBODY;
H.RTC = H.RBC;
var L = {a:2, b:2, c:2, d:2, e:2, f:2, g:2, h:2, i:2, j:2, k:2, l:2, m:2, n:2, o:2, p:2, q:2, r:2, s:2, t:2, u:2, v:2, w:2, x:2, y:2, z:2, A:1, B:1, C:1, D:1, E:1, F:1, G:1, H:1, I:1, J:1, K:1, L:1, M:1, N:1, O:1, P:1, Q:1, R:1, S:1, T:1, U:1, V:1, W:1, X:1, Y:1, Z:1, "\t":4, "\n":4, "\f":4, "\r":4, " ":4};
function ea(a, b) {
  var c = 0;
  function d() {
    c && (fa(b, f(a.substring(0, c))), a = a.substring(c), c = 0);
  }
  function f(B) {
    return B.split("&lt;").join("<").split("&gt;").join(">").split("&amp;lt;").join("&lt;").split("&amp;gt;").join("&gt;");
  }
  function e(B, E, x) {
    for (var G = 0, u = x.length, q = 3, g, F; q < u && 2 !== G;) {
      F = x.charAt(q);
      switch(G) {
        case 0:
          L[F] & 4 ? G = 1 : ">" === F && (G = 2);
          G && (g = x.substring(2, q));
          break;
        case 1:
          ">" === F && (G = 2);
      }
      ++q;
    }
    return 2 === G ? (ca[g] || k(B, E, n || m ? g : g.toUpperCase(), !1), q) : 0;
  }
  function k(B, E, x, G) {
    var u = 0, q = B.length;
    if (x) {
      for (u = q; 0 <= u && B[--u] !== x;) {
      }
    }
    if (0 <= u) {
      for (; u < q;) {
        ha(E, B[--q], G && !H[B[q]], !1), n && aa[B[q]] && (n = !!E.fa);
      }
      B.length = u;
      if (m) {
        for (m = !1, q = u; q;) {
          if (0 < B[--q].indexOf(":")) {
            m = !0;
            break;
          }
        }
      }
    } else {
      ha(E, x, !1, !0);
    }
  }
  function l(B, E, x, G) {
    function u(R, J) {
      function D(lb) {
        return f(lb).split('\\"').join('"').split("\\'").join("'").split("&quot;").join('"').split("&apos;").join("'");
      }
      r[R] = !0 === J ? !0 : ba[R.toLowerCase()] ? n ? D(J || R) : !0 : D(J || "");
      ++C;
    }
    function q() {
      (y = "/>" === G.substr(p, 2)) && ++p;
      return y;
    }
    for (var g = 1, F = G.length, p = 2, r = {}, C = 0, y = !1, v, t, I, P, K, N; p < F && 9 > g;) {
      v = G.charAt(p);
      switch(g) {
        case 1:
          if (L[v] & 4) {
            g = 2, t = G.substring(1, p);
          } else if (">" === v || q()) {
            g = 9, t = G.substring(1, p);
          }
          break;
        case 2:
          ">" === v || q() ? g = 9 : L[v] & 4 || (g = 3, I = p);
          break;
        case 3:
          if ("=" === v) {
            g = 5, P = G.substring(I, p);
          } else if (L[v] & 4) {
            g = 4, P = G.substring(I, p);
          } else if (">" === v || q()) {
            g = 9, u(G.substring(I, p), !0);
          }
          break;
        case 4:
          "=" === v ? g = 5 : ">" === v || q() ? (g = 9, u(P, !0)) : L[v] & 4 || (g = 3, u(P, !0), I = p);
          break;
        case 5:
          '"' === v || "'" === v ? (g = 6, K = v, I = p + 1) : L[v] & 4 || (g = 7, I = p);
          N = !1;
          break;
        case 6:
          N || v !== K || (g = 2, u(P, G.substring(I, p)));
          N = "\\" === v && !N;
          break;
        case 7:
          L[v] & 4 ? g = 2 : ">" === v && (g = 9), 7 !== g && u(P, G.substring(I, p));
      }
      ++p;
    }
    if (9 === g) {
      g = t.toUpperCase();
      n ||= !!aa[t];
      m ||= 0 < t.indexOf(":");
      if (!n && !m) {
        for (; E;) {
          if (H[E] && !H[E][g]) {
            k(B, x, E, !1), E = B[B.length - 1];
          } else {
            break;
          }
        }
      }
      (y = y || !!ca[g]) || (B[B.length] = n || m ? t : g);
      ia(x, n || m ? t : g, C ? r : null, y);
      return p;
    }
    return 0;
  }
  for (var h = [], n = !!b.fa, m = !1, z = a.length - c, w, A; a;) {
    w = h[h.length - 1];
    if (da[w]) {
      if ("PLAINTEXT" === w || "plaintext" === w) {
        fa(b, f(a)), a = "";
      } else {
        if (A = a.indexOf("</" + (n || m ? w : w.toLowerCase())), -1 === A && (A = a.indexOf("</" + (n || m ? w.toUpperCase() : w))), 0 <= A) {
          if (c = A, d(), w = e(h, b, a)) {
            a = a.substring(w);
          } else {
            M(b, a);
            return;
          }
        } else {
          M(b, a);
          return;
        }
      }
    } else if (a.indexOf("<!DOCTYPE ") === c) {
      if (d(), A = a.indexOf(">"), -1 !== A) {
        ja(b, a.substring(c, A + 1)), a = a.substring(A + 1);
      } else {
        M(b, a);
        return;
      }
    } else if (a.indexOf("<?") === c) {
      if (d(), A = a.indexOf("?>"), -1 !== A) {
        ka(b, f(a.substring(2, A))), a = a.substring(A + 2);
      } else {
        M(b, a);
        return;
      }
    } else if (a.indexOf("<![CDATA[") === c) {
      if (d(), A = a.indexOf("]]\x3e"), -1 !== A) {
        la(b, f(a.substring(9, A))), a = a.substring(A + 3);
      } else {
        M(b, a);
        return;
      }
    } else if (a.indexOf("\x3c!--") === c) {
      if (d(), A = a.indexOf("--\x3e"), -1 !== A) {
        ma(b, f(a.substring(4, A))), a = a.substring(A + 3);
      } else {
        M(b, a);
        return;
      }
    } else if (a.indexOf("</") === c && L[a.charAt(c + 2)] & 3) {
      if (d(), w = e(h, b, a)) {
        a = a.substring(w);
      } else {
        M(b, a);
        return;
      }
    } else if ("<" === a.charAt(c) && L[a.charAt(c + 1)] & 3) {
      if (d(), w = l(h, w, b, a)) {
        a = a.substring(w);
      } else {
        M(b, a);
        return;
      }
    } else {
      A = a.indexOf("<", c), -1 === A ? (fa(b, f(a)), a = "") : c < A ? c = A : ++c;
    }
    w = a.length - c;
    if (w === z) {
      M(b, a);
      return;
    }
    z = w;
  }
  d();
  k(h, b, "", !0);
}
;var na = {HTML:!0, HEAD:!0, BODY:!0, P:!0, DT:!0, DD:!0, LI:!0, OPTION:!0, TBODY:!0, THEAD:!0, TFOOT:!0, TD:!0, TH:!0, TR:!0, RB:!0, RBC:!0, RP:!0, RT:!0, RTC:!0, OPTGROUP:!0, CAPTION:!0, COLGROUP:!0}, oa = {A:!0, AUDIO:!0, DEL:!0, INS:!0, MAP:!0, NOSCRIPT:!0, VIDEO:!0}, pa = {H1:!0, H2:!0, H3:!0, H4:!0, H5:!0, H6:!0, ADDRESS:!0, BLOCKQUOTE:!0, DIV:!0, DL:!0, FIELDSET:!0, FORM:!0, HR:!0, LEGEND:!0, MENU:!0, NOSCRIPT:!0, OL:!0, P:!0, PRE:!0, UL:!0, CENTER:!0, DIR:!0, NOFRAMES:!0, MARQUEE:!0}, qa = 
{SCRIPT:!0, STYLE:!0, TEXTAREA:!0, TITLE:!0, PLAINTEXT:!0, XMP:!0, script:!0, style:!0, textarea:!0, title:!0, plaintext:!0, xmp:!0}, ra = {SCRIPT:!0, STYLE:!0, TEXTAREA:!0, script:!0, style:!0, textarea:!0}, sa = {PRE:!0, LISTING:!0, pre:!0, listing:!0};
function O(a) {
  return !(!a || a.pop !== [].pop);
}
function Q(a) {
  return !(!a || "object" !== typeof a);
}
function S(a) {
  return "" + a === a;
}
function T(a) {
  return S(a) || a === +a;
}
function ta(a) {
  return a === "" + +a && a === a && a !== "" + 1 / 0 && a !== "" + -1 / 0 ? +a : a;
}
function ua(a) {
  if (T(a)) {
    a = 3;
  } else {
    if (O(a)) {
      if (S(a[0])) {
        a = 1;
      } else {
        var b = a[0];
        a = b === +b ? a[0] : -1;
      }
    } else {
      a = -1;
    }
  }
  return a;
}
function va(a) {
  return !O(a) && Q(a);
}
function wa(a, b, c, d, f) {
  var e = b[1], k = b.slice(2), l;
  "function" === typeof a ? l = k.length ? a(e, k) : a(e) : l = k.length ? a[e].apply(null, k) : a[e]();
  void 0 !== l && null !== l && "" !== l && (T(l) ? c ? c.splice(d, 1, l) : (b.length = 0, b.push(3, b)) : O(l) ? 11 === l[0] ? c ? (l.shift(), l.unshift(d, 1), c.splice.apply(c, l)) : (b.length = 0, b.push.apply(b, l)) : O(l[0]) ? c ? (l.unshift(d, 1), c.splice.apply(c, l)) : (b.length = 0, b.push(11), b.push.apply(b, l)) : c ? c.splice(d, 1, l) : (b.length = 0, b.push(11, l)) : f("PROCESSING_INSTRUCTION Error! [" + JSON.stringify(b) + "]"));
  return l;
}
function xa(a, b, c, d, f) {
  var e;
  if (O(d) && S(d[0])) {
    var k = d[0];
    d = d.slice(1);
    "function" === typeof b ? e = d.length ? b(k, d) : b(k) : e = d.length ? b[k](d) : b[k]();
  } else {
    S(d) ? "function" === typeof b ? e = b(d) : e = b[d]() : f("Invalid InstructionAttr value! [" + c + "=" + d + "]");
  }
  return a && O(e) ? xa(!0, b, c, e, f) : e;
}
function ya(a, b, c) {
  a = za(a, !0);
  var d;
  Aa = a;
  b && (b.ba ? b.ba.push(a) : b.ba = [a]);
  if (O(c)) {
    var f = Ba(a);
    b = 0;
    for (d = c.length; b < d; b += 2) {
      var e = c[b];
      var k = c[b + 1];
      if (e === +e) {
        if (e === a.$ && !0 === k(a)) {
          break;
        }
      } else if (f && S(e) && e === a.ja && !0 === k(a)) {
        break;
      }
    }
  } else {
    c(a);
  }
  return a;
}
function Ca(a) {
  return a.split("&lt;").join("&amp;lt;").split("&gt;").join("&amp;gt;").split("<").join("&lt;").split(">").join("&gt;");
}
function Da(a, b, c) {
  a = Ca("" + a);
  var d = a.match('"'), f = a.match("'"), e = b ? "'" : '"';
  d && f ? a = b ? e + a.split("'").join("\\'") + e : e + a.split('"').join('\\"') + e : d ? a = "'" + a + "'" : f ? a = b ? e + a.split("'").join("\\'") + e : e + a + e : c || a.match(/[^0-9a-z\.\-]/g) || 72 < a.length ? a = e + a + e : "" === a && (a = e + e);
  return a;
}
function Ea(a) {
  var b = a[0], c = b === +b ? 2 : 1;
  return 1 === ua(a) || 17 === b ? va(a[c]) ? c + 1 : c : 11 === b ? 1 : 9 === b || 13 === b || 16 === b ? 2 : Infinity;
}
function Fa(a) {
  var b = Ea(a), c = "", d;
  if (b < a.length) {
    for (d = b; d < a.length;) {
      b = a[d];
      var f = ua(b);
      3 === f ? (c = T(b) ? c + b : c + b[1], a.splice(d, 1)) : (c && (a.splice(d, 0, ta(c)), c = ""), ++d, 1 !== f && 17 !== f && 13 !== f && 16 !== f || Fa(b));
    }
    c && (a[d] = ta(c));
  }
}
function Ga(a, b, c, d, f, e) {
  if (!b && d) {
    if (c) {
      a = Ha(Ia(a, "\n"), "\n");
    } else {
      a = a.split("\r\n").join("\n");
      e && (a = a.replace(/([\uFF01-\uFF60\u3040-\u309F\u30A0-\u30FF\u4E00-\u9FFF])\s([\uFF01-\uFF60\u3040-\u309F\u30A0-\u30FF\u4E00-\u9FFF])/g, "$1$2"));
      for (a = a.split("\t").join(" "); 0 <= a.indexOf("\n\n");) {
        a = a.split("\n\n").join("\n");
      }
      if (f) {
        var k = "\n" === a.charAt(0) && /\n[ ]*$/.test(a);
      }
      a = Ha(a, "\n");
      for (a = a.split("\n").join(" "); 0 <= a.indexOf("  ");) {
        a = a.split("  ").join(" ");
      }
      k && (a = Ha(Ia(a, " "), " "));
      a = a.split("\\u0020").join(" ").split("&#x20;").join(" ").split("&#32;").join(" ");
    }
  }
  return ta(a);
}
function Ia(a, b) {
  for (; a.charAt(0) === b;) {
    a = a.substr(1);
  }
  return a;
}
function Ha(a, b) {
  for (; a.charAt(a.length - 1) === b;) {
    a = a.substr(0, a.length - 1);
  }
  return a;
}
function Ja(a) {
  var b = a.indexOf("#"), c = a.indexOf("."), d = "", f = "";
  b < c ? (d = a.split(".")[1], a = a.split(".")[0], 0 < b && (f = a.split("#")[1], a = a.split("#")[0])) : c < b && (f = a.split("#")[1], a = a.split("#")[0], 0 < c && (d = a.split(".")[1], a = a.split(".")[0]));
  return [a, f, d];
}
function Ka(a, b, c) {
  b && (a += "#" + b);
  c && (a += "." + c);
  return a;
}
function La(a) {
  var b = [], c = -1, d;
  for (d in a) {
    var f = a[d];
    "0px" === f && (f = 0);
    for (var e = ++c, k, l = [], h = d.split(""), n = h.length; n;) {
      k = h[--n], "A" <= k && "Z" >= k && (k = "-" + k.toLowerCase()), l[n] = k;
    }
    k = l.join("");
    b[e] = k + ":" + Ca("" + f);
  }
  return b.join(";").substr(1);
}
function Ma(a, b) {
  function c(f) {
    var e = f[0], k = f[1], l = e, h = 1;
    switch(e) {
      case 9:
      case 11:
      case 13:
      case 16:
        return d(f);
      case 7:
        return !0;
      case 1:
      case 17:
        l = k, h = 2;
      default:
        if (S(l)) {
          if (e = va(f[h])) {
            a: {
              h = f[h];
              for (var n in h) {
                if (0 === n.indexOf(b)) {
                  e = !0;
                  break a;
                }
              }
              e = !1;
            }
          }
          return e ? !0 : d(f);
        }
    }
    return !1;
  }
  function d(f) {
    for (var e = Ea(f), k = f.length, l; e < k; ++e) {
      if (l = f[e], O(l) && c(l)) {
        return !0;
      }
    }
    return !1;
  }
  return !c(a);
}
function za(a, b) {
  function c(f, e) {
    function k(w, A, B) {
      return l ? U(l, w, A, B) : new Na(b, 0, w, A, B);
    }
    var l = e === !!e ? null : e;
    e = f[0];
    var h = f[1], n = 1, m = e;
    switch(e) {
      case 3:
      case 4:
      case 8:
      case 14:
      case 18:
        return k(e, h);
      case 15:
        return k(e);
      case 7:
        var z = [];
        n = 2;
        for (m = f.length; n < m; ++n) {
          z[n - 2] = f[n];
        }
        return k(e, h, m ? z : null);
      case 9:
      case 13:
      case 16:
        z = k(e, h);
        break;
      case 11:
        z = k(e);
        break;
      case 1:
      case 17:
        m = h, n = 2;
      default:
        S(m) && (z = k(1 === n ? 1 : e, m, f[n]));
    }
    b || d(f, z);
    return z;
  }
  function d(f, e) {
    for (var k = Ea(f), l; k < f.length; ++k) {
      l = f[k], T(l) ? U(e, 3, l) : O(l) && c(l, e);
    }
  }
  return c(a, b);
}
;function Na(a, b, c, d, f) {
  if (a === !!a) {
    var e = null;
    this.aa = a;
  } else {
    e = a, this.aa = e.aa;
  }
  if (e) {
    switch(e.$) {
      case 3:
      case 8:
      case 4:
      case 7:
      case 15:
      case 18:
        throw "nodeType:" + e.$ + " \u306f\u89aa\u306b\u306a\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u305b\u3093!";
    }
    if (Oa(this)) {
      throw "nodeType:" + e.$ + " \u306f\u5b50\u306b\u306a\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u305b\u3093!";
    }
  }
  this.fa = e;
  this.$ = c;
  if (e) {
    if (e.ba || (e.ba = []), a = e.ba, 0 <= b && b < a.length) {
      if (1 <= b && 17 === a[b - 1].$) {
        throw "\u9589\u3058\u30bf\u30b0\u306e\u7121\u3044 Element \u306e\u6b21\u306b Node \u3092\u633f\u5165\u3059\u308b\u3053\u3068\u306f\u51fa\u6765\u307e\u305b\u3093!";
      }
      a.splice(b, 0, this);
    } else {
      if (a.length && 17 === a[a.length - 1].$) {
        throw "\u9589\u3058\u30bf\u30b0\u306e\u7121\u3044 Element \u306e\u6b21\u306b Node \u3092\u633f\u5165\u3059\u308b\u3053\u3068\u306f\u51fa\u6765\u307e\u305b\u3093!";
      }
      a.push(this);
    }
  }
  switch(c) {
    case 1:
    case 17:
      this.pa = f || null, d = Ja(d), this.xa = d[1], this.wa = d[2], d = d[0];
    case 18:
      this.ja = d;
      break;
    case 7:
      this.va = f || null;
    case 3:
    case 4:
    case 8:
    case 9:
    case 13:
    case 14:
    case 16:
      this.ia = d;
  }
}
var Aa = null, V = !1;
function Pa(a) {
  if (a.aa) {
    throw "restricted mode \u3067\u306f getHTMLJSON() \u306f\u975e\u5bfe\u5fdc\u3067\u3059!";
  }
  var b = [a.$], c = a.ba, d, f;
  switch(a.$) {
    case 1:
      b.length = 0;
    case 17:
      b.push(Ka(a.ja, a.xa, a.wa));
      a = a.pa;
      va(a) && (b.push(a), a.style && Q(a.style) && (a.style = La(a.style)));
      break;
    case 18:
      b[1] = a.ja;
      break;
    case 7:
      if (d = a.va) {
        var e = 0;
        for (f = d.length; e < f; ++e) {
          b[2 + e] = d[e];
        }
      }
    case 3:
    case 4:
    case 8:
    case 9:
    case 13:
    case 14:
    case 16:
      b[1] = a.ia;
  }
  if (c) {
    for (e = 0, f = c.length; e < f; ++e) {
      b.push(Pa(c[e]));
    }
  }
  return b;
}
function W(a) {
  switch(a.$) {
    case 3:
    case 4:
    case 7:
    case 8:
    case 9:
    case 13:
    case 14:
    case 16:
      return a.ia;
    default:
      throw "getNodeValue() \u3092\u30b5\u30dd\u30fc\u30c8\u3057\u306a\u3044 nodeType \u3067\u3059!";
  }
}
function Qa(a, b) {
  if (a.aa && !Ra(a)) {
    throw "restricted mode \u3067\u306f\u73fe\u5728\u306e\u30ce\u30fc\u30c9\u4ee5\u5916\u3078\u306e setNodeValue() \u306f\u975e\u5bfe\u5fdc\u3067\u3059!";
  }
  switch(a.$) {
    case 3:
    case 4:
    case 7:
    case 8:
    case 9:
      a.ia !== b && (V = !0);
      a.ia = b;
      break;
    default:
      throw "setNodeValue() \u3092\u30b5\u30dd\u30fc\u30c8\u3057\u306a\u3044 nodeType \u3067\u3059!";
  }
}
function Ba(a) {
  return 1 === a.$ || 17 === a.$;
}
function Sa(a) {
  if (!Ba(a) && 18 !== a.$) {
    throw "getTagName() \u3092\u30b5\u30dd\u30fc\u30c8\u3057\u306a\u3044 nodeType \u3067\u3059!";
  }
  return a.ja;
}
function X(a) {
  if (!Ta(a)) {
    throw "getChildNodeCount() \u3092\u30b5\u30dd\u30fc\u30c8\u3057\u306a\u3044 nodeType \u3067\u3059!";
  }
  if (a.aa) {
    throw "restricted mode \u3067\u306f getChildNodeCount() \u306f\u975e\u5bfe\u5fdc\u3067\u3059!";
  }
  return a.ba && a.ba.length;
}
function Ua(a, b) {
  if (!Ta(a)) {
    throw "getChildNodeAt() \u3092\u30b5\u30dd\u30fc\u30c8\u3057\u306a\u3044 nodeType \u3067\u3059!";
  }
  if (a.aa) {
    throw "restricted mode \u3067\u306f getChildNodeAt() \u306f\u975e\u5bfe\u5fdc\u3067\u3059!";
  }
  return a.ba && a.ba[b] || null;
}
Na.prototype.remove = function() {
  if (Oa(this)) {
    throw "remove() \u3092\u30b5\u30dd\u30fc\u30c8\u3057\u306a\u3044 nodeType \u3067\u3059!";
  }
  if (this.aa && !Ra(this)) {
    throw "restricted mode \u3067\u306f\u73fe\u5728\u306e\u30ce\u30fc\u30c9\u4ee5\u5916\u3078\u306e discard() \u306f\u975e\u5bfe\u5fdc\u3067\u3059!";
  }
  if (this.aa) {
    return this.ya = V = !0, null;
  }
  if (Oa(this)) {
    throw "getMyIndex() \u3092\u30b5\u30dd\u30fc\u30c8\u3057\u306a\u3044 nodeType \u3067\u3059!";
  }
  if (this.aa) {
    throw "restricted mode \u3067\u306f getMyIndex() \u306f\u975e\u5bfe\u5fdc\u3067\u3059!";
  }
  var a = this.fa ? this.fa.ba.indexOf(this) : -1;
  0 <= a && (this.fa.ba.splice(a, 1), this.fa = null, V = !0);
};
function U(a, b, c, d) {
  if (a.aa && (!Ra(a) || !Ta(a))) {
    throw "restricted mode \u3067\u306f\u73fe\u5728\u306e\u30ce\u30fc\u30c9\u4ee5\u5916\u3078\u306e insertNodeLast() \u306f\u975e\u5bfe\u5fdc\u3067\u3059!";
  }
  if (a.aa) {
    return a.ea = a.ea || [], a.ea.push([b, c, d]), V = !0, null;
  }
  var f = X(a);
  if (a.aa) {
    throw "restricted mode \u3067\u306f insertNodeAt() \u306f\u975e\u5bfe\u5fdc\u3067\u3059!";
  }
  V = !0;
  return new Na(a, f, b, c, d);
}
function Ta(a) {
  return 1 === a.$ || 17 === a.$ || 13 === a.$ || 16 === a.$ || Oa(a);
}
function Oa(a) {
  return 9 === a.$ || 11 === a.$;
}
function Ra(a) {
  return a === Aa && !a.ya;
}
;function Va(a, b, c, d) {
  function f(p, r, C, y) {
    switch(p.$) {
      case 1:
      case 17:
        var v = {};
        y = Sa(p);
        var t = !!sa[y];
        var I = p.pa, P = 0, K;
        if (I) {
          for (K in I) {
            var N = ba[K] ? 1 : I[K];
            if ("id" === K) {
              var R = N;
            } else if ("class" === K) {
              var J = N;
            } else {
              if (K.startsWith(u)) {
                var D = e(N);
                D.ha ? (N = [D.ka], z.apply(N, D.ha)) : N = D.ka;
              }
              v[K] = ta(N);
              ++P;
            }
          }
        }
        y = Ka(y, R, J);
        if (t && w) {
          for (; D = l(p);) {
            if (n(W(D))) {
              Qa(D, Ia(W(D), "\n"));
              break;
            } else {
              D.remove();
            }
          }
          for (; D = h(p);) {
            if (n(W(D))) {
              Qa(D, Ha(W(D), "\n"));
              break;
            } else {
              D.remove();
            }
          }
        }
        v = P ? [y, v] : [y];
        for (D = 0; D < X(p); ++D) {
          f(Ua(p, D), v, t || C, !!ra[y]);
        }
        r.push(v);
        17 !== p.$ || v.unshift(17);
        break;
      case 18:
        r.push([18, Sa(p)]);
        break;
      case 3:
        t = Ga("" + W(p), C, y, w, A, B);
        "" !== t && r.push(t);
        break;
      case 4:
        E && (t = W(p), r.push([4, ta(t)]));
        break;
      case 7:
        t = W(p);
        D = e(t);
        v = [7, D.ka];
        D.ha && z.apply(v, D.ha);
        r.push(v);
        break;
      case 8:
        t = W(p);
        if (t.startsWith("[if") && 0 < t.indexOf("<![endif]")) {
          p = Wa(k(t, ">", "<![endif]", !0), !0, c);
          v = [13, k(t, "[", "]", !1)];
          for (D = 0; D < X(p); ++D) {
            f(Ua(p, D), v, C, y);
          }
          (2 < v.length || G) && r.push(v);
        } else if (t.startsWith("{") && 2 < t.indexOf("};")) {
          p = Wa(t.substring(t.indexOf("};") + 2), !0, c);
          v = [16, k(t, "{", "};", !1)];
          for (D = 0; D < X(p); ++D) {
            f(Ua(p, D), v, C, y);
          }
          (2 < v.length || G) && r.push(v);
        } else {
          t.startsWith("[if") && 0 < t.indexOf("><!") ? (r.push([14, k(t, "[", "]", !1)]), F = !0) : "<![endif]" === t && F ? (C = r[r.length - 1], G || !C || 14 !== C[0] ? r.push([15]) : C && r.pop(), F = !1) : x && r.push([8, ta(t)]);
        }
        break;
      case 9:
        t = W(p);
        w && (t = t.split("\n").join(" ").split("  ").join(" "));
        v = [9, t];
        r.push(v);
        for (D = 0; D < X(p); ++D) {
          f(Ua(p, D), v, !1, !1);
        }
        break;
      case 11:
        for (v = [11], r.push(v), D = 0; D < X(p); ++D) {
          f(Ua(p, D), v, C, y);
        }
    }
  }
  function e(p) {
    var r = p.indexOf(q), C = p.lastIndexOf(g), y = Ha(Ia(-1 === r ? p : p.substr(0, r), " "), " ");
    p = -1 === r ? [] : JSON.parse("[" + p.substring(r + q.length, C) + "]");
    return p.length ? {ka:y, ha:p} : {ka:y};
  }
  function k(p, r, C, y) {
    r = p.indexOf(r) + r.length;
    C = y ? p.lastIndexOf(C) : p.indexOf(C, r);
    return p.substring(r, C);
  }
  function l(p) {
    for (var r = 0, C = X(p), y; r < C; ++r) {
      if (y = Ua(p, r), Ba(y) && (y = l(y)), y && 3 === y.$) {
        return y;
      }
    }
  }
  function h(p) {
    for (var r = X(p), C; r;) {
      if (C = Ua(p, --r), Ba(C) && (C = h(C)), C && 3 === C.$) {
        return C;
      }
    }
  }
  function n(p) {
    return p.split("\n").join("").split(" ").join("").split("\t").join("");
  }
  const m = [], z = m.push;
  a = Wa(a, b, c);
  d = d || {};
  const w = -1 === ["none", !1].indexOf(d.trimWhitespaces), A = "aggressive" === d.trimWhitespaces, B = !!d.removeNewlineBetweenFullWidthChars, E = !0 === d.keepCDATASections, x = !0 === d.keepComments, G = !0 === d.keepEmptyConditionalComment, u = d.instructionAttrPrefix || ":";
  d = d.argumentBrackets || "()";
  const q = d.substr(0, d.length / 2), g = d.substr(d.length / 2);
  let F = !1;
  f(a, m, !1, !1);
  Fa(m[0]);
  return m[0];
}
function Wa(a, b, c) {
  b = new Xa(b, c);
  ea(a, b);
  return b.ba;
}
function Xa(a, b) {
  this.ea = a;
  this.$ = this.ba = new Na(!1, 0, 11);
  this.aa = b;
}
function M(a, b) {
  if (a.aa) {
    a.aa(b);
  } else {
    throw "Handler.prototype.onParseError: error!" + b;
  }
}
function ja(a, b) {
  var c = a.ba;
  if (c.aa) {
    throw "restricted mode \u3067\u306f setNodeType() \u306f\u975e\u5bfe\u5fdc\u3067\u3059!";
  }
  if (11 !== c.$) {
    throw "nodeType \u306e\u5909\u66f4\u306f DOCUMENT_FRAGMENT_NODE -> DOCUMENT_NODE \u3060\u3051\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u307e\u3059!";
  }
  9 !== c.$ && (V = !0);
  c.$ = 9;
  Qa(a.ba, b);
}
function ia(a, b, c, d) {
  if (d) {
    a = a.$;
    if (a.aa && (!Ra(a) || !Ta(a))) {
      throw "restricted mode \u3067\u306f\u73fe\u5728\u306e\u30ce\u30fc\u30c9\u4ee5\u5916\u3078\u306e insertElementLast() \u306f\u975e\u5bfe\u5fdc\u3067\u3059!";
    }
    if (a.aa) {
      a.ea = a.ea || [], a.ea.push([1, b, c, void 0]);
    } else {
      d = X(a);
      if (a.aa) {
        throw "restricted mode \u3067\u306f insertElementAt() \u306f\u975e\u5bfe\u5fdc\u3067\u3059!";
      }
      new Na(a, d, 1, b, c);
    }
    V = !0;
  } else {
    a.$ = U(a.$, 17, b, c);
  }
}
function ha(a, b, c, d) {
  if (d) {
    a.ea && U(a.$, 18, b);
  } else if (!c || !a.ea) {
    if (b === Sa(a.$)) {
      b = a.$;
      if (b.aa) {
        throw "restricted mode \u3067\u306f finalize() \u306f\u975e\u5bfe\u5fdc\u3067\u3059!";
      }
      if (17 !== b.$) {
        throw "finalize() \u3092\u30b5\u30dd\u30fc\u30c8\u3057\u306a\u3044 nodeType \u3067\u3059!";
      }
      1 !== b.$ && (V = !0);
      b.$ = 1;
      b = a.$;
      if (Oa(b)) {
        throw "getParent() \u3092\u30b5\u30dd\u30fc\u30c8\u3057\u306a\u3044 nodeType \u3067\u3059!";
      }
      if (b.aa && !Ra(b)) {
        throw "restricted mode \u3067\u306f\u73fe\u5728\u306e\u30ce\u30fc\u30c9\u4ee5\u5916\u3078\u306e getParent() \u306f\u975e\u5bfe\u5fdc\u3067\u3059!";
      }
      a.$ = b.fa;
    } else {
      if (a.aa) {
        a.aa("End tag error! " + b);
      } else {
        throw "Handler.prototype.onParseEndTag: End tag error! " + b;
      }
    }
  }
}
function fa(a, b) {
  U(a.$, 3, b);
}
function ma(a, b) {
  U(a.$, 8, b);
}
function la(a, b) {
  U(a.$, 4, b);
}
function ka(a, b) {
  U(a.$, 7, b);
}
;function Ya(a, b) {
  this.aa = a + ("/" === a.charAt(a.length - 1) ? "" : "/");
  b && (b = Za(b), this.$ = b + ("/" === b.charAt(b.length - 1) ? "" : "/"));
}
function $a(a, b) {
  var c = b, d = a.split("/");
  d.pop();
  "" === d[0] && d.shift();
  for ("./" === b.substr(0, 2) && (b = b.substr(2)); "../" === b.substr(0, 3);) {
    if (!d.length) {
      throw "Failed _relativePathToRootRelativePath! base:" + a + " target:" + c;
    }
    b = b.substr(3);
    --d.length;
  }
  return (d.length ? "/" + d.join("/") : "") + "/" + b;
}
function ab(a) {
  a = a.split("index.html");
  a[a.length - 1] || a.pop();
  return a.join("index.html");
}
function Y(a) {
  if (bb(a)) {
    throw a + " is not a root relative path or relative URL!";
  }
  a = a.split("#")[0].split("/");
  a[a.length - 1] || (a[a.length - 1] = "index.html");
  return a.join("/");
}
function cb(a, b) {
  if (!a.$) {
    throw "absoluteDirectoryPathOfRoot is empty!";
  }
  return 0 === b.indexOf(a.$);
}
function Za(a) {
  return a.split("\\").join("/");
}
function db(a, b) {
  if (cb(a, b) || "/" === b.charAt(0)) {
    a = b;
  } else {
    var c;
    (c = "/" === b.charAt(0)) || (c = a.$ ? cb(a, b) || bb(b) : bb(b));
    if (c) {
      throw b + " is not a relative path!";
    }
    a = $a("/", b);
  }
  return a;
}
function bb(a) {
  return "//" === a.substr(0, 2) || "http://" === a.substr(0, 7) || "https://" === a.substr(0, 8);
}
function eb(a) {
  return "/" === a.charAt(0) && "//" !== a.substr(0, 2);
}
function fb(a, b, c) {
  if (bb(c) || eb(c)) {
    if (bb(c)) {
      var d = c;
      if (!bb(d)) {
        throw d + " is not a absolute URL!";
      }
      if (eb(d)) {
        throw d + " is a root relative URL!";
      }
      b = a.aa.length - 1;
      0 === d.indexOf(a.aa) ? d = d.substr(b) : "//" === a.aa.substr(0, 2) && (0 === d.indexOf("https:" + a.aa) && (d = d.substring(6, b)), 0 === d.indexOf("http:" + a.aa) && (d = d.substring(5, b)));
      a = d;
    } else {
      a = c;
    }
  } else {
    if (!eb(b)) {
      throw b + " is not a root relative URL!";
    }
    if (eb(c) || bb(c)) {
      throw c + " is not a relative URL!";
    }
    a = c.indexOf("#");
    -1 !== a && (d = c.substr(a));
    a = ab($a(Y(b), Y(c)));
    d && (a += d);
  }
  return a;
}
;function gb(a) {
  a = a[hb];
  if (!O(a)) {
    throw "Not html.json! " + JSON.stringify(a);
  }
  return a;
}
function ib(a) {
  a = gb(a)[0];
  return !O(a) && Q(a) ? a : null;
}
function jb(a) {
  var b = a[0];
  return O(a) && !O(b) && Q(b);
}
function kb(a) {
  return !O(a) && Q(a) ? !!a.TEMPLETE : jb(a) ? a[0].TEMPLETE || !1 : !1;
}
function mb(a) {
  return !O(a) && Q(a) ? !!a.MIXINS : jb(a) ? a[0].MIXINS || !1 : !1;
}
function nb(a, b, c, d, f) {
  function e(m) {
    if (m) {
      for (let z = 0; z < m.length; ++z) {
        const w = d[m[z]];
        k(w[ob], w[pb], !1);
      }
    }
  }
  function k(m, z, w) {
    let A = 0;
    for (const B in m) {
      if (!w && "MIXINS" === B) {
        throw "Mixin has MIXINS property!";
      }
      "TEMPLETE" === B ? (h = h || m[B], h === m[B] && ++A) : void 0 === a[B] && (a[B] = m[B], ++A);
    }
    (A || w) && n < z && (n = z);
  }
  var l = Y(a.URL);
  if (kb(a) && !c) {
    if (f) {
      f(l + " has TEMPLETE property, and no templetes found!");
      return;
    }
    throw l + " has TEMPLETE property, and no templetes found!";
  }
  if (mb(a) && !d) {
    if (f) {
      f(l + " has MIXINS property, and no mixins found!");
      return;
    }
    throw l + " has MIXINS property, and no mixins found!";
  }
  let h = a.TEMPLETE, n = a.MODIFIED_AT;
  e(a.MIXINS);
  for (h && (b[0] = h); h;) {
    l = c[h];
    if (!l) {
      throw "Templete: " + h + " required by " + Y(a.URL) + " not found!";
    }
    const m = ib(l);
    if (m) {
      if (mb(m) && !d) {
        if (f) {
          f(h + " has MIXINS property, and no mixins found!");
          return;
        }
        throw h + " has MIXINS property, and no mixins found!";
      }
      h = "";
      k(m, l[pb], !0);
      e(m.MIXINS);
      h && b.push(h);
    } else {
      h = "";
    }
  }
  a.UPDATED_AT = n;
}
function qb(a) {
  let b = Za(a).split(".json");
  if (b[b.length - 1]) {
    throw a + " is not .json file path!";
  }
  b.pop();
  b = b.join(".json").split("/");
  return b.pop().split(".").pop();
}
function rb(a) {
  return sb(a, function(b, c) {
    return ("SCRIPT" === b || "script" === b) && c && ("application/ld+json" === c.type || "application/json" === c.type || "nice-page-builder/object" === c.type) || !1;
  });
}
function tb(a, b) {
  return sb(a, function(c) {
    return "SLOT" === c || "slot" === c;
  }, b);
}
function sb(a, b, c) {
  function d(k) {
    let l = Ea(k), h = k.length;
    for (var n; l < h; ++l) {
      var m = k[l], z;
      if (z = O(m)) {
        a: {
          n = m;
          z = k;
          m = l;
          var w = n[0];
          const A = n[1];
          let B = w, E = 1;
          switch(w) {
            case 9:
            case 11:
            case 13:
            case 16:
              n = d(n);
              break a;
            case 1:
            case 17:
              B = A, E = 2;
            default:
              if (S(B)) {
                w = n[E];
                n = b(B, va(w) ? w : null) ? [n, z, m] : d(n);
                break a;
              }
          }
          n = void 0;
        }
        z = n;
      }
      if (z) {
        return n;
      }
    }
  }
  let f = a[0], e;
  return !O(f) && Q(f) ? (a.shift(), e = d(a), !c && (a.unshift(f), e && e[1] === a) ? [e[0], a, ++e[2]] : e) : d(a);
}
;var ub = !1, vb = !1, wb = !1, xb = !1, hb = 0, ob = 0, pb = 2;
function Z(a) {
  a = yb(a);
  ub && (a.html2json = ub);
  vb && (a.builder = vb);
  wb && (a.json2json = wb);
  xb && (a.json2html = xb);
  return a;
}
function yb(a) {
  a = a || {};
  const b = require("path").resolve(a.srcRootPath || "./") + "/", c = new Ya(a.urlOrigin || "", b), d = a.allPagesPath && db(c, a.allPagesPath), f = a.allPageOptionsPath && db(c, a.allPageOptionsPath), e = db(c, a.allMixinsPath || "all-mixins.json"), k = db(c, a.allTempletesPath || "all-templetes.json");
  return {sa:Za(b), oa:d || "", na:f || "", ta:e, ua:k, ra:qb(k), qa:qb(e), da:a.mixins || null, ca:a.templetes || null, la:a.allPageOptions || null, ma:{}, ga:{}, path:c};
}
function zb(a, b) {
  if (b) {
    a = new Ab(a);
    var c;
    if ("function" === typeof b) {
      return b.bind(a);
    }
    var d = {};
    for (c in b) {
      d[c] = b[c].bind(a);
    }
    return d;
  }
}
function Ab(a) {
  this.path = a.path;
  this.ga = a.ga;
}
;ub = function(a, b, c, d) {
  a = Va(a, b, c, d);
  if (b = rb(a)) {
    c = b[0], b[1].splice(b[2], 1), c && 3 === c.length && (b = JSON.parse(c[2]), !O(b) && Q(b) && a.unshift(b));
  }
  return a;
};
function Bb(a, b) {
  const c = this, d = require("plugin-error"), f = require("vinyl"), e = require("through2"), k = {}, l = c.ca = c.ca || {}, h = c.da = c.da || {};
  return e.obj(function(n, m, z) {
    var w = Za(n.path);
    if (n.isNull()) {
      return z();
    }
    if (n.isStream()) {
      return this.emit("error", new d("NicePageBuilder.gulp.html2json", "Streaming not supported")), z();
    }
    if (0 !== w.indexOf(c.sa)) {
      return this.emit("error", new d("NicePageBuilder.gulp.html2json", '"' + w + '" is outside of srcRootPath:"' + c.sa + '"')), z();
    }
    const A = n.contents.toString(m);
    m = parseInt(n.stat.birthtimeMs, 10);
    const B = parseInt(n.stat.ctimeMs, 10);
    var E = c.path;
    if (!E.$) {
      throw "absoluteDirectoryPathOfRoot is empty!";
    }
    if (!cb(E, w)) {
      throw w + " is not a absolute path!";
    }
    w = Za(w).substr(E.$.length - 1);
    w = ab(w);
    switch(n.extname) {
      case ".html":
      case ".htm":
      case ".xhtml":
      case ".php":
        n = ub.call(c, A, !1, a, b);
        k[w] = [n, m, B];
        break;
      case ".json":
        n = JSON.parse(A);
        Q(n) && (h[w] = [n, m, B]);
        break;
      default:
        this.push(n);
    }
    z();
  }, function(n) {
    function m(q, g, F) {
      if (g) {
        for (let p = 0, r = g.length; p < r; ++p) {
          const C = fb(c.path, q, g[p]), y = h[C];
          g[p] = C;
          if (y) {
            const v = y[ob];
            F || z(C, v.TEMPLETE, v);
            y.length === pb + 1 && (y.push(!0), v.MIXINS && (console.log('Mixin:"' + C + '" cannot have MIXINS property!'), delete v.MIXINS));
          } else {
            throw 'Mixin:"' + C + '" required by "' + q + '" does not exist!';
          }
        }
      }
    }
    function z(q, g, F) {
      for (; g;) {
        g = fb(c.path, q, g);
        const p = k[g];
        if (p) {
          if (delete k[g], l[g] = p, F.TEMPLETE = q = g, F = ib(p)) {
            m(q, F.MIXINS, !!F.TEMPLETE), g = F.TEMPLETE;
          } else {
            break;
          }
        } else if (l[g]) {
          F.TEMPLETE = g;
          break;
        } else {
          throw 'Templete:"' + g + '" required by "' + q + '" does not exist!';
        }
      }
    }
    function w(q, g) {
      q = new f({base:"/", path:q, contents:Buffer.from(JSON.stringify(g))});
      q.extname = ".json";
      u.push(q);
    }
    for (var A in k) {
      var B = k[A], E = ib(B);
      E && (m(A, E.MIXINS, !!E.TEMPLETE), z(A, E.TEMPLETE, E), k[A] && B.push(!0));
    }
    for (var x in h) {
      A = h[x], A.length === pb + 1 ? (console.log("Unused mixin found! " + x), delete h[x]) : A.pop();
    }
    for (var G in k) {
      x = k[G], A = gb(x), x.length === pb + 1 && tb(A, !1) && (console.log("Unused templete found! " + G), delete k[G]);
    }
    const u = this;
    G = {};
    x = {};
    w(c.ta, h);
    w(c.ua, l);
    for (const q in k) {
      A = k[q];
      B = Y(q);
      delete k[q];
      E = A[hb];
      let g = E[0];
      g = !O(g) && Q(g) ? g : {};
      g.URL = q;
      g.CREATED_AT = A[1];
      g.MODIFIED_AT = A[pb];
      g !== E[0] && E.unshift(g);
      w(B + ".json", E);
      delete g.URL;
      G[q] = E;
      x[q] = g;
    }
    c.oa && w(c.oa, G);
    c.la = x;
    c.na && w(c.na, x);
    n();
  });
}
;vb = function(a, b, c) {
  if (!jb(a)) {
    return a;
  }
  const d = a[0], f = [];
  nb(d, f, b || this.ca, c || this.da);
  for (var e = a; f.length;) {
    a = f.shift();
    c = (b || this.ca)[a];
    if (!c) {
      throw "Templete: " + a + " required by " + Y(d.URL) + " not found!";
    }
    a = void 0;
    c = gb(c);
    c = JSON.parse(JSON.stringify(c));
    var k = tb(c, !0);
    if (k) {
      const l = k[1];
      k = k[2];
      !O(e[0]) && Q(e[0]) && (a = e.shift());
      let h = Ea(e), n = e.length;
      l.splice(k, 1);
      for (k -= h; h < n; ++h) {
        l.splice(k + h, 0, e[h]);
      }
      a && c.unshift(a);
    }
    e = c;
  }
  delete d.TEMPLETE;
  delete d.MIXINS;
  return e;
};
function Cb() {
  const a = this, b = require("plugin-error"), c = require("vinyl"), d = require("through2"), f = {};
  let e = a.ca, k = a.da;
  return d.obj(function(l, h, n) {
    if (l.isNull()) {
      return n();
    }
    if (l.isStream()) {
      return this.emit("error", new b("NicePageBuilder.gulp.builder", "Streaming not supported")), n();
    }
    if (".json" !== l.extname) {
      return n(null, l);
    }
    h = l.contents.toString(h);
    h = JSON.parse(h);
    switch(l.stem.split(".").pop()) {
      case "html":
      case "htm":
      case "xhtml":
      case "php":
        return f[h[0].URL] = h, n();
      case a.ra:
        !O(h) && Q(h) && (a.ca && JSON.stringify(a.ca) !== JSON.stringify(h) && console.log("NicePageBuilder.gulp.builder templete list changed!"), e = a.ca = h);
        break;
      case a.qa:
        !O(h) && Q(h) && (a.da && JSON.stringify(a.da) !== JSON.stringify(h) && console.log("NicePageBuilder.gulp.builder templete list changed!"), k = a.da = h);
    }
    n(null, l);
  }, function(l) {
    for (const h in f) {
      const n = vb.call(a, f[h], e, k);
      delete f[h];
      this.push(new c({base:"/", path:Y(h) + ".json", contents:Buffer.from(JSON.stringify(n))}));
    }
    l();
  });
}
;function Db(a, b, c, d, f) {
  function e(q, g, F, p, r, C) {
    var y = q[0], v = q[1], t = 1, I = y, P;
    switch(y) {
      case 9:
      case 11:
        k(q, p, r, C);
        break;
      case 3:
        v = Ga("" + v, r, C, n, m, z);
        if ("" !== v) {
          g[F] = v;
        } else {
          return g.splice(F, 1), -1;
        }
        break;
      case 4:
        if (!w && g) {
          return g.splice(F, 1), -1;
        }
        break;
      case 8:
        if (!A && g) {
          return g.splice(F, 1), -1;
        }
        break;
      case 13:
        k(q, p, r, C);
        if (!B && g && 2 === q.length) {
          return g.splice(F, 1), -1;
        }
        break;
      case 15:
        q = g[F - 1];
        if (!B && q && 14 === q[0] && q) {
          return g.splice(F - 1, 2), -2;
        }
        break;
      case 16:
        k(q, p, r, C);
        if (!B && g && 2 === q.length) {
          return g.splice(F, 1), -1;
        }
        break;
      case 7:
        if (l) {
          if (q = wa(l, q, g, F, h), void 0 !== q) {
            if (null === q || "" === q) {
              return g ? g.splice(F, 1) : (a.length = 0, a.push(8, "")), -1;
            }
            if (!T(q) && O(q)) {
              return -1;
            }
          } else {
            u = !1;
          }
        } else {
          h("onInstruction is void!");
        }
        break;
      case 1:
      case 17:
        I = v, t = 2;
      default:
        if (S(I)) {
          if (1 + t <= q.length) {
            g = q[t];
            if (va(g)) {
              F = t - 1;
              C = 0;
              var K;
              y = Ja(q[F]);
              v = y[1];
              var N = y[2];
              y = y[0];
              for (D in g) {
                var R = D;
                var J = g[D];
                if (K = 0 === D.indexOf(E)) {
                  var D = D.substr(E.length);
                  "className" === D && (D = "class");
                  l ? J = xa(!1, l, D, J, h) : h("onInstruction is void!");
                  if (void 0 !== J) {
                    if (delete g[R], O(J)) {
                      S(J[0]) ? (g[R] = J, u = !1, ++C) : h("Invalid dynamic attribute callback value! [" + R + "=" + J + "]");
                    } else if ((!ba[D] || !1 !== J) && null !== J) {
                      if (S(J)) {
                        if ("id" === D) {
                          v = J;
                          continue;
                        } else if ("class" === D) {
                          R = J.split(" ");
                          for (J = R.length; J;) {
                            K = R[--J], -1 === (" " + N + " ").indexOf(" " + K + " ") && (N = (N ? " " : "") + K);
                          }
                          continue;
                        }
                      }
                      g[D] = J;
                      ++C;
                    }
                  } else {
                    u = !1, ++C;
                  }
                } else {
                  ++C;
                }
              }
              q[F] = Ka(y, v, N);
              0 === C && q.splice(t, 1);
            }
            x || (P = x = x || aa[I] ? !0 : 0 < I.indexOf(":"));
            t = !!sa[I];
            k(q, p, t || r, !!ra[I]);
            P && (x = !1);
          }
        } else {
          h("Not html.json! [" + q + "]");
        }
    }
    return 0;
  }
  function k(q, g, F, p) {
    var r = Ea(q);
    for (g.push(q); r < q.length; ++r) {
      var C = q[r];
      if (!T(C)) {
        if (O(C)) {
          if (C = e(C, q, r, g, F, p)) {
            r += C, G = !0;
          }
        } else {
          h("Invalid html.json! [" + C + "]");
        }
      }
    }
    g.pop();
  }
  var l = b || null;
  b = "function" === typeof c ? c : null;
  var h = "function" === typeof d ? d : function() {
  };
  d = f || {};
  var n = -1 !== ["normal", !0, "aggressive"].indexOf(d.trimWhitespaces), m = "aggressive" === d.trimWhitespaces, z = !!d.removeNewlineBetweenFullWidthChars, w = !1 !== d.keepCDATASections, A = !1 !== d.keepComments, B = !0 === d.keepEmptyConditionalComment, E = d.instructionAttrPrefix || ":", x = !1, G = !1, u = !0;
  if (O(a)) {
    return e(a, null, 0, [], !1, !1), G && Fa(a), b && Eb(b, a) && (u = Ma(a, E)), u;
  }
  h("Invalid html.json document!");
}
function Eb(a, b) {
  var c = za(b, !1);
  V = !1;
  a(c);
  if (a = V) {
    V = !1, b.length = 0, b.push.apply(b, Pa(c)), Fa(b);
  }
  return a;
}
;wb = function(a, b, c, d, f, e) {
  let k;
  if (jb(a)) {
    k = a.shift();
    c = k.URL;
    var l = this.ma[c];
    !l && this.la && (l = this.la[c]) && (l = JSON.parse(JSON.stringify(l)), l.URL = c, nb(l, [], this.ca, this.da), l = JSON.parse(JSON.stringify(l)), this.ma[c] = l);
    l || (c = JSON.parse(JSON.stringify(k)), (kb(c) || mb(c)) && nb(c, [], this.ca, this.da, f));
    b = zb(this, b);
    d = d ? d.bind(new Ab(this)) : void 0;
    f = f ? f.bind(new Ab(this)) : void 0;
  }
  b = Db(a, b, d, f, e);
  k && a.unshift(k);
  return b;
};
function Fb(a, b, c, d, f) {
  const e = this, k = require("plugin-error"), l = require("vinyl"), h = [];
  return require("through2").obj(function(n, m, z) {
    if (n.isNull()) {
      return z();
    }
    if (n.isStream()) {
      return this.emit("error", new k("NicePageBuilder.gulp.json2json", "Streaming not supported")), z();
    }
    if (".json" !== n.extname) {
      return this.push(n), z();
    }
    switch(n.stem.split(".").pop()) {
      case "html":
      case "htm":
      case "xhtml":
      case "php":
        return h.push(n, m), z();
      case e.ra:
        m = JSON.parse(n.contents.toString(m));
        !O(m) && Q(m) && (e.ca && JSON.stringify(e.ca) !== JSON.stringify(m) && console.log("NicePageBuilder.gulp.json2json templete list changed!"), e.ca = m);
        break;
      case e.qa:
        m = JSON.parse(n.contents.toString(m)), !O(m) && Q(m) && (e.da && JSON.stringify(e.da) !== JSON.stringify(m) && console.log("NicePageBuilder.gulp.json2json mixin list changed!"), e.da = m);
    }
    z(null, n);
  }, function(n) {
    for (; h.length;) {
      const z = h.shift();
      var m = h.shift();
      m = JSON.parse(z.contents.toString(m));
      wb.call(e, m, a, b, c, d, f);
      z.contents = Buffer.from(JSON.stringify(m));
      this.push(z);
    }
    for (const z in e.ga) {
      this.push(new l({base:"/", path:z, contents:Buffer.from(JSON.stringify(e.ga[z]))}));
    }
    n();
  });
}
;function Gb(a, b, c, d, f) {
  function e(x, G, u, q, g, F) {
    function p() {
      var K = "";
      B && (K = "</" + (E ? B : B.toLowerCase()) + ">", B = "");
      return K;
    }
    var r = n ? ya(x, u, n) : null;
    u = "";
    var C = x[0], y = x[1], v = 1, t = C, I;
    switch(C) {
      case 9:
        u = y + k(x, r, !1, F);
        break;
      case 11:
        u = k(x, r, g, F);
        break;
      case 3:
        u = p() + (F ? y : Ca("" + y));
        break;
      case 4:
        S(y) || m("CDATA_SECTION Error! [" + x + "]");
        u = "<![CDATA[" + Ca("" + y) + "]]\x3e";
        break;
      case 8:
        S(y) || m("COMMENT_NODE Error! [" + x + "]");
        u = "\x3c!--" + Ca("" + y) + "--\x3e";
        break;
      case 13:
        S(y) || m("COND_CMT_HIDE_LOWER Error! [" + x + "]");
        u = p() + "\x3c!--[" + y + "]>" + k(x, r, !0, F) + "<![endif]--\x3e";
        break;
      case 16:
        S(y) || m("NETSCAPE4_COND_CMT_HIDE_LOWER Error! [" + x + "]");
        u = p() + "\x3c!--{" + y + "};" + k(x, r, !0, F) + "--\x3e";
        break;
      case 14:
        S(y) || m("COND_CMT_SHOW_LOWER_START Error! [" + x + "]");
        u = "\x3c!--[" + y + "]>\x3c!--\x3e";
        break;
      case 15:
        u = "\x3c!--<![endif]--\x3e";
        break;
      case 7:
        if (h) {
          if (g = wa(h, x, G, q, m), void 0 !== g && null !== g && "" !== g) {
            if (T(g) || O(g)) {
              return -1;
            }
            m("PROCESSING_INSTRUCTION Error! [" + JSON.stringify(x) + "] result:" + JSON.stringify(g));
          }
        } else {
          m("onInstruction is void!");
        }
        break;
      case 18:
        S(y) || m("ELEMENT_END_TAG Error! [" + x + "]");
        u = "</" + y + ">";
        break;
      case 17:
        var P = !0;
      case 1:
        t = x[1], v = 2;
      default:
        S(t) || m("Not html.json! [" + x + "]"), t = Ja(t), G = t[1], q = t[2], t = t[0], v = x[v], "P" !== B || pa[t] ? B = "" : u = p(), E || (I = E = E || aa[t] ? !0 : 0 < t.indexOf(":")), u += "<" + (E ? t : t.toLowerCase()), G && (u += " id=" + Da(G, w, E || z)), q && (u += " class=" + Da(q, w, E || z)), va(v) && (u += l(v)), u = (x = k(x, r, oa[t], F || qa[t])) ? u + (">" + x) : P ? u + ">" : u + (E ? " />" : ">"), P && (B = ""), !x && ca[t] ? B = "" : E && !x || na[t] && (!g || "P" !== t) ? 
        B = t : (u += "</" + (E ? t : t.toLowerCase()) + ">", B = ""), I && (E = !1);
    }
    return u;
  }
  function k(x, G, u, q) {
    for (var g = [], F = Ea(x), p = -1, r; F < x.length; ++F) {
      r = x[F], T(r) ? g[++p] = e([3, r], x, G, F, !1, q) : O(r) ? (r = e(r, x, G, F, u, q), -1 === r ? --F : g[++p] = r) : m("Invalid html.json! [" + r + "]");
    }
    return g.join("");
  }
  function l(x) {
    var G = "", u, q;
    for (u in x) {
      var g = x[u];
      (q = 0 === u.indexOf(A)) && (u = u.substr(A.length));
      "className" === u && (u = "class");
      q && (h ? g = xa(!0, h, u, g, m) : m("onInstruction is void!"));
      if (!(null == g || ba[u] && !1 === g || (G += " " + u, ba[u] || !0 === g))) {
        if ("style" === u && Q(g) && (g = La(g), !g)) {
          continue;
        }
        G += "=" + Da(g, w, E || z);
      }
    }
    return G;
  }
  var h = b || null, n = c || null, m = "function" === typeof d ? d : function() {
  };
  b = f || {};
  var z = !0 === b.quotAlways, w = !0 === b.useSingleQuot, A = b.instructionAttrPrefix || ":", B, E = !1;
  if (O(a)) {
    return 7 === ua(a) && (a = [11, a]), e(a, null, null, 0, !1, !1);
  }
  m("Invalid html.json document!");
}
;xb = function(a, b, c, d, f) {
  if (jb(a)) {
    var e = a.shift();
    if (kb(e) || mb(e)) {
      throw Y(e.URL) + " is not complete document! Use nicePageBuilder.builder() before json2html().";
    }
    b = zb(this, b);
    if (c) {
      e = new Ab(this);
      var k;
      if ("function" === typeof c) {
        c = c.bind(e);
      } else {
        var l = [];
        var h = 0;
        for (k = c.length; h < k; h += 2) {
          l[h] = c[h], l[h + 1] = c[h + 1].bind(e);
        }
        c = l;
      }
    } else {
      c = void 0;
    }
    d = d ? d.bind(new Ab(this)) : void 0;
  }
  return Gb(a, b, c, d, f) || "";
};
function Hb(a, b, c, d) {
  const f = this, e = require("plugin-error"), k = require("vinyl"), l = [];
  return require("through2").obj(function(h, n, m) {
    if (h.isNull()) {
      return m();
    }
    if (h.isStream()) {
      return this.emit("error", new e("NicePageBuilder.gulp.json2html", "Streaming not supported")), m();
    }
    if (".json" !== h.extname) {
      return m(null, h);
    }
    const z = h.stem.split(".").pop();
    switch(z) {
      case "html":
      case "htm":
      case "xhtml":
      case "php":
        return l.push(h, n, z), m();
    }
    m(null, h);
  }, function(h) {
    for (; l.length;) {
      const m = l.shift();
      var n = l.shift();
      const z = l.shift();
      n = JSON.parse(m.contents.toString(n));
      const w = m.path.split(".json");
      w.pop();
      m.path = w.join(".json");
      m.contents = Buffer.from(xb.call(f, n, a, b, c, d));
      m.extname = "." + z;
      this.push(m);
    }
    for (const m in f.ga) {
      this.push(new k({base:"/", path:m, contents:Buffer.from(JSON.stringify(f.ga[m]))}));
    }
    h();
  });
}
;module.exports = Z;
Z.DOCUMENT_NODE = 9;
Z.DOCUMENT_FRAGMENT_NODE = 11;
Z.ELEMENT_NODE = 1;
Z.TEXT_NODE = 3;
Z.CDATA_SECTION = 4;
Z.PROCESSING_INSTRUCTION = 7;
Z.COMMENT_NODE = 8;
Z.COND_CMT_HIDE_LOWER = 13;
Z.COND_CMT_SHOW_LOWER_START = 14;
Z.NETSCAPE4_COND_CMT_HIDE_LOWER = 16;
Z.ELEMENT_START_TAG = 17;
Z.ELEMENT_END_TAG = 18;
module.exports.gulp = function(a) {
  a = yb(a);
  ub && (a.html2json = Bb);
  vb && (a.builder = Cb);
  wb && (a.json2json = Fb);
  xb && (a.json2html = Hb);
  return a;
};

