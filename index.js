var aa = {xml:!0, svg:!0, math:!0}, ba = {async:!0, autofocus:!0, checked:!0, compact:!0, declare:!0, defer:!0, disabled:!0, draggable:!0, hidden:!0, ismap:!0, loop:!0, multiple:!0, nohref:!0, noresize:!0, noshade:!0, novalidate:!0, nowrap:!0, readonly:!0, required:!0, reversed:!0, scoped:!0, selected:!0}, ca = {AREA:!0, BASE:!0, BASEFONT:!0, BR:!0, BGSOUND:!0, COL:!0, COMMAND:!0, FRAME:!0, HR:!0, IMG:!0, INPUT:!0, ISINDEX:!0, KEYGEN:!0, LINK:!0, META:!0, PARAM:!0, SOURCE:!0, TRACK:!0, EMBED:!0, 
WBR:!0, area:!0, base:!0, basefont:!0, br:!0, bgsound:!0, col:!0, command:!0, frame:!0, hr:!0, img:!0, input:!0, isindex:!0, keygen:!0, link:!0, meta:!0, param:!0, source:!0, track:!0, embed:!0, wbr:!0}, da = {SCRIPT:!0, STYLE:!0, TEXTAREA:!0, TITLE:!0, PLAINTEXT:!0, XMP:!0, script:!0, style:!0, textarea:!0, title:!0, plaintext:!0, xmp:!0}, H = {CAPTION:{ARTICLE:!0, SECTION:!0, NAV:!0, ASIDE:!0, H1:!0, H2:!0, H3:!0, H4:!0, H5:!0, H6:!0, HEADER:!0, FOOTER:!0, ADDRESS:!0, P:!0, HR:!0, PRE:!0, BLOCKQUOTE:!0, 
OL:!0, UL:!0, DL:!0, FIGURE:!0, DIV:!0, A:!0, EM:!0, STRONG:!0, SMALL:!0, S:!0, CITE:!0, Q:!0, DFN:!0, ABBR:!0, DATA:!0, TIME:!0, CODE:!0, VAR:!0, SAMP:!0, KBD:!0, SUB:!0, SUP:!0, I:!0, B:!0, U:!0, MARK:!0, RUBY:!0, BDI:!0, BDO:!0, SPAN:!0, BR:!0, WBR:!0, INS:!0, DEL:!0, PICTURE:!0, IMG:!0, IFRAME:!0, EMBED:!0, OBJECT:!0, VIDEO:!0, AUDIO:!0, MAP:!0, AREA:!0, math:!0, svg:!0, FORM:!0, LABEL:!0, INPUT:!0, BUTTON:!0, SELECT:!0, DATALIST:!0, TEXTAREA:!0, KEYGEN:!0, OUTPUT:!0, PROGRESS:!0, METER:!0, FIELDSET:!0, 
DETAILS:!0, DIALOG:!0, SCRIPT:!0, NOSCRIPT:!0, TEMPLATE:!0, CANVAS:!0}, DD:{ARTICLE:!0, SECTION:!0, NAV:!0, ASIDE:!0, H1:!0, H2:!0, H3:!0, H4:!0, H5:!0, H6:!0, HEADER:!0, FOOTER:!0, ADDRESS:!0, P:!0, HR:!0, PRE:!0, BLOCKQUOTE:!0, OL:!0, UL:!0, DL:!0, FIGURE:!0, DIV:!0, A:!0, EM:!0, STRONG:!0, SMALL:!0, S:!0, CITE:!0, Q:!0, DFN:!0, ABBR:!0, DATA:!0, TIME:!0, CODE:!0, VAR:!0, SAMP:!0, KBD:!0, SUB:!0, SUP:!0, I:!0, B:!0, U:!0, MARK:!0, RUBY:!0, BDI:!0, BDO:!0, SPAN:!0, BR:!0, WBR:!0, INS:!0, DEL:!0, 
PICTURE:!0, IMG:!0, IFRAME:!0, EMBED:!0, OBJECT:!0, VIDEO:!0, AUDIO:!0, MAP:!0, AREA:!0, math:!0, svg:!0, TABLE:!0, FORM:!0, LABEL:!0, INPUT:!0, BUTTON:!0, SELECT:!0, DATALIST:!0, TEXTAREA:!0, KEYGEN:!0, OUTPUT:!0, PROGRESS:!0, METER:!0, FIELDSET:!0, DETAILS:!0, DIALOG:!0, SCRIPT:!0, NOSCRIPT:!0, TEMPLATE:!0, CANVAS:!0}, DT:{ADDRESS:!0, P:!0, HR:!0, PRE:!0, BLOCKQUOTE:!0, OL:!0, UL:!0, DL:!0, FIGURE:!0, DIV:!0, A:!0, EM:!0, STRONG:!0, SMALL:!0, S:!0, CITE:!0, Q:!0, DFN:!0, ABBR:!0, DATA:!0, TIME:!0, 
CODE:!0, VAR:!0, SAMP:!0, KBD:!0, SUB:!0, SUP:!0, I:!0, B:!0, U:!0, MARK:!0, RUBY:!0, BDI:!0, BDO:!0, SPAN:!0, BR:!0, WBR:!0, INS:!0, DEL:!0, PICTURE:!0, IMG:!0, IFRAME:!0, EMBED:!0, OBJECT:!0, VIDEO:!0, AUDIO:!0, MAP:!0, AREA:!0, math:!0, svg:!0, TABLE:!0, FORM:!0, LABEL:!0, INPUT:!0, BUTTON:!0, SELECT:!0, DATALIST:!0, TEXTAREA:!0, KEYGEN:!0, OUTPUT:!0, PROGRESS:!0, METER:!0, FIELDSET:!0, DETAILS:!0, DIALOG:!0, SCRIPT:!0, NOSCRIPT:!0, TEMPLATE:!0, CANVAS:!0}, P:{A:!0, EM:!0, STRONG:!0, SMALL:!0, 
S:!0, CITE:!0, Q:!0, DFN:!0, ABBR:!0, DATA:!0, TIME:!0, CODE:!0, VAR:!0, SAMP:!0, KBD:!0, SUB:!0, SUP:!0, I:!0, B:!0, U:!0, MARK:!0, RUBY:!0, BDI:!0, BDO:!0, SPAN:!0, BR:!0, WBR:!0, INS:!0, DEL:!0, PICTURE:!0, IMG:!0, IFRAME:!0, EMBED:!0, OBJECT:!0, VIDEO:!0, AUDIO:!0, MAP:!0, AREA:!0, math:!0, svg:!0, LABEL:!0, INPUT:!0, BUTTON:!0, SELECT:!0, DATALIST:!0, TEXTAREA:!0, KEYGEN:!0, OUTPUT:!0, PROGRESS:!0, METER:!0, SCRIPT:!0, NOSCRIPT:!0, TEMPLATE:!0, CANVAS:!0}, HTML:{HEAD:!0, BODY:!0}, HEAD:{TITLE:!0, 
BASE:!0, BGSOUND:!0, LINK:!0, META:!0, STYLE:!0, SCRIPT:!0, NOSCRIPT:!0, TEMPLETE:!0}, COLGROUP:{COL:!0}, OPTGROUP:{OPTION:!0}, OPTION:{}, TBODY:{TR:!0}, TR:{TH:!0, TD:!0}, RBC:{RB:!0, RP:!0, RT:!0}};
H.LI = H.TD = H.DD;
H.TH = H.DT;
H.RB = H.RP = H.RT = H.P;
H.TFOOT = H.THEAD = H.TBODY;
H.RTC = H.RBC;
var I = {a:2, b:2, c:2, d:2, e:2, f:2, g:2, h:2, i:2, j:2, k:2, l:2, m:2, n:2, o:2, p:2, q:2, r:2, s:2, t:2, u:2, v:2, w:2, x:2, y:2, z:2, A:1, B:1, C:1, D:1, E:1, F:1, G:1, H:1, I:1, J:1, K:1, L:1, M:1, N:1, O:1, P:1, Q:1, R:1, S:1, T:1, U:1, V:1, W:1, X:1, Y:1, Z:1, "\t":4, "\n":4, "\f":4, "\r":4, " ":4};
function ea(a, b) {
  var c = 0;
  function d() {
    c && (fa(b, e(a.substring(0, c))), a = a.substring(c), c = 0);
  }
  function e(m) {
    return m.split("&lt;").join("<").split("&gt;").join(">").split("&amp;lt;").join("&lt;").split("&amp;gt;").join("&gt;");
  }
  function f(m, p, u) {
    for (var B = 0, y = u.length, t = 3, r, E; t < y && 2 !== B;) {
      E = u.charAt(t);
      switch(B) {
        case 0:
          I[E] & 4 ? B = 1 : ">" === E && (B = 2);
          B && (r = u.substring(2, t));
          break;
        case 1:
          ">" === E && (B = 2);
      }
      ++t;
    }
    return 2 === B ? (ca[r] || h(m, p, l || n ? r : r.toUpperCase(), !1), t) : 0;
  }
  function h(m, p, u, B) {
    var y = 0, t = m.length;
    if (u) {
      for (y = t; 0 <= y && m[--y] !== u;) {
      }
    }
    if (0 <= y) {
      for (; y < t;) {
        ha(p, m[--t], B && !H[m[t]], !1), l && aa[m[t]] && (l = !!p.ea);
      }
      m.length = y;
      if (n) {
        for (n = !1, t = y; t;) {
          if (0 < m[--t].indexOf(":")) {
            n = !0;
            break;
          }
        }
      }
    } else {
      ha(p, u, !1, !0);
    }
  }
  function v(m, p, u, B) {
    function y(J, N) {
      function G(Tb) {
        return e(Tb).split('\\"').join('"').split("\\'").join("'").split("&quot;").join('"').split("&apos;").join("'");
      }
      z[J] = !0 === N ? !0 : ba[J.toLowerCase()] ? l ? G(N || J) : !0 : G(N || "");
      ++F;
    }
    function t() {
      (C = "/>" === B.substr(w, 2)) && ++w;
      return C;
    }
    for (var r = 1, E = B.length, w = 2, z = {}, F = 0, C = !1, D, A, M, Q, O, K; w < E && 9 > r;) {
      D = B.charAt(w);
      switch(r) {
        case 1:
          if (I[D] & 4) {
            r = 2, A = B.substring(1, w);
          } else if (">" === D || t()) {
            r = 9, A = B.substring(1, w);
          }
          break;
        case 2:
          ">" === D || t() ? r = 9 : I[D] & 4 || (r = 3, M = w);
          break;
        case 3:
          if ("=" === D) {
            r = 5, Q = B.substring(M, w);
          } else if (I[D] & 4) {
            r = 4, Q = B.substring(M, w);
          } else if (">" === D || t()) {
            r = 9, y(B.substring(M, w), !0);
          }
          break;
        case 4:
          "=" === D ? r = 5 : ">" === D || t() ? (r = 9, y(Q, !0)) : I[D] & 4 || (r = 3, y(Q, !0), M = w);
          break;
        case 5:
          '"' === D || "'" === D ? (r = 6, O = D, M = w + 1) : I[D] & 4 || (r = 7, M = w);
          K = !1;
          break;
        case 6:
          K || D !== O || (r = 2, y(Q, B.substring(M, w)));
          K = "\\" === D && !K;
          break;
        case 7:
          I[D] & 4 ? r = 2 : ">" === D && (r = 9), 7 !== r && y(Q, B.substring(M, w));
      }
      ++w;
    }
    if (9 === r) {
      r = A.toUpperCase();
      l ||= !!aa[A];
      n ||= 0 < A.indexOf(":");
      if (!l && !n) {
        for (; p;) {
          if (H[p] && !H[p][r]) {
            h(m, u, p, !1), p = m[m.length - 1];
          } else {
            break;
          }
        }
      }
      (C = C || !!ca[r]) || (m[m.length] = l || n ? A : r);
      ia(u, l || n ? A : r, F ? z : null, C);
      return w;
    }
    return 0;
  }
  for (var x = [], l = !!b.ea, n = !1, k = a.length - c, q, g; a;) {
    q = x[x.length - 1];
    if (da[q]) {
      if ("PLAINTEXT" === q || "plaintext" === q) {
        fa(b, e(a)), a = "";
      } else {
        if (g = a.indexOf("</" + (l || n ? q : q.toLowerCase())), -1 === g && (g = a.indexOf("</" + (l || n ? q.toUpperCase() : q))), 0 <= g) {
          if (c = g, d(), q = f(x, b, a)) {
            a = a.substring(q);
          } else {
            L(b, a);
            return;
          }
        } else {
          L(b, a);
          return;
        }
      }
    } else if (a.indexOf("<!DOCTYPE ") === c) {
      if (d(), g = a.indexOf(">"), -1 !== g) {
        ja(b, a.substring(c, g + 1)), a = a.substring(g + 1);
      } else {
        L(b, a);
        return;
      }
    } else if (a.indexOf("<?") === c) {
      if (d(), g = a.indexOf("?>"), -1 !== g) {
        ka(b, e(a.substring(2, g))), a = a.substring(g + 2);
      } else {
        L(b, a);
        return;
      }
    } else if (a.indexOf("<![CDATA[") === c) {
      if (d(), g = a.indexOf("]]\x3e"), -1 !== g) {
        la(b, e(a.substring(9, g))), a = a.substring(g + 3);
      } else {
        L(b, a);
        return;
      }
    } else if (a.indexOf("\x3c!--") === c) {
      if (d(), g = a.indexOf("--\x3e"), -1 !== g) {
        ma(b, e(a.substring(4, g))), a = a.substring(g + 3);
      } else {
        L(b, a);
        return;
      }
    } else if (a.indexOf("</") === c && I[a.charAt(c + 2)] & 3) {
      if (d(), q = f(x, b, a)) {
        a = a.substring(q);
      } else {
        L(b, a);
        return;
      }
    } else if ("<" === a.charAt(c) && I[a.charAt(c + 1)] & 3) {
      if (d(), q = v(x, q, b, a)) {
        a = a.substring(q);
      } else {
        L(b, a);
        return;
      }
    } else {
      g = a.indexOf("<", c), -1 === g ? (fa(b, e(a)), a = "") : c < g ? c = g : ++c;
    }
    q = a.length - c;
    if (q === k) {
      L(b, a);
      return;
    }
    k = q;
  }
  d();
  h(x, b, "", !0);
}
;var na = {HTML:!0, HEAD:!0, BODY:!0, P:!0, DT:!0, DD:!0, LI:!0, OPTION:!0, TBODY:!0, THEAD:!0, TFOOT:!0, TD:!0, TH:!0, TR:!0, RB:!0, RBC:!0, RP:!0, RT:!0, RTC:!0, OPTGROUP:!0, CAPTION:!0, COLGROUP:!0}, oa = {A:!0, AUDIO:!0, DEL:!0, INS:!0, MAP:!0, NOSCRIPT:!0, VIDEO:!0}, pa = {H1:!0, H2:!0, H3:!0, H4:!0, H5:!0, H6:!0, ADDRESS:!0, BLOCKQUOTE:!0, DIV:!0, DL:!0, FIELDSET:!0, FORM:!0, HR:!0, LEGEND:!0, MENU:!0, NOSCRIPT:!0, OL:!0, P:!0, PRE:!0, UL:!0, CENTER:!0, DIR:!0, NOFRAMES:!0, MARQUEE:!0}, qa = 
{SCRIPT:!0, STYLE:!0, TEXTAREA:!0, TITLE:!0, PLAINTEXT:!0, XMP:!0, script:!0, style:!0, textarea:!0, title:!0, plaintext:!0, xmp:!0}, ra = {SCRIPT:!0, STYLE:!0, TEXTAREA:!0, script:!0, style:!0, textarea:!0}, sa = {PRE:!0, LISTING:!0, pre:!0, listing:!0}, ta = !1, ua = !1, va = !1;
function P(a) {
  return !(!a || a.pop !== [].pop);
}
function R(a) {
  return !(!a || "object" !== typeof a);
}
function S(a) {
  return "" + a === a;
}
function T(a) {
  return S(a) || a === +a;
}
function wa(a) {
  return a === "" + +a && a === a && a !== "" + 1 / 0 && a !== "" + -1 / 0;
}
function xa(a) {
  if (T(a)) {
    a = 3;
  } else {
    if (P(a)) {
      if (S(a[0])) {
        a = 1;
      } else {
        var b = a[0];
        a = b === +b ? a[0] : -1;
      }
    } else {
      a = -1;
    }
  }
  return a;
}
function ya(a) {
  return !P(a) && R(a);
}
function za(a, b, c, d, e) {
  var f = b[1], h = b.slice(2), v;
  "function" === typeof a ? v = h.length ? a(f, h) : a(f) : a[f] && (v = h.length ? a[f].apply(null, h) : a[f]());
  void 0 !== v && null !== v && "" !== v && (T(v) ? c ? c.splice(d, 1, v) : (b.length = 0, b.push(3, b)) : P(v) ? 11 === v[0] ? c ? (v.shift(), v.unshift(d, 1), c.splice.apply(c, v)) : (b.length = 0, b.push.apply(b, v)) : P(v[0]) ? c ? (v.unshift(d, 1), c.splice.apply(c, v)) : (b.length = 0, b.push(11), b.push.apply(b, v)) : c ? c.splice(d, 1, v) : (b.length = 0, b.push(11, v)) : e("PROCESSING_INSTRUCTION Error! [" + JSON.stringify(b) + "]"));
  return v;
}
function Aa(a, b, c, d, e, f) {
  var h;
  if (P(d) && S(d[0])) {
    var v = d[0];
    d = d.slice(1);
    "function" === typeof b ? h = d.length ? b.call(f, v, d) : b.call(f, v) : b[v] && (h = d.length ? b[v].apply(f || b, d) : b[v].call(f || b));
  } else {
    S(d) ? "function" === typeof b ? h = b(d) : h = b[d]() : e("Invalid InstructionAttr value! [" + c + "=" + d + "]");
  }
  return a && P(h) ? Aa(!0, b, c, h, e, f) : h;
}
function Ba(a, b, c) {
  a = Ca(a, !0);
  var d;
  Da = a;
  b && (b.ca ? b.ca.push(a) : b.ca = [a]);
  if (P(c)) {
    var e = Ea(a);
    b = 0;
    for (d = c.length; b < d; b += 2) {
      var f = c[b];
      var h = c[b + 1];
      if (f === +f) {
        if (f === a.$ && !0 === h(a)) {
          break;
        }
      } else if ("*" === f) {
        if (!0 === h(a)) {
          break;
        }
      } else if (e && S(f)) {
        if (f === a.ia && !0 === h(a)) {
          break;
        }
      } else {
        throw "onEnterNode: invalid selector found! " + f;
      }
    }
  } else {
    c(a);
  }
  return a;
}
function U(a) {
  return a.split("&lt;").join("&amp;lt;").split("&gt;").join("&amp;gt;").split("<").join("&lt;").split(">").join("&gt;");
}
function Fa(a, b, c) {
  a = U("" + a);
  var d = a.match('"'), e = a.match("'"), f = b ? "'" : '"';
  d && e ? a = b ? f + a.split("'").join("\\'") + f : f + a.split('"').join('\\"') + f : d ? a = "'" + a + "'" : e ? a = b ? f + a.split("'").join("\\'") + f : f + a + f : c || a.match(/[^0-9a-z\.\-]/g) || 72 < a.length ? a = f + a + f : "" === a && (a = f + f);
  return a;
}
function Ga(a) {
  var b = [];
  a = a.split("");
  for (var c = a.length, d; c;) {
    d = a[--c], "A" <= d && "Z" >= d && (d = "-" + d.toLowerCase()), b[c] = d;
  }
  return b.join("");
}
function Ha(a) {
  var b = a[0], c = b === +b ? 2 : 1;
  return 1 === xa(a) || 17 === b ? ya(a[c]) ? c + 1 : c : 11 === b ? 1 : 9 === b || 13 === b || 16 === b ? 2 : Infinity;
}
function Ia(a) {
  function b() {
    e.splice(f, 0, wa(c) ? +c : c);
    c = "";
  }
  var c = "", d, e, f;
  Ja(a, function(h, v, x, l) {
    if (c && d !== l) {
      return b(), Ka;
    }
    if (3 === xa(h)) {
      return c = T(h) ? c + h : c + h[1], v.splice(x, 1), d = l, e = v, f = x, La;
    }
    if (c) {
      return b(), Ka;
    }
  });
  c && b();
}
function Ma(a, b, c, d, e, f) {
  if (!b && d) {
    if (c) {
      a = Na(Oa(a, "\n"), "\n");
    } else {
      a = a.split("\r\n").join("\n");
      f && (a = a.replace(/([\uFF01-\uFF60\u3040-\u309F\u30A0-\u30FF\u4E00-\u9FFF])\s([\uFF01-\uFF60\u3040-\u309F\u30A0-\u30FF\u4E00-\u9FFF])/g, "$1$2"));
      for (a = a.split("\t").join(" "); 0 <= a.indexOf("\n\n");) {
        a = a.split("\n\n").join("\n");
      }
      if (e) {
        var h = "\n" === a.charAt(0) && /\n[ ]*$/.test(a);
      }
      a = Na(a, "\n");
      for (a = a.split("\n").join(" "); 0 <= a.indexOf("  ");) {
        a = a.split("  ").join(" ");
      }
      h && (a = Na(Oa(a, " "), " "));
      a = a.split("\\u0020").join(" ").split("&#x20;").join(" ").split("&#32;").join(" ");
    }
  }
  return wa(a) ? +a : a;
}
function Oa(a, b) {
  for (; a.charAt(0) === b;) {
    a = a.substr(1);
  }
  return a;
}
function Na(a, b) {
  for (; a.charAt(a.length - 1) === b;) {
    a = a.substr(0, a.length - 1);
  }
  return a;
}
function Pa(a) {
  var b = a.indexOf("#"), c = a.indexOf("."), d = "", e = "";
  b < c ? (d = a.split(".")[1], a = a.split(".")[0], 0 < b && (e = a.split("#")[1], a = a.split("#")[0])) : c < b && (e = a.split("#")[1], a = a.split("#")[0], 0 < c && (d = a.split(".")[1], a = a.split(".")[0]));
  return [a, e, d];
}
function Qa(a, b, c) {
  b && (a += "#" + b);
  c && (a += "." + c);
  return a;
}
function Ra(a) {
  var b = [], c = -1, d;
  for (d in a) {
    var e = a[d];
    "0px" === e && (e = 0);
    b[++c] = Ga(d) + ":" + U("" + e);
  }
  return b.join(";").substr(1);
}
function Sa(a, b) {
  var c = !1;
  Ja(a, function(d) {
    if (P(d)) {
      var e = d[0], f = d[1], h = e, v = 1;
      switch(e) {
        case 7:
          return c = !0, Ta;
        case 1:
        case 17:
          h = f, v = 2;
        default:
          if (e = S(h)) {
            if (e = ya(d[v])) {
              a: {
                d = d[v];
                for (var x in d) {
                  if (0 === x.indexOf(b)) {
                    e = !0;
                    break a;
                  }
                }
                e = !1;
              }
            }
          }
          if (e) {
            return c = !0, Ta;
          }
      }
    }
  });
  return !c;
}
function Ca(a, b) {
  var c, d;
  Ja(a, function(e, f, h, v) {
    function x(q, g, m) {
      c ? (v + 1 < d.length && (d.length = v + 1), q = Ua(d[d.length - 1], q, g, m), P(e) && Ha(e) < e.length && (d[v + 1] = q)) : (c = new Va(b, 0, q, g, m), d = [c]);
    }
    if (T(e)) {
      x(3, e);
    } else {
      f = e[0];
      h = e[1];
      var l = 1, n = f, k;
      switch(f) {
        case 9:
        case 13:
        case 16:
          x(f, h);
          break;
        case 11:
          x(f);
          break;
        case 3:
        case 4:
        case 8:
        case 14:
        case 18:
          x(f, h);
          break;
        case 15:
          x(f);
          break;
        case 7:
          l = [];
          n = 2;
          for (k = e.length; n < k; ++n) {
            l[n - 2] = e[n];
          }
          x(f, h, k - 2 ? l : null);
          break;
        case 1:
        case 17:
          n = h, l = 2;
        default:
          S(n) && x(1 === l ? 1 : f, n, e[l]);
      }
    }
    if (b) {
      return Ta;
    }
  });
  return c;
}
var La = -1, Ka = 1, Ta = Infinity, Wa = Infinity;
function Ja(a, b) {
  var c = a, d = Ha(a), e = 0, f = b(a, null, -1, 0);
  a = [-1, a, d];
  if (f !== Ta && f !== Wa && 0 < c.length - d) {
    do {
      f = ++a[e];
      var h = c[f + d];
      if (void 0 === h) {
        a.length = e, e -= 3, c = a[e + 1], d = a[e + 2];
      } else {
        f = b(h, c, f + d, e / 3);
        if (f === Ta) {
          break;
        }
        f !== Wa && (f <= La ? a[e] += f : (Ka <= f && (a[e] += f), 0 < h.length - Ha(h) && (e += 3, a[e] = -1, a[e + 1] = c = h, a[e + 2] = d = Ha(h))));
      }
    } while (0 <= e);
  }
}
;function Va(a, b, c, d, e) {
  if (a === !!a) {
    var f = null;
    this.ba = a;
  } else {
    f = a, this.ba = f.ba;
  }
  if (f) {
    switch(f.$) {
      case 3:
      case 8:
      case 4:
      case 7:
      case 15:
      case 18:
        throw "nodeType:" + f.$ + " \u306f\u89aa\u306b\u306a\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u305b\u3093!";
    }
    if (Xa(this)) {
      throw "nodeType:" + f.$ + " \u306f\u5b50\u306b\u306a\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u305b\u3093!";
    }
  }
  this.fa = f;
  this.$ = c;
  if (f) {
    if (f.ca || (f.ca = []), a = f.ca, 0 <= b && b < a.length) {
      if (1 <= b && 17 === a[b - 1].$) {
        throw "\u9589\u3058\u30bf\u30b0\u306e\u7121\u3044 Element \u306e\u6b21\u306b Node \u3092\u633f\u5165\u3059\u308b\u3053\u3068\u306f\u51fa\u6765\u307e\u305b\u3093!";
      }
      a.splice(b, 0, this);
    } else {
      if (a.length && 17 === a[a.length - 1].$) {
        throw "\u9589\u3058\u30bf\u30b0\u306e\u7121\u3044 Element \u306e\u6b21\u306b Node \u3092\u633f\u5165\u3059\u308b\u3053\u3068\u306f\u51fa\u6765\u307e\u305b\u3093!";
      }
      a.push(this);
    }
  }
  switch(c) {
    case 1:
    case 17:
      this.la = e || null, d = Pa(d), this.oa = d[1], this.ma = d[2], d = d[0];
    case 18:
      this.ia = d;
      break;
    case 7:
      this.da = e || null;
    case 3:
    case 4:
    case 8:
    case 9:
    case 13:
    case 14:
    case 16:
      this.ga = d;
  }
}
var Da = null, V = !1;
function Ya(a) {
  if (a.ba) {
    throw "restricted mode \u3067\u306f getHTMLJSON() \u306f\u975e\u5bfe\u5fdc\u3067\u3059!";
  }
  var b = [a.$], c = a.ca, d, e;
  switch(a.$) {
    case 1:
      b.length = 0;
    case 17:
      b.push(Qa(a.ia, a.oa, a.ma));
      a = a.la;
      ya(a) && (b.push(a), a.style && R(a.style) && (a.style = Ra(a.style)));
      break;
    case 18:
      b[1] = a.ia;
      break;
    case 7:
      if (d = a.da) {
        var f = 0;
        for (e = d.length; f < e; ++f) {
          b[2 + f] = d[f];
        }
      }
    case 3:
    case 4:
    case 8:
    case 9:
    case 13:
    case 14:
    case 16:
      b[1] = a.ga;
  }
  if (c) {
    for (f = 0, e = c.length; f < e; ++f) {
      b.push(Ya(c[f]));
    }
  }
  return b;
}
function W(a) {
  switch(a.$) {
    case 3:
    case 4:
    case 7:
    case 8:
    case 9:
    case 13:
    case 14:
    case 16:
      return a.ga;
    default:
      throw "getNodeValue() \u3092\u30b5\u30dd\u30fc\u30c8\u3057\u306a\u3044 nodeType \u3067\u3059!";
  }
}
function Za(a, b) {
  if (a.ba && !$a(a)) {
    throw "restricted mode \u3067\u306f\u73fe\u5728\u306e\u30ce\u30fc\u30c9\u4ee5\u5916\u3078\u306e setNodeValue() \u306f\u975e\u5bfe\u5fdc\u3067\u3059!";
  }
  switch(a.$) {
    case 3:
    case 4:
    case 7:
    case 8:
    case 9:
      a.ga !== b && (V = !0);
      a.ga = b;
      break;
    default:
      throw "setNodeValue() \u3092\u30b5\u30dd\u30fc\u30c8\u3057\u306a\u3044 nodeType \u3067\u3059!";
  }
}
function Ea(a) {
  return 1 === a.$ || 17 === a.$;
}
function ab(a) {
  if (!Ea(a) && 18 !== a.$) {
    throw "getTagName() \u3092\u30b5\u30dd\u30fc\u30c8\u3057\u306a\u3044 nodeType \u3067\u3059!";
  }
  return a.ia;
}
function X(a) {
  if (!bb(a)) {
    throw "getChildNodeCount() \u3092\u30b5\u30dd\u30fc\u30c8\u3057\u306a\u3044 nodeType \u3067\u3059!";
  }
  if (a.ba) {
    throw "restricted mode \u3067\u306f getChildNodeCount() \u306f\u975e\u5bfe\u5fdc\u3067\u3059!";
  }
  return a.ca && a.ca.length;
}
function cb(a, b) {
  if (!bb(a)) {
    throw "getChildNodeAt() \u3092\u30b5\u30dd\u30fc\u30c8\u3057\u306a\u3044 nodeType \u3067\u3059!";
  }
  if (a.ba) {
    throw "restricted mode \u3067\u306f getChildNodeAt() \u306f\u975e\u5bfe\u5fdc\u3067\u3059!";
  }
  return a.ca && a.ca[b] || null;
}
Va.prototype.remove = function() {
  if (Xa(this)) {
    throw "remove() \u3092\u30b5\u30dd\u30fc\u30c8\u3057\u306a\u3044 nodeType \u3067\u3059!";
  }
  if (this.ba && !$a(this)) {
    throw "restricted mode \u3067\u306f\u73fe\u5728\u306e\u30ce\u30fc\u30c9\u4ee5\u5916\u3078\u306e discard() \u306f\u975e\u5bfe\u5fdc\u3067\u3059!";
  }
  if (this.ba) {
    return this.pa = V = !0, null;
  }
  if (Xa(this)) {
    throw "getMyIndex() \u3092\u30b5\u30dd\u30fc\u30c8\u3057\u306a\u3044 nodeType \u3067\u3059!";
  }
  if (this.ba) {
    throw "restricted mode \u3067\u306f getMyIndex() \u306f\u975e\u5bfe\u5fdc\u3067\u3059!";
  }
  var a = this.fa ? this.fa.ca.indexOf(this) : -1;
  0 <= a && (this.fa.ca.splice(a, 1), this.fa = null, V = !0);
};
function Ua(a, b, c, d) {
  if (a.ba && (!$a(a) || !bb(a))) {
    throw "restricted mode \u3067\u306f\u73fe\u5728\u306e\u30ce\u30fc\u30c9\u4ee5\u5916\u3078\u306e insertNodeLast() \u306f\u975e\u5bfe\u5fdc\u3067\u3059!";
  }
  if (a.ba) {
    return a.ea = a.ea || [], a.ea.push([b, c, d]), V = !0, null;
  }
  var e = X(a);
  if (a.ba) {
    throw "restricted mode \u3067\u306f insertNodeAt() \u306f\u975e\u5bfe\u5fdc\u3067\u3059!";
  }
  V = !0;
  return new Va(a, e, b, c, d);
}
function bb(a) {
  return 1 === a.$ || 17 === a.$ || 13 === a.$ || 16 === a.$ || Xa(a);
}
function Xa(a) {
  return 9 === a.$ || 11 === a.$;
}
function $a(a) {
  return a === Da && !a.pa;
}
;function db(a, b, c, d) {
  function e(w, z, F, C) {
    switch(w.$) {
      case 1:
      case 17:
        var D = {};
        C = ab(w);
        var A = !!sa[C];
        var M = w.la, Q = 0, O;
        if (M) {
          for (O in M) {
            var K = ba[O] ? 1 : M[O];
            if ("id" === O) {
              var J = K;
            } else if ("class" === O) {
              var N = K;
            } else {
              if (O.startsWith(y)) {
                var G = f(K);
                G.Ga ? (K = [G.Ha], k.apply(K, G.Ga)) : K = G.Ha;
              }
              D[O] = wa(K) ? +K : K;
              ++Q;
            }
          }
        }
        C = Qa(C, J, N);
        if (A && q) {
          for (; G = v(w);) {
            if (l(W(G))) {
              Za(G, Oa(W(G), "\n"));
              break;
            } else {
              G.remove();
            }
          }
          for (; G = x(w);) {
            if (l(W(G))) {
              Za(G, Na(W(G), "\n"));
              break;
            } else {
              G.remove();
            }
          }
        }
        D = Q ? [C, D] : [C];
        for (G = 0; G < X(w); ++G) {
          e(cb(w, G), D, A || F, !!ra[C]);
        }
        z.push(D);
        17 !== w.$ || D.unshift(17);
        break;
      case 18:
        z.push([18, ab(w)]);
        break;
      case 3:
        A = Ma("" + W(w), F, C, q, g, m);
        "" !== A && z.push(A);
        break;
      case 4:
        p && (A = W(w), z.push([4, wa(A) ? +A : A]));
        break;
      case 7:
        A = W(w);
        G = f(A);
        D = [7, G.Ha];
        G.Ga && k.apply(D, G.Ga);
        z.push(D);
        break;
      case 8:
        A = W(w);
        if (A.startsWith("[if") && 0 < A.indexOf("<![endif]")) {
          w = eb(h(A, ">", "<![endif]", !0), !0, c);
          D = [13, h(A, "[", "]", !1)];
          for (G = 0; G < X(w); ++G) {
            e(cb(w, G), D, F, C);
          }
          (2 < D.length || B) && z.push(D);
        } else if (A.startsWith("{") && 2 < A.indexOf("};")) {
          w = eb(A.substring(A.indexOf("};") + 2), !0, c);
          D = [16, h(A, "{", "};", !1)];
          for (G = 0; G < X(w); ++G) {
            e(cb(w, G), D, F, C);
          }
          (2 < D.length || B) && z.push(D);
        } else {
          A.startsWith("[if") && 0 < A.indexOf("><!") ? (z.push([14, h(A, "[", "]", !1)]), E = !0) : "<![endif]" === A && E ? (F = z[z.length - 1], B || !F || 14 !== F[0] ? z.push([15]) : F && z.pop(), E = !1) : u && z.push([8, wa(A) ? +A : A]);
        }
        break;
      case 9:
        A = W(w);
        q && (A = A.split("\n").join(" ").split("  ").join(" "));
        D = [9, A];
        z.push(D);
        for (G = 0; G < X(w); ++G) {
          e(cb(w, G), D, !1, !1);
        }
        break;
      case 11:
        for (D = [11], z.push(D), G = 0; G < X(w); ++G) {
          e(cb(w, G), D, F, C);
        }
    }
  }
  function f(w) {
    var z = w.indexOf(t), F = w.lastIndexOf(r), C = Na(Oa(-1 === z ? w : w.substr(0, z), " "), " ");
    w = -1 === z ? [] : JSON.parse("[" + w.substring(z + t.length, F) + "]");
    return w.length ? {Ha:C, Ga:w} : {Ha:C};
  }
  function h(w, z, F, C) {
    z = w.indexOf(z) + z.length;
    F = C ? w.lastIndexOf(F) : w.indexOf(F, z);
    return w.substring(z, F);
  }
  function v(w) {
    for (var z = 0, F = X(w), C; z < F; ++z) {
      if (C = cb(w, z), Ea(C) && (C = v(C)), C && 3 === C.$) {
        return C;
      }
    }
  }
  function x(w) {
    for (var z = X(w), F; z;) {
      if (F = cb(w, --z), Ea(F) && (F = x(F)), F && 3 === F.$) {
        return F;
      }
    }
  }
  function l(w) {
    return w.split("\n").join("").split(" ").join("").split("\t").join("");
  }
  const n = [], k = n.push;
  a = eb(a, b, c);
  d = d || {};
  const q = -1 === ["none", !1].indexOf(d.trimWhitespaces), g = "aggressive" === d.trimWhitespaces, m = !!d.removeNewlineBetweenFullWidthChars, p = !0 === d.keepCDATASections, u = !0 === d.keepComments, B = !0 === d.keepEmptyConditionalComment, y = d.instructionAttrPrefix || ":";
  d = d.argumentBrackets || "()";
  const t = d.substr(0, d.length / 2), r = d.substr(d.length / 2);
  let E = !1;
  e(a, n, !1, !1);
  Ia(n[0]);
  return n[0];
}
function eb(a, b, c) {
  b = new fb(b, c);
  ea(a, b);
  return b.da;
}
function fb(a, b) {
  this.ca = a;
  this.$ = this.da = new Va(!1, 0, 11);
  this.ba = b;
}
function L(a, b) {
  if (a.ba) {
    a.ba(b);
  } else {
    throw "Handler.prototype.onParseError: error!" + b;
  }
}
function ja(a, b) {
  var c = a.da;
  if (c.ba) {
    throw "restricted mode \u3067\u306f setNodeType() \u306f\u975e\u5bfe\u5fdc\u3067\u3059!";
  }
  if (11 !== c.$) {
    throw "nodeType \u306e\u5909\u66f4\u306f DOCUMENT_FRAGMENT_NODE -> DOCUMENT_NODE \u3060\u3051\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u307e\u3059!";
  }
  9 !== c.$ && (V = !0);
  c.$ = 9;
  Za(a.da, b);
}
function ia(a, b, c, d) {
  if (d) {
    a = a.$;
    if (a.ba && (!$a(a) || !bb(a))) {
      throw "restricted mode \u3067\u306f\u73fe\u5728\u306e\u30ce\u30fc\u30c9\u4ee5\u5916\u3078\u306e insertElementLast() \u306f\u975e\u5bfe\u5fdc\u3067\u3059!";
    }
    if (a.ba) {
      a.ea = a.ea || [], a.ea.push([1, b, c, void 0]);
    } else {
      d = X(a);
      if (a.ba) {
        throw "restricted mode \u3067\u306f insertElementAt() \u306f\u975e\u5bfe\u5fdc\u3067\u3059!";
      }
      new Va(a, d, 1, b, c);
    }
    V = !0;
  } else {
    a.$ = Ua(a.$, 17, b, c);
  }
}
function ha(a, b, c, d) {
  if (d) {
    a.ca && Ua(a.$, 18, b);
  } else if (!c || !a.ca) {
    if (b === ab(a.$)) {
      b = a.$;
      if (b.ba) {
        throw "restricted mode \u3067\u306f finalize() \u306f\u975e\u5bfe\u5fdc\u3067\u3059!";
      }
      if (17 !== b.$) {
        throw "finalize() \u3092\u30b5\u30dd\u30fc\u30c8\u3057\u306a\u3044 nodeType \u3067\u3059!";
      }
      1 !== b.$ && (V = !0);
      b.$ = 1;
      b = a.$;
      if (Xa(b)) {
        throw "getParent() \u3092\u30b5\u30dd\u30fc\u30c8\u3057\u306a\u3044 nodeType \u3067\u3059!";
      }
      if (b.ba && !$a(b)) {
        throw "restricted mode \u3067\u306f\u73fe\u5728\u306e\u30ce\u30fc\u30c9\u4ee5\u5916\u3078\u306e getParent() \u306f\u975e\u5bfe\u5fdc\u3067\u3059!";
      }
      a.$ = b.fa;
    } else {
      if (a.ba) {
        a.ba("End tag error! " + b);
      } else {
        throw "Handler.prototype.onParseEndTag: End tag error! " + b;
      }
    }
  }
}
function fa(a, b) {
  Ua(a.$, 3, b);
}
function ma(a, b) {
  Ua(a.$, 8, b);
}
function la(a, b) {
  Ua(a.$, 4, b);
}
function ka(a, b) {
  Ua(a.$, 7, b);
}
;var gb = !1, hb = !1, ib = !1, jb = !1, kb = !1;
function lb(a) {
  a = a[0];
  if (!P(a)) {
    throw "Not html.json! " + JSON.stringify(a);
  }
  return a;
}
function mb(a) {
  a = lb(a)[0];
  return !P(a) && R(a) ? a : null;
}
function nb(a) {
  var b = a[0];
  return P(a) && !P(b) && R(b);
}
function ob(a) {
  return !P(a) && R(a) ? !!a.TEMPLETE : nb(a) ? a[0].TEMPLETE || !1 : !1;
}
function pb(a) {
  return !P(a) && R(a) ? !!a.MIXINS : nb(a) ? a[0].MIXINS || !1 : !1;
}
function qb(a) {
  return rb(a, function(b, c) {
    return ("SCRIPT" === b || "script" === b) && c && ("application/ld+json" === c.type || "application/json" === c.type || "nice-page-builder/object" === c.type) || !1;
  });
}
function sb(a, b) {
  return rb(a, function(c) {
    return "SLOT" === c || "slot" === c;
  }, b);
}
function rb(a, b, c) {
  function d(h) {
    let v = Ha(h), x = h.length;
    for (var l; v < x; ++v) {
      var n = h[v], k;
      if (k = P(n)) {
        a: {
          l = n;
          k = h;
          n = v;
          var q = l[0];
          const g = l[1];
          let m = q, p = 1;
          switch(q) {
            case 9:
            case 11:
            case 13:
            case 16:
              l = d(l);
              break a;
            case 1:
            case 17:
              m = g, p = 2;
            default:
              if (S(m)) {
                q = l[p];
                l = b(m, ya(q) ? q : null) ? [l, k, n] : d(l);
                break a;
              }
          }
          l = void 0;
        }
        k = l;
      }
      if (k) {
        return l;
      }
    }
  }
  let e = a[0], f;
  return !P(e) && R(e) ? (a.shift(), f = d(a), !c && (a.unshift(e), f && f[1] === a) ? [f[0], a, ++f[2]] : f) : d(a);
}
;gb = function(a, b, c, d) {
  a = db(a, b, c, d);
  if (b = qb(a)) {
    c = b[0], b[1].splice(b[2], 1), c && 3 === c.length && (b = JSON.parse(c[2]), !P(b) && R(b) && a.unshift(b));
  }
  return a;
};
function tb(a, b) {
  const c = this, d = require("plugin-error"), e = require("vinyl"), f = require("through2"), h = {}, v = c.$, x = c.ba;
  return f.obj(function(l, n, k) {
    var q = ub(l.path);
    if (l.isNull()) {
      return k();
    }
    if (l.isStream()) {
      return this.emit("error", new d("NicePageBuilder.gulp.html2json", "Streaming not supported")), k();
    }
    if (0 !== q.indexOf(c.pa)) {
      return this.emit("error", new d("NicePageBuilder.gulp.html2json", '"' + q + '" is outside of srcRootPath:"' + c.pa + '"')), k();
    }
    const g = l.contents.toString(n);
    n = parseInt(l.stat.birthtimeMs, 10);
    const m = parseInt(l.stat.ctimeMs, 10);
    var p = c.path;
    if (!p.$) {
      throw "absoluteDirectoryPathOfRoot is empty!";
    }
    if (!p.$) {
      throw "absoluteDirectoryPathOfRoot is empty!";
    }
    if (0 !== q.indexOf(p.$)) {
      throw q + " is not a absolute path!";
    }
    q = ub(q).substr(p.$.length - 1);
    q = vb(q);
    switch(l.extname) {
      case ".html":
      case ".htm":
      case ".xhtml":
      case ".php":
        l = gb.call(c, g, !1, a, b);
        h[q] = [l, n, m];
        break;
      case ".json":
        l = JSON.parse(g);
        !P(l) && R(l) && (x[q] = [l, n, m]);
        break;
      default:
        this.push(l);
    }
    k();
  }, function(l) {
    function n(t, r) {
      var E = c.path.Oa(t, r);
      t = c.path.sa(t, r);
      return E.length < t.length ? E : t;
    }
    function k(t, r, E) {
      if (r = r.MIXINS) {
        for (let w = 0, z = r.length; w < z; ++w) {
          const F = c.path.sa(t, r[w]), C = x[F];
          r[w] = n(t, F);
          if (C) {
            const D = C[0];
            E || q(F, D);
            3 === C.length && (C.push(!0), k(F, D, E));
          } else {
            throw '[html2json] Mixin:"' + F + '" required by "' + t + '" does not exist!';
          }
        }
      }
    }
    function q(t, r) {
      for (var E = r.TEMPLETE; E;) {
        E = c.path.sa(t, E);
        const w = h[E];
        if (w) {
          if (r.TEMPLETE = n(t, E), t = E, delete h[E], v[E] = w, r = mb(w)) {
            k(t, r, !!r.TEMPLETE), E = r.TEMPLETE;
          } else {
            break;
          }
        } else if (v[E]) {
          r.TEMPLETE = n(t, E);
          break;
        } else {
          throw '[html2json] Templete:"' + E + '" required by "' + t + '" does not exist!';
        }
      }
    }
    function g(t, r) {
      t = new e({path:t, contents:Buffer.from(JSON.stringify(r))});
      t.extname = ".json";
      y.push(t);
    }
    for (var m in h) {
      var p = h[m];
      let t = mb(p);
      t && (k(m, t, !!t.TEMPLETE), q(m, t), h[m] && p.push(!0));
    }
    for (var u in x) {
      m = x[u], 3 === m.length ? (console.log("Unused mixin found! " + u), delete x[u]) : m.pop();
    }
    for (var B in h) {
      u = h[B], m = lb(u), 3 === u.length && sb(m, !1) && (console.log("Unused templete found! " + B), delete h[B]);
    }
    const y = this;
    for (const t in h) {
      B = h[t], u = Y(t), delete h[t], m = B[0], p = m[0], p = !P(p) && R(p) ? p : {}, p.URL = t, p.CREATED_AT = B[1], p.MODIFIED_AT = B[2], p !== m[0] && m.unshift(p), g(u + ".json", m), c.ma && (c.ea[t] = m), c.da[t] = p;
    }
    l();
  });
}
;hb = function(a) {
  if (!nb(a)) {
    return a;
  }
  const b = a[0], c = [];
  var d = wb(this, b);
  this.ca[d.URL] = xb(null, this, d, c);
  for (var e = a; c.length;) {
    a = c.shift();
    d = this.$[a];
    if (!d) {
      throw "[builder] Templete: " + a + " required by " + Y(b.URL) + " not found!";
    }
    a = void 0;
    d = lb(d);
    d = JSON.parse(JSON.stringify(d));
    var f = sb(d, !0);
    if (f) {
      const h = f[1];
      f = f[2];
      !P(e[0]) && R(e[0]) && (a = e.shift());
      let v = Ha(e), x = e.length;
      h.splice(f, 1);
      for (f -= v; v < x; ++v) {
        h.splice(f + v, 0, e[v]);
      }
      a && d.unshift(a);
    }
    e = d;
  }
  yb(this, b);
  delete b.TEMPLETE;
  delete b.MIXINS;
  return e;
};
function zb() {
  const a = this, b = require("plugin-error"), c = require("vinyl"), d = [];
  return require("through2").obj(function(e, f, h) {
    if (e.isNull()) {
      return h();
    }
    if (e.isStream()) {
      return this.emit("error", new b("NicePageBuilder.gulp.builder", "Streaming not supported")), h();
    }
    if (".json" !== e.extname) {
      return h(null, e);
    }
    const v = e.stem.split(".").pop();
    f = JSON.parse(e.contents.toString(f));
    switch(v) {
      case "html":
      case "htm":
      case "xhtml":
      case "php":
        if (nb(f)) {
          return d.push(e.path, f), h();
        }
        break;
      case a.ga:
        if (!P(f) && R(f)) {
          for (const x in f) {
            a.$[x] || (a.$[x] = f[x]);
          }
        }
        break;
      case a.fa:
        if (!P(f) && R(f)) {
          for (const x in f) {
            a.ba[x] || (a.ba[x] = f[x]);
          }
        }
    }
    h(null, e);
  }, function(e) {
    for (Ab(a, d); d.length;) {
      const f = d.shift(), h = hb.call(a, d.shift());
      this.push(new c({base:"/", path:f, contents:Buffer.from(JSON.stringify(h))}));
    }
    e();
  });
}
;function Bb(a, b, c, d, e) {
  function f(t, r, E, w, z) {
    var F = t[0], C = t[1], D = 1, A = F, M;
    switch(F) {
      case 9:
      case 11:
        h(t, w, z);
        break;
      case 3:
        C = Ma("" + C, w, z, l, n, k);
        if ("" !== C) {
          r[E] = C;
        } else {
          return r.splice(E, 1), -1;
        }
        break;
      case 4:
        if (!q && r) {
          return r.splice(E, 1), -1;
        }
        break;
      case 8:
        if (!g && r) {
          return r.splice(E, 1), -1;
        }
        break;
      case 13:
        h(t, w, z);
        if (!m && r && 2 === t.length) {
          return r.splice(E, 1), -1;
        }
        break;
      case 15:
        t = r[E - 1];
        if (!m && t && 14 === t[0] && t) {
          return r.splice(E - 1, 2), -2;
        }
        break;
      case 16:
        h(t, w, z);
        if (!m && r && 2 === t.length) {
          return r.splice(E, 1), -1;
        }
        break;
      case 7:
        if (v) {
          if (t = za(v, t, r, E, x), void 0 !== t) {
            if (null === t || "" === t) {
              return r ? r.splice(E, 1) : (a.length = 0, a.push(8, "")), -1;
            }
            if (!T(t) && P(t)) {
              return -1;
            }
          } else {
            y = !1;
          }
        } else {
          x("onInstruction is void!");
        }
        break;
      case 1:
      case 17:
        A = C, D = 2;
      default:
        if (S(A)) {
          if (1 + D <= t.length) {
            r = t[D];
            if (ya(r)) {
              E = D - 1;
              z = 0;
              var Q;
              F = Pa(t[E]);
              C = F[1];
              var O = F[2];
              F = F[0];
              for (N in r) {
                var K = N;
                var J = r[N];
                if (Q = 0 === N.indexOf(p)) {
                  var N = N.substr(p.length);
                  "className" === N && (N = "class");
                  v ? J = Aa(!1, v, N, J, x) : x("onInstruction is void!");
                  if (void 0 !== J) {
                    if (delete r[K], P(J)) {
                      S(J[0]) ? (r[K] = J, y = !1, ++z) : x("Invalid dynamic attribute callback value! [" + K + "=" + J + "]");
                    } else if ((!ba[N] || !1 !== J) && null !== J) {
                      if (S(J)) {
                        if ("id" === N) {
                          C = J;
                          continue;
                        } else if ("class" === N) {
                          K = J.split(" ");
                          for (J = K.length; J;) {
                            Q = K[--J], -1 === (" " + O + " ").indexOf(" " + Q + " ") && (O = (O ? " " : "") + Q);
                          }
                          continue;
                        }
                      }
                      r[N] = J;
                      ++z;
                    }
                  } else {
                    y = !1, ++z;
                  }
                } else {
                  ++z;
                }
              }
              t[E] = Qa(F, C, O);
              0 === z && t.splice(D, 1);
            }
            u || (M = u = u || aa[A] ? !0 : 0 < A.indexOf(":"));
            D = !!sa[A];
            h(t, D || w, !!ra[A]);
            M && (u = !1);
          }
        } else {
          x("Not html.json! [" + t + "]");
        }
    }
    return 0;
  }
  function h(t, r, E) {
    for (var w = Ha(t), z; w < t.length; ++w) {
      if (z = t[w], !T(z)) {
        if (P(z)) {
          if (z = f(z, t, w, r, E)) {
            w += z, B = !0;
          }
        } else {
          x("Invalid html.json! [" + z + "]");
        }
      }
    }
  }
  var v = b || null;
  b = "function" === typeof c ? c : null;
  var x = "function" === typeof d ? d : function() {
  };
  d = e || {};
  var l = -1 !== ["normal", !0, "aggressive"].indexOf(d.trimWhitespaces), n = "aggressive" === d.trimWhitespaces, k = !!d.removeNewlineBetweenFullWidthChars, q = !1 !== d.keepCDATASections, g = !1 !== d.keepComments, m = !0 === d.keepEmptyConditionalComment, p = d.instructionAttrPrefix || ":", u = !1, B = !1, y = !0;
  if (P(a)) {
    return f(a, null, 0, !1, !1), B && Ia(a), b && Cb(b, a) && (y = Sa(a, p)), y;
  }
  x("Invalid html.json document!");
}
function Cb(a, b) {
  var c = Ca(b, !1);
  V = !1;
  a(c);
  if (a = V) {
    V = !1, b.length = 0, b.push.apply(b, Ya(c)), Ia(b);
  }
  return a;
}
;function Db(a, b) {
  this.path = a.path;
  this.$ = b;
  this.ba = function(c) {
    c = this.sa(c.split("#")[0]);
    let d = a.da[c] || null;
    d && !a.ca[c] && (a.ca[d.URL] = xb(null, a, d, []));
    return d;
  };
}
Db.prototype.Oa = function(a) {
  return this.path.Oa(this.$, a);
};
Db.prototype.sa = function(a) {
  return this.path.sa(this.$, a);
};
function Eb(a, b, c, d) {
  if (c) {
    a = new Db(a, b.URL);
    var e;
    if ("function" === typeof c) {
      return Fb(d, a, c);
    }
    b = {};
    for (e in c) {
      b[e] = Fb(d, a, c[e]);
    }
    return b;
  }
}
function Gb(a, b, c, d) {
  if (c) {
    a = new Db(a, b.URL);
    var e;
    if ("function" === typeof c) {
      return Fb(d, a, c);
    }
    var f = [];
    b = 0;
    for (e = c.length; b < e; b += 2) {
      f[b] = c[b], f[b + 1] = Fb(d, a, c[b + 1]);
    }
    return f;
  }
}
function Hb(a, b, c) {
  if (c) {
    return c.bind(new Db(a, b.URL));
  }
}
function Fb(a, b, c) {
  return a ? function() {
    var d = this || {};
    d.pause && d.resume && (b.pause = function() {
      d.pause();
      b.paused = d.paused;
    }, b.resume = function() {
      d.resume();
      b.paused = d.paused;
    });
    var e = c.apply(b, arguments);
    d.pause && d.resume && (b.pause = null);
    return e;
  } : c.bind(b);
}
;ib = function(a, b, c, d, e, f) {
  if (nb(a)) {
    var h = a.shift();
    var v = e, x = h.URL;
    wb(this, h);
    x = h = this.da[x];
    this.ca[x.URL] = xb(null, this, x, [], v);
    b = Eb(this, h, b, !1);
    Gb(this, h, c, !1);
    d = d ? d.bind(new Db(this, h.URL)) : void 0;
    e = Hb(this, h, e);
  }
  b = Bb(a, b, d, e, f);
  h && a.unshift(yb(this, h));
  return b;
};
function Ib(a, b, c, d, e) {
  const f = this, h = require("plugin-error"), v = require("vinyl"), x = require("through2"), l = e && e.processTemplets, n = [];
  return x.obj(function(k, q, g) {
    if (k.isNull()) {
      return g();
    }
    if (k.isStream()) {
      return this.emit("error", new h("NicePageBuilder.gulp.json2json", "Streaming not supported")), g();
    }
    if (".json" !== k.extname) {
      return this.push(k), g();
    }
    const m = k.stem.split(".").pop();
    q = JSON.parse(k.contents.toString(q));
    switch(m) {
      case "html":
      case "htm":
      case "xhtml":
      case "php":
        if (P(q)) {
          return n.push(k.path, q), g();
        }
        break;
      case f.ga:
        if (!P(q) && R(q)) {
          for (const p in q) {
            f.$[p] || (f.$[p] = q[p]);
          }
        }
        break;
      case f.fa:
        if (!P(q) && R(q)) {
          for (const p in q) {
            f.ba[p] || (f.ba[p] = q[p]);
          }
        }
    }
    g(null, k);
  }, function(k) {
    for (Ab(f, n); n.length;) {
      var q = n.shift();
      const g = n.shift();
      ib.call(f, g, a, b, c, d, e);
      this.push(new v({base:"/", path:q, contents:Buffer.from(JSON.stringify(g))}));
    }
    if (l) {
      for (const g in f.$) {
        q = lb(f.$[g]), ib.call(f, q, a, b, c, d, e);
      }
    }
    k();
  });
}
;function Jb(a, b, c, d, e) {
  function f(u, B, y, t, r, E) {
    function w() {
      var O = "";
      m && (O = "</" + (p ? m : m.toLowerCase()) + ">", m = "");
      return O;
    }
    var z = l ? Ba(u, y, l) : null;
    y = "";
    var F = u[0], C = u[1], D = 1, A = F, M;
    switch(F) {
      case 9:
        y = C + h(u, z, !1, E);
        break;
      case 11:
        y = h(u, z, r, E);
        break;
      case 3:
        y = w() + (E ? C : U("" + C));
        break;
      case 4:
        S(C) || n("CDATA_SECTION Error! [" + u + "]");
        y = "<![CDATA[" + U("" + C) + "]]\x3e";
        break;
      case 8:
        S(C) || n("COMMENT_NODE Error! [" + u + "]");
        y = "\x3c!--" + U("" + C) + "--\x3e";
        break;
      case 13:
        S(C) || n("COND_CMT_HIDE_LOWER Error! [" + u + "]");
        y = w() + "\x3c!--[" + C + "]>" + h(u, z, !0, E) + "<![endif]--\x3e";
        break;
      case 16:
        S(C) || n("NETSCAPE4_COND_CMT_HIDE_LOWER Error! [" + u + "]");
        y = w() + "\x3c!--{" + C + "};" + h(u, z, !0, E) + "--\x3e";
        break;
      case 14:
        S(C) || n("COND_CMT_SHOW_LOWER_START Error! [" + u + "]");
        y = "\x3c!--[" + C + "]>\x3c!--\x3e";
        break;
      case 15:
        y = "\x3c!--<![endif]--\x3e";
        break;
      case 7:
        if (x) {
          if (r = za(x, u, B, t, n), void 0 !== r && null !== r && "" !== r) {
            if (T(r) || P(r)) {
              return -1;
            }
            n("PROCESSING_INSTRUCTION Error! [" + JSON.stringify(u) + "] result:" + JSON.stringify(r));
          }
        } else {
          n("onInstruction is void!");
        }
        break;
      case 18:
        S(C) || n("ELEMENT_END_TAG Error! [" + u + "]");
        y = "</" + C + ">";
        break;
      case 17:
        var Q = !0;
      case 1:
        A = u[1], D = 2;
      default:
        S(A) || n("Not html.json! [" + u + "]"), A = Pa(A), B = A[1], t = A[2], A = A[0], D = u[D], "P" !== m || pa[A] ? m = "" : y = w(), p || (M = p = p || aa[A] ? !0 : 0 < A.indexOf(":")), y += "<" + (p ? A : A.toLowerCase()), B && (y += " id=" + Fa(B, q, p || k)), t && (y += " class=" + Fa(t, q, p || k)), ya(D) && (y += v(D)), y = (u = h(u, z, oa[A], E || qa[A])) ? y + (">" + u) : Q ? y + ">" : y + (p ? " />" : ">"), Q && (m = ""), !u && ca[A] ? m = "" : p && !u || na[A] && (!r || "P" !== A) ? 
        m = A : (y += "</" + (p ? A : A.toLowerCase()) + ">", m = ""), M && (p = !1);
    }
    return y;
  }
  function h(u, B, y, t) {
    for (var r = [], E = Ha(u), w = -1, z; E < u.length; ++E) {
      z = u[E], T(z) ? r[++w] = f([3, z], u, B, E, !1, t) : P(z) ? (z = f(z, u, B, E, y, t), -1 === z ? --E : r[++w] = z) : n("Invalid html.json! [" + z + "]");
    }
    return r.join("");
  }
  function v(u) {
    var B = "", y, t;
    for (y in u) {
      var r = u[y];
      (t = 0 === y.indexOf(g)) && (y = y.substr(g.length));
      "className" === y && (y = "class");
      t && (x ? r = Aa(!0, x, y, r, n) : n("onInstruction is void!"));
      if (!(null == r || ba[y] && !1 === r || (B += " " + y, ba[y] || !0 === r))) {
        if ("style" === y && R(r) && (r = Ra(r), !r)) {
          continue;
        }
        B += "=" + Fa(r, q, p || k);
      }
    }
    return B;
  }
  var x = b || null, l = c || null, n = "function" === typeof d ? d : function() {
  };
  b = e || {};
  var k = !0 === b.quotAlways, q = !0 === b.useSingleQuot, g = b.instructionAttrPrefix || ":", m, p = va;
  if (P(a)) {
    return 7 === xa(a) && (a = [11, a]), f(a, null, null, 0, ta || !1, ua || !1);
  }
  n("Invalid html.json document!");
}
;jb = function(a, b, c, d, e) {
  if (nb(a)) {
    const f = a.shift();
    if (ob(f) || pb(f)) {
      throw Y(f.URL) + " is not complete document! Use nicePageBuilder.builder() before json2html().";
    }
    b = Eb(this, f, b, !1);
    c = Gb(this, f, c, !1);
    d = Hb(this, f, d);
  }
  return Jb(a, b, c, d, e) || "";
};
function Kb(a, b, c, d) {
  const e = this, f = require("plugin-error"), h = require("vinyl"), v = [];
  return require("through2").obj(function(x, l, n) {
    if (x.isNull()) {
      return n();
    }
    if (x.isStream()) {
      return this.emit("error", new f("NicePageBuilder.gulp.json2html", "Streaming not supported")), n();
    }
    if (".json" !== x.extname) {
      return n(null, x);
    }
    const k = x.stem.split(".").pop();
    l = JSON.parse(x.contents.toString(l));
    switch(k) {
      case "html":
      case "htm":
      case "xhtml":
      case "php":
        if (P(l)) {
          return v.push(x.path, l), n();
        }
        break;
      case e.ga:
        if (!P(l) && R(l)) {
          for (const q in l) {
            e.$[q] || (e.$[q] = l[q]);
          }
        }
        break;
      case e.fa:
        if (!P(l) && R(l)) {
          for (const q in l) {
            e.ba[q] || (e.ba[q] = l[q]);
          }
        }
    }
    n(null, x);
  }, function(x) {
    for (Ab(e, v); v.length;) {
      var l = v.shift();
      const n = v.shift();
      l = l.split(".json");
      l.pop();
      this.push(new h({base:"/", path:l.join(".json"), contents:Buffer.from(jb.call(e, n, a, b, c, d))}));
    }
    x();
  });
}
;const Lb = Buffer.from ? Buffer.from : (...a) => new Buffer(...a), Mb = Buffer.alloc ? Buffer.alloc : (...a) => new Buffer(...a);
var Nb = {ib:1, rb:2, jb:3, sb:4, $a:5, ab:6, Cb:7, bb:8, kb:9, vb:10, ob:11, tb:17, ub:18, Db:33, Eb:34, Fb:35, cb:49, eb:50, fb:51, gb:52, lb:65, mb:66, nb:67, pb:81, qb:83, wb:97, xb:98, yb:99, zb:100, Ab:101, Bb:102, Gb:113, hb:114, OBJECT:129, Za:130};
function Ob() {
  this.ha = void 0;
  this.ia = [];
  this.$ = 17;
  this.ba = void 0;
  this.Da = Mb(65536);
  this.ea = 0;
  this.na = this.qa = this.ta = this.Aa = void 0;
  this.la = 113;
  this.ca = this.ya = 0;
  this.Ka = {2:Mb(2), 3:Mb(3), 4:Mb(4)};
}
function Pb(a) {
  for (var b = Object.keys(Nb), c = 0, d = b.length; c < d; c++) {
    var e = b[c];
    if (Nb[e] === a) {
      return e;
    }
  }
  return a && "0x" + a.toString(16);
}
function Z(a, b, c) {
  a.$ = 18;
  a.Ca(Error("Unexpected " + JSON.stringify(String.fromCharCode(b[c])) + " at position " + c + " in state " + Pb(a.$)));
}
function Qb(a, b) {
  65536 <= a.ea && (a.ba += a.Da.toString("utf8"), a.ea = 0);
  a.Da[a.ea++] = b;
}
function Rb(a, b, c, d) {
  var e = b.length;
  "number" === typeof c && (e = "number" === typeof d ? 0 > d ? b.length - c + d : d - c : b.length - c);
  0 > e && (e = 0);
  65536 < a.ea + e && (a.ba += a.Da.toString("utf8", 0, a.ea), a.ea = 0);
  b.copy(a.Da, a.ea, c, d);
  a.ea += e;
}
Ob.prototype.write = function(a) {
  "string" === typeof a && (a = Lb(a));
  for (var b, c = 0, d = a.length; c < d; c++) {
    switch(this.$) {
      case 17:
        b = a[c];
        switch(b) {
          case 123:
            this.ja(1, "{");
            break;
          case 125:
            this.ja(2, "}");
            break;
          case 91:
            this.ja(3, "[");
            break;
          case 93:
            this.ja(4, "]");
            break;
          case 58:
            this.ja(5, ":");
            break;
          case 44:
            this.ja(6, ",");
            break;
          case 116:
            this.$ = 33;
            break;
          case 102:
            this.$ = 49;
            break;
          case 110:
            this.$ = 65;
            break;
          case 34:
            this.ba = "";
            this.ea = 0;
            this.$ = 97;
            break;
          case 45:
            this.ba = "-";
            this.$ = 81;
            break;
          default:
            if (48 <= b && 64 > b) {
              this.ba = String.fromCharCode(b), this.$ = 83;
            } else if (32 !== b && 9 !== b && 10 !== b && 13 !== b) {
              return Z(this, a, c);
            }
        }break;
      case 97:
        b = a[c];
        if (0 < this.ya) {
          for (b = 0; b < this.ya; b++) {
            this.Ka[this.ca][this.ca - this.ya + b] = a[b];
          }
          Rb(this, this.Ka[this.ca]);
          this.ca = this.ya = 0;
          c = c + b - 1;
        } else if (0 === this.ya && 128 <= b) {
          if (193 >= b || 244 < b) {
            return this.Ca(Error("Invalid UTF-8 character at position " + c + " in state " + Pb(this.$)));
          }
          194 <= b && 223 >= b && (this.ca = 2);
          224 <= b && 239 >= b && (this.ca = 3);
          240 <= b && 244 >= b && (this.ca = 4);
          if (this.ca + c > a.length) {
            for (b = 0; b <= a.length - 1 - c; b++) {
              this.Ka[this.ca][b] = a[c + b];
            }
            this.ya = c + this.ca - a.length;
            c = a.length - 1;
          } else {
            Rb(this, a, c, c + this.ca), c = c + this.ca - 1;
          }
        } else if (34 === b) {
          this.$ = 17, this.ba += this.Da.toString("utf8", 0, this.ea), this.ea = 0, this.ja(10, this.ba), Buffer.byteLength(this.ba, "utf8"), this.ba = void 0;
        } else if (92 === b) {
          this.$ = 98;
        } else if (32 <= b) {
          Qb(this, b);
        } else {
          return Z(this, a, c);
        }
        break;
      case 98:
        b = a[c];
        switch(b) {
          case 34:
            Qb(this, b);
            this.$ = 97;
            break;
          case 92:
            Qb(this, 92);
            this.$ = 97;
            break;
          case 47:
            Qb(this, 47);
            this.$ = 97;
            break;
          case 98:
            Qb(this, 8);
            this.$ = 97;
            break;
          case 102:
            Qb(this, 12);
            this.$ = 97;
            break;
          case 110:
            Qb(this, 10);
            this.$ = 97;
            break;
          case 114:
            Qb(this, 13);
            this.$ = 97;
            break;
          case 116:
            Qb(this, 9);
            this.$ = 97;
            break;
          case 117:
            this.Aa = "";
            this.$ = 99;
            break;
          default:
            return Z(this, a, c);
        }break;
      case 99:
      case 100:
      case 101:
      case 102:
        b = a[c];
        if (48 <= b && 64 > b || 64 < b && 70 >= b || 96 < b && 102 >= b) {
          this.Aa += String.fromCharCode(b), 102 === this.$++ && (b = parseInt(this.Aa, 16), this.Aa = void 0, void 0 !== this.ta && 56320 <= b && 57344 > b ? (Rb(this, Lb(String.fromCharCode(this.ta, b))), this.ta = void 0) : void 0 === this.ta && 55296 <= b && 56320 > b ? this.ta = b : (void 0 !== this.ta && (Rb(this, Lb(String.fromCharCode(this.ta))), this.ta = void 0), Rb(this, Lb(String.fromCharCode(b)))), this.$ = 97);
        } else {
          return Z(this, a, c);
        }
        break;
      case 81:
      case 83:
        b = a[c];
        switch(b) {
          case 48:
          case 49:
          case 50:
          case 51:
          case 52:
          case 53:
          case 54:
          case 55:
          case 56:
          case 57:
          case 46:
          case 101:
          case 69:
          case 43:
          case 45:
            this.ba += String.fromCharCode(b);
            this.$ = 83;
            break;
          default:
            this.$ = 17;
            b = Number(this.ba);
            if (isNaN(b)) {
              return Z(this, a, c);
            }
            this.ba.match(/[0-9]+/) == this.ba && b.toString() != this.ba ? this.ja(10, this.ba) : this.ja(11, b);
            this.ba = void 0;
            c--;
        }break;
      case 33:
        if (114 === a[c]) {
          this.$ = 34;
        } else {
          return Z(this, a, c);
        }
        break;
      case 34:
        if (117 === a[c]) {
          this.$ = 35;
        } else {
          return Z(this, a, c);
        }
        break;
      case 35:
        if (101 === a[c]) {
          this.$ = 17, this.ja(7, !0);
        } else {
          return Z(this, a, c);
        }
        break;
      case 49:
        if (97 === a[c]) {
          this.$ = 50;
        } else {
          return Z(this, a, c);
        }
        break;
      case 50:
        if (108 === a[c]) {
          this.$ = 51;
        } else {
          return Z(this, a, c);
        }
        break;
      case 51:
        if (115 === a[c]) {
          this.$ = 52;
        } else {
          return Z(this, a, c);
        }
        break;
      case 52:
        if (101 === a[c]) {
          this.$ = 17, this.ja(8, !1);
        } else {
          return Z(this, a, c);
        }
        break;
      case 65:
        if (117 === a[c]) {
          this.$ = 66;
        } else {
          return Z(this, a, c);
        }
        break;
      case 66:
        if (108 === a[c]) {
          this.$ = 67;
        } else {
          return Z(this, a, c);
        }
        break;
      case 67:
        if (108 === a[c]) {
          this.$ = 17, this.ja(9, null);
        } else {
          return Z(this, a, c);
        }
    }
  }
};
function Sb(a, b, c) {
  a.$ = 18;
  a.Ca(Error("Unexpected " + Pb(b) + (c ? "(" + JSON.stringify(c) + ")" : "") + " in state " + Pb(a.la)));
}
function Ub(a) {
  a.ia.push({ha:a.ha, qa:a.qa, na:a.na});
}
function Vb(a) {
  var b = a.ha, c = a.ia.pop();
  a.ha = c.ha;
  a.qa = c.qa;
  a.na = c.na;
  a.emit(b);
  a.na || (a.la = 113);
}
Ob.prototype.emit = function() {
  this.na && (this.la = 6);
};
Ob.prototype.ja = function(a, b) {
  switch(this.la) {
    case 113:
      switch(a) {
        case 10:
        case 11:
        case 7:
        case 8:
        case 9:
          this.ha && (this.ha[this.qa] = b);
          this.emit(b);
          break;
        case 1:
          Ub(this);
          this.ha = this.ha ? this.ha[this.qa] = {} : {};
          this.qa = void 0;
          this.la = 114;
          this.na = 129;
          break;
        case 3:
          Ub(this);
          this.ha = this.ha ? this.ha[this.qa] = [] : [];
          this.qa = 0;
          this.na = 130;
          this.la = 113;
          break;
        case 2:
          if (129 === this.na) {
            Vb(this);
          } else {
            return Sb(this, a, b);
          }
          break;
        case 4:
          if (130 === this.na) {
            Vb(this);
          } else {
            return Sb(this, a, b);
          }
          break;
        default:
          return Sb(this, a, b);
      }break;
    case 114:
      if (10 === a) {
        this.qa = b, this.la = 5;
      } else if (2 === a) {
        Vb(this);
      } else {
        return Sb(this, a, b);
      }
      break;
    case 5:
      if (5 === a) {
        this.la = 113;
      } else {
        return Sb(this, a, b);
      }
      break;
    case 6:
      if (6 === a) {
        130 === this.na ? (this.qa++, this.la = 113) : 129 === this.na && (this.la = 114);
      } else if (4 === a && 130 === this.na || 2 === a && 129 === this.na) {
        Vb(this);
      } else {
        return Sb(this, a, b);
      }
      break;
    default:
      return Sb(this, a, b);
  }
};
var Wb = require("node:stream");
function Xb(a) {
  for (var b = a.La; b.length && !a.paused;) {
    var c = b.shift();
    null === c ? a.emit("end") : a.emit("data", c);
  }
}
function Yb(a) {
  if (a.paused) {
    a.on("resume", () => Yb(a));
  } else {
    a.writable && (a.writable = !1, a.Xa.call(a), !a.readable && a.Ta && a.destroy());
  }
}
function Zb(a, b) {
  a.Sa || (null === b && (a.Sa = !0), a.La.push(b), Xb(a));
}
var bc = class extends Wb {
  constructor() {
    var a = $b, b = ac;
    super();
    this.Ya = a;
    this.Xa = b;
    this.Ua = this.paused = this.Sa = this.ended = !1;
    this.Ta = this.readable = this.writable = !0;
    this.La = [];
    this.on("end", () => {
      this.readable = !1;
      !this.writable && this.Ta && process.nextTick(() => this.destroy());
    });
  }
  write(a) {
    this.Ya.call(this, a);
    return !this.paused;
  }
  end(a) {
    this.ended || (this.ended = !0, arguments.length && this.write(a), Yb(this));
  }
  destroy() {
    this.Ua || (this.ended = this.Ua = !0, this.La.length = 0, this.writable = this.readable = !1, this.emit("close"));
  }
  pause() {
    this.paused || (this.paused = !0);
  }
  resume() {
    this.paused && (this.paused = !1, this.emit("resume"));
    Xb(this);
    this.paused || this.emit("drain");
  }
};
function cc(a, b, c, d) {
  const e = new Ob(), f = new bc();
  d = d || {};
  f.va = e;
  e.ka = f;
  e.oa = e.ja;
  e.ja = dc;
  e.Ca = ec;
  e.Ma = 0;
  e.Wa = [];
  e.da = [];
  e.ra = "function" === typeof c ? c : function() {
  };
  e.Ia = !!d.quotAlways;
  e.Ja = !!d.useSingleQuot;
  e.Pa = d.instructionAttrPrefix || ":";
  e.ga = a;
  e.Qa = b;
  f.on("resume", fc);
  e.Ba = "";
  return f;
}
function $b(a) {
  "string" === typeof a && (a = Lb(a));
  this.va.write(a);
}
function ac(a) {
  a && this.write(a);
  43 !== this.va.Ma && this.emit("error", "Invalid html.json");
  Zb(this, null);
  this.va = this.va.ka = null;
}
function fc() {
  for (var a = this.va, b = a.za; b.length && (dc.call(a, b.shift(), b.shift()), !this.paused);) {
  }
  b.length || (a.za = null);
}
function ec(a) {
  -1 < a.message.indexOf("at position") && (a.message = "Invalid JSON (" + a.message + ")");
  this.ra(a.message);
  this.ka.emit("error", a);
}
function dc(a, b) {
  function c() {
    g.za ? g.za.unshift(a, b) : g.za = [a, b];
  }
  function d() {
    if (g.ga) {
      let u;
      "function" === typeof g.ga ? u = g.da.length ? g.ga.call(g.ka, g.ma, g.da) : g.ga.call(g.ka, g.ma) : u = g.da.length ? g.ga[g.ma].apply(g.ka, g.da) : g.ga[g.ma].call(g.ka);
      if (g.ka.paused) {
        c();
        return;
      }
      g.ma = null;
      g.da.length = 0;
      return u;
    }
    g.Ca("onInstruction is void!");
    return "";
  }
  function e() {
    if (g.ga) {
      const u = Aa(!0, g.ga, g.wa, [g.ma].concat(g.da), g.ra, g.ka);
      if (g.ka.paused) {
        c();
        return;
      }
      g.ma = null;
      g.da.length = 0;
      return u;
    }
    g.Ca("onInstruction is void!");
    return "";
  }
  function f(u) {
    if (null != u) {
      if (ba[g.wa]) {
        if (!1 !== u) {
          return " " + g.wa;
        }
      } else {
        return !0 === u ? " " + g.wa : " " + g.wa + "=" + Fa(u, g.Ja, g.fa || g.Ia);
      }
    }
    return "";
  }
  function h(u) {
    const B = n.pop();
    k = n.length ? 42 : 43;
    switch(B) {
      case 13:
        p = "<![endif]--\x3e";
        break;
      case 4:
        p = "]]\x3e";
        break;
      case 16:
      case 8:
        p = "--\x3e";
        break;
      default:
        "" === B ? (p = u ? "" : ">", g.pa = "", v()) : S(B) && (p = u ? "" : g.Ra || g.fa ? " />" : ">", !u && ca[B] ? g.pa = "" : (g.Ra || g.fa) && !u || na[B] && (!g.ua || "P" !== B) ? g.pa = B : (p += "</" + (g.fa ? B : B.toLowerCase()) + ">", g.pa = ""), v());
    }
  }
  function v() {
    g.ua = g.xa = g.fa = !1;
    for (let u = 0, B = n.length; u < B; ++u) {
      const y = n[u];
      13 === y || 16 === y ? g.ua = !0 : S(y) && (u === B - 1 && (g.ua = g.ua || oa[y]), qa[y] && (g.xa = !0), aa[y] || 0 < y.indexOf(":")) && (g.fa = !0);
    }
  }
  function x() {
    return q ? (q = !1, ">") : "";
  }
  function l() {
    let u = "";
    g.pa && (u = "</" + (g.fa ? g.pa : g.pa.toLowerCase()) + ">", g.pa = "");
    return u;
  }
  if (this.ka.paused) {
    this.za.push(a, b);
  } else {
    if (5 === a || 6 === a) {
      this.ia.length && this.oa(a, b);
    } else {
      var n = this.Wa, k = this.Ma, q = !1, g = this;
      switch(k) {
        case 39:
          switch(a) {
            case 3:
            case 1:
              this.oa(a, b);
              return;
            case 4:
              if (0 === this.ia.length) {
                var m = d();
                if (this.ka.paused) {
                  return;
                }
                if (P(m)) {
                  ta = this.ua;
                  ua = this.xa;
                  va = this.Ra || this.fa;
                  var p = Jb(m, this.ga, this.Qa, this.ra, {quotAlways:this.Ia, useSingleQuot:this.Ja, instructionAttrPrefix:this.Pa});
                  ta = ua = va = !1;
                } else {
                  p = T(m) ? "" + m : "";
                }
                h(!!p);
                break;
              }
            case 2:
              1 === this.ia.length && (this.da.push(this.ha), this.ha = null);
              this.oa(a, b);
              return;
            case 10:
            case 11:
            case 7:
            case 8:
            case 9:
              this.ia.length ? this.oa(a, b) : this.da.push(b);
              return;
            default:
              k = -1;
          }break;
        case 36:
          switch(a) {
            case 3:
            case 1:
              this.oa(a, b);
              return;
            case 4:
              if (0 === this.ia.length) {
                p = e();
                if (this.ka.paused) {
                  return;
                }
                p = f(p);
                k = 31;
                break;
              }
            case 2:
              1 === this.ia.length && (this.da.push(this.ha), this.ha = null);
              this.oa(a, b);
              return;
            case 10:
              if (0 === this.ia.length && !this.ma) {
                this.ma = b;
                return;
              }
            case 11:
            case 7:
            case 8:
            case 9:
              this.ia.length ? this.oa(a, b) : this.da.push(b);
              return;
            default:
              k = -1;
          }break;
        default:
          switch(a) {
            case 3:
              switch(k) {
                case 30:
                case 41:
                  q = S(n[n.length - 1]);
                case 0:
                case 42:
                  m = 0;
                  break;
                case 40:
                  m = 36;
                  break;
                default:
                  m = -1;
              }break;
            case 4:
              m = 30 === k || 41 === k ? 38 : 42 === k || 37 === k ? 37 : -1;
              break;
            case 1:
              m = 30 === k ? 30 : 33 === k ? 33 : -1;
              break;
            case 2:
              m = 31 === k ? 39 : 34 === k ? 40 : -1;
              break;
            case 10:
              switch(k) {
                case 38:
                case 27:
                  m = 27;
                  break;
                case 28:
                  m = 28;
                  break;
                case 29:
                  m = 29;
                  break;
                case 19:
                  m = 19;
                  break;
                case 20:
                  m = 20;
                  break;
                case 21:
                  m = 21;
                  break;
                case 22:
                  m = 22;
                  break;
                case 23:
                  m = 23;
                  break;
                case 25:
                  m = 25;
                  break;
                case 24:
                  m = 24;
                  break;
                case 31:
                  m = 31;
                  break;
                case 32:
                  m = 32;
                  break;
                case 33:
                  m = 33;
                  break;
                case 34:
                  m = 34;
                  break;
                case 35:
                  m = 35;
                  break;
                case 30:
                case 41:
                  q = S(n[n.length - 1]);
                case 42:
                  m = 41;
                  break;
                case 26:
                  m = 26;
                  break;
                case 40:
                  m = 42;
                  break;
                default:
                  m = -1;
              }break;
            case 11:
              switch(k) {
                case 38:
                  m = b;
                  break;
                case 32:
                  m = 32;
                  break;
                case 35:
                  m = 35;
                  break;
                case 20:
                  m = 20;
                  break;
                case 30:
                case 41:
                  q = S(n[n.length - 1]);
                case 42:
                  m = 41;
                  break;
                case 21:
                  m = 21;
                  break;
                case 22:
                  m = 22;
                  break;
                default:
                  m = -1;
              }break;
            case 7:
            case 8:
            case 9:
              m = 32 === k ? 32 : -1;
              break;
            default:
              m = -1;
          }switch(m) {
            case 0:
              p = x();
              k = 38;
              break;
            case 9:
              k = 19;
              n.push(9);
              break;
            case 19:
              p = b;
              k = 41;
              break;
            case 11:
              k = 41;
              n.push(11);
              break;
            case 1:
              k = 27;
              break;
            case 17:
              k = 28;
              break;
            case 27:
            case 28:
              let u = Pa(b);
              const B = u[1], y = u[2];
              u = u[0];
              "P" !== this.pa || pa[u] ? this.pa = p = "" : p = l();
              28 === m ? n.push("") : n.push(u);
              v();
              p += "<" + (this.fa ? u : u.toLowerCase());
              B && (p += " id=" + Fa(B, this.Ja, this.fa || this.Ia));
              y && (p += " class=" + Fa(y, this.Ja, this.fa || this.Ia));
              this.ua || (this.ua = !!oa[u]);
              this.xa || (this.xa = !!qa[u]);
              k = 30;
              break;
            case 30:
              k = 31;
              break;
            case 31:
              0 === b.indexOf(this.Pa) ? (this.wa = b.substr(this.Pa.length), k = 40) : (this.wa = b, k = "style" === b ? 33 : 32);
              break;
            case 36:
              k = 36;
              break;
            case 42:
              if (this.ma = b, b = e(), this.ka.paused) {
                return;
              }
            case 32:
              p = f(b);
              k = 31;
              break;
            case 39:
              k = 41;
              break;
            case 33:
              k = 34;
              break;
            case 34:
              this.Va = b;
              k = 35;
              break;
            case 35:
              "" !== b && null !== b && (this.Ba += ";" + Ga(this.Va) + ":" + b);
              k = 34;
              break;
            case 40:
              this.Ba && (p = f(this.Ba.substr(1)), this.Ba = "");
              k = 31;
              break;
            case 37:
              h(!0);
              break;
            case 38:
              h(!1);
              break;
            case 18:
              k = 29;
              n.push(18);
              break;
            case 29:
              p = "</" + (this.fa ? b : b.toLowerCase()) + ">";
              k = 37;
              break;
            case 3:
              k = 20;
              n.push(3);
              break;
            case 20:
              p = l() + (g.xa ? "" + b : U("" + b));
              k = 37;
              break;
            case 41:
              p = x() + l() + (g.xa ? "" + b : U("" + b));
              k = 42;
              break;
            case 4:
              p = "<![CDATA[";
              k = 21;
              n.push(4);
              break;
            case 21:
              p = U("" + b);
              k = 37;
              break;
            case 8:
              p = "\x3c!--";
              k = 22;
              n.push(8);
              break;
            case 22:
              p = U("" + b);
              k = 37;
              break;
            case 13:
              p = l() + "\x3c!--[";
              k = 23;
              n.push(13);
              break;
            case 23:
              p = b + "]>";
              k = 41;
              break;
            case 16:
              p = l() + "\x3c!--{";
              k = 25;
              n.push(16);
              break;
            case 25:
              p = b + "};";
              k = 41;
              break;
            case 14:
              p = "\x3c!--[";
              k = 24;
              n.push(14);
              break;
            case 24:
              p = b + "]>\x3c!--\x3e";
              k = 37;
              break;
            case 15:
              p = "\x3c!--<![endif]--\x3e";
              k = 37;
              n.push(15);
              break;
            case 7:
              k = 26;
              n.push(7);
              break;
            case 26:
              this.ma = b;
              k = 39;
              break;
            default:
              k = -1;
          }
      }
      -1 === k ? (this.ra("Not html.json format!"), this.ka.emit("error", "Not html.json format!")) : (this.Ma = k, p && Zb(this.ka, p));
    }
  }
}
;kb = function(a, b, c, d) {
  a = cc(a, b, c, d);
  b = a.va;
  b.Na = b.ja;
  b.ja = gc;
  b.Ea = this;
  b.Fa = 0;
  return a;
};
function gc(a, b) {
  function c() {
    d.ja = d.Na;
    delete d.Na;
    delete d.Ea;
  }
  const d = this;
  switch(this.Fa) {
    case 0:
      3 === a ? (this.Fa = 1, this.Na(a, b)) : (this.ra("Not html.json format!"), this.ka.emit("error", "Not html.json format!"));
      break;
    case 1:
      1 === a ? (this.Fa = 2, this.oa(a, b)) : (c(), this.ja(a, b));
      break;
    case 2:
      if (2 === a && 1 === this.ia.length) {
        this.Fa = 3;
        const e = this.ha;
        this.ha = null;
        if (ob(e) || pb(e)) {
          throw Y(e.URL) + " is not complete document! Use nicePageBuilder.builder() before json2html().";
        }
        this.ga = Eb(this.Ea, e, this.ga, !0);
        this.Qa = Gb(this.Ea, e, this.Qa, !0);
        this.ra = Hb(this.Ea, e, this.ra);
      }
      this.oa(a, b);
      break;
    case 3:
      6 === a ? c() : (this.ra("Not html.json format!"), this.ka.emit("error", "Not html.json format!"));
  }
}
;function hc(a, b) {
  const c = this, d = require("vinyl");
  return require("through2").obj(function(e, f, h) {
    return h(null, e);
  }, function(e) {
    function f(l) {
      const n = {}, k = Object.keys(l).sort();
      for (; k.length;) {
        const q = k.shift();
        n[q] = l[q];
      }
      return n;
    }
    function h(l, n) {
      l = new d({path:l, contents:Buffer.from(JSON.stringify(n, null, b ? "    " : ""))});
      l.extname = ".json";
      v.push(l);
    }
    const v = this;
    a & 1 && h(c.la, f(c.ba));
    a & 2 && h(c.oa, f(c.$));
    if (a & 4) {
      var x = {};
      for (const l in c.da) {
        delete (x[l] = yb(c, c.da[l])).URL;
      }
      h(c.ra, f(x));
    }
    if (a & 8) {
      for (const l in c.ia) {
        this.push(new d({path:l, contents:Buffer.from(JSON.stringify(c.ia[l]))}));
      }
    }
    if (a & 16) {
      for (const l in c.ea) {
        x = c.ea[l], nb(x) && (x[0] = yb(c, x[0]), delete x[0].URL);
      }
      h(c.ma, f(c.ea));
    }
    e();
  });
}
;function ic(a, b) {
  this.ba = a + ("/" === a.charAt(a.length - 1) ? "" : "/");
  b && (b = ub(b), this.$ = b + ("/" === b.charAt(b.length - 1) ? "" : "/"));
}
function vb(a) {
  a = a.split("index.html");
  a[a.length - 1] || a.pop();
  return a.join("index.html");
}
function Y(a) {
  if (jc(a)) {
    throw a + " is not a root relative path or relative URL!";
  }
  a = a.split("#")[0].split("/");
  a[a.length - 1] || (a[a.length - 1] = "index.html");
  return a.join("/");
}
function ub(a) {
  return a.split("\\").join("/");
}
function jc(a) {
  return "//" === a.substr(0, 2) || "http://" === a.substr(0, 7) || "https://" === a.substr(0, 8);
}
function kc(a) {
  return "/" === a.charAt(0) && "//" !== a.substr(0, 2);
}
function lc(a, b) {
  if (!jc(b)) {
    throw b + " is not a absolute URL!";
  }
  if (kc(b)) {
    throw b + " is a root relative URL!";
  }
  var c = a.ba.length - 1;
  0 === b.indexOf(a.ba) ? b = b.substr(c) : "//" === a.ba.substr(0, 2) && (0 === b.indexOf("https:" + a.ba) && (b = b.substring(6, c)), 0 === b.indexOf("http:" + a.ba) && (b = b.substring(5, c)));
  return b;
}
function mc(a, b) {
  if (!kc(a)) {
    throw a + " is not a root relative URL!";
  }
  if (!kc(b)) {
    throw b + " is not a root relative URL!";
  }
  var c = b.indexOf("#"), d;
  -1 !== c && (d = b.substr(c));
  var e = Y(a), f = Y(b);
  b = [];
  a = 0;
  c = !1;
  var h;
  var v = e.split("/");
  var x = v.pop();
  if (e === f) {
    b = x;
  } else {
    e = f.split("/");
    f = e.pop();
    var l = v.length;
    for (h = Math.max(e.length, l); a < h; ++a) {
      if (c || e[a] !== v[a]) {
        a < l && b.unshift(".."), e[a] && b.push(e[a]), c = !0;
      }
    }
    (c || x !== f) && b.push(f);
    b = b.join("/");
  }
  b = vb(b);
  d && (b += d);
  return b ? b : "./";
}
ic.prototype.sa = function(a, b) {
  if (jc(b) || kc(b)) {
    var c = jc(b) ? lc(this, b) : b;
  } else {
    if (!kc(a)) {
      throw a + " is not a root relative URL!";
    }
    if (kc(b) || jc(b)) {
      throw b + " is not a relative URL!";
    }
    var d = b.indexOf("#");
    -1 !== d && (c = b.substr(d));
    a = Y(a);
    d = b = Y(b);
    var e = a.split("/");
    e.pop();
    "" === e[0] && e.shift();
    for ("./" === b.substr(0, 2) && (b = b.substr(2)); "../" === b.substr(0, 3);) {
      if (!e.length) {
        throw "Failed _relativePathToRootRelativePath! base:" + a + " target:" + d;
      }
      b = b.substr(3);
      --e.length;
    }
    a = (e.length ? "/" + e.join("/") : "") + "/" + b;
    a = vb(a);
    c && (a += c);
    c = a;
  }
  return c;
};
ic.prototype.Oa = function(a, b) {
  if (jc(b)) {
    var c = lc(this, b);
    return c === b ? b : mc(a, c);
  }
  return kc(b) ? mc(a, b) : b;
};
function nc(a) {
  a = a || {};
  var b = require("path").resolve(a.srcRootPath || "./") + "/";
  b = new ic(a.urlOrigin || "", b);
  this.pa = b.$;
  this.ma = a.allPagesPath || "";
  this.ra = a.metadataOfAllPagesPath || "metadata-of-all-pages.json";
  this.la = a.allMixinsPath || "all-mixins.json";
  this.oa = a.allTempletesPath || "all-templetes.json";
  this.fa = oc(this.la);
  this.ga = oc(this.oa);
  this.ba = a.mixins || {};
  this.$ = a.templetes || {};
  this.da = a.metadataOfAllPages || {};
  this.ca = {};
  this.ea = {};
  this.ia = {};
  this.path = b;
}
function Ab(a, b) {
  for (let c = 0, d = b.length; c < d; c += 2) {
    const e = b[c + 1];
    nb(e) && wb(a, e[0]);
  }
}
function wb(a, b) {
  const c = b.URL;
  a.da[c] || (a.da[c] = JSON.parse(JSON.stringify(b)));
  return a.da[c];
}
function yb(a, b) {
  const c = a.ca[b.URL];
  b = JSON.parse(JSON.stringify(b));
  c && xb(c, a, b, []);
  delete b.UPDATED_AT;
  return b;
}
function xb(a, b, c, d, e) {
  function f(n, k) {
    if (k = k.MIXINS) {
      for (let q = 0; q < k.length; ++q) {
        const g = b.path.sa(n, k[q]), m = b.ba[g];
        if (!m) {
          if (e) {
            e("Mixin not found!");
          } else {
            throw "[merge] Mixin: " + g + " required by " + Y(n) + " not found!";
          }
        }
        h(g, m[0], m[2], !1);
      }
    }
  }
  function h(n, k, q, g) {
    let m = 0;
    for (const p in k) {
      "MIXINS" !== p && ("TEMPLETE" === p ? l || (l = b.path.sa(n, k[p]), ++m) : v && -1 !== a.indexOf(p) ? pc(c[p], k[p]) && delete c[p] : v || void 0 !== c[p] || (c[p] = k[p], ++m, a.push(p)));
    }
    (m || g) && x < q && (x = q);
    f(n, k);
  }
  const v = !!a;
  let x = c.MODIFIED_AT, l;
  v || (a = []);
  c.TEMPLETE && (l = b.path.sa(c.URL, c.TEMPLETE));
  for (f(c.URL, c); l;) {
    d.push(l);
    const n = l, k = b.$[l];
    if (!k) {
      if (e) {
        e("Templete not found!");
      } else {
        throw "[merge] Templete: " + l + " required by " + Y(c.URL) + " not found!";
      }
    }
    const q = mb(k);
    l = "";
    q && (h(n, q, k[2], !0), f(n, q));
  }
  c.UPDATED_AT = x;
  return a;
}
function oc(a) {
  let b = ub(a).split(".json");
  if (b[b.length - 1]) {
    throw a + " is not .json file path!";
  }
  b.pop();
  b = b.join(".json").split("/");
  return b.pop().split(".").pop();
}
function pc(a, b) {
  function c(l) {
    var n = [], k = -1, q;
    for (q in l) {
      n[++k] = q;
    }
    return n.sort();
  }
  if (a === b) {
    return !0;
  }
  if (!R(a) || !R(b)) {
    return !1;
  }
  var d = P(a);
  if (d !== P(b)) {
    return !1;
  }
  if (d) {
    var e = a.length;
    if (e !== b.length) {
      return !1;
    }
    for (d = 0; d < e; ++d) {
      if (!pc(a[d], b[d])) {
        return !1;
      }
    }
  } else {
    e = c(a);
    var f = c(b);
    var h = e.length;
    if (h !== f.length) {
      return !1;
    }
    for (d = 0; d < h; ++d) {
      var v = e[d];
      var x = f[d];
      if (v !== x || !pc(a[v], b[v])) {
        return !1;
      }
    }
  }
  return !0;
}
;module.exports = function(a) {
  a = new nc(a);
  gb && (a.html2json = gb);
  hb && (a.builder = hb);
  ib && (a.json2json = ib);
  jb && (a.json2html = jb);
  kb && (a.json2html || (a.json2html = {}), a.json2html.stream = kb.bind(a));
  return a;
};
module.exports.DOCUMENT_NODE = 9;
module.exports.DOCUMENT_FRAGMENT_NODE = 11;
module.exports.ELEMENT_NODE = 1;
module.exports.TEXT_NODE = 3;
module.exports.CDATA_SECTION = 4;
module.exports.PROCESSING_INSTRUCTION = 7;
module.exports.COMMENT_NODE = 8;
module.exports.COND_CMT_HIDE_LOWER = 13;
module.exports.COND_CMT_SHOW_LOWER_START = 14;
module.exports.NETSCAPE4_COND_CMT_HIDE_LOWER = 16;
module.exports.ELEMENT_START_TAG = 17;
module.exports.ELEMENT_END_TAG = 18;
module.exports.gulp = function(a) {
  a = new nc(a);
  gb && (a.html2json = tb);
  hb && (a.builder = zb);
  ib && (a.json2json = Ib);
  jb && (a.json2html = Kb);
  kb && (a.json2html || (a.json2html = {}), a.json2html.stream = kb.bind(a));
  hc && (a.dest = hc);
  return a;
};
module.exports.onInstruction = module.exports.onInstruction || {};
var qc = new Date();
module.exports.onInstruction[1] = {title:function() {
  var a = this.ba(this.$);
  return a ? a.title : "";
}, date:function(a, b, c) {
  return qc.toLocaleString() + a + b.aa + c;
}};
module.exports.onInstruction = module.exports.onInstruction || {};
var rc = new Date(), sc = !0;
module.exports.onInstruction[2] = {title:function() {
  var a = this.ba(this.$);
  return a ? a.title : "";
}, date:function(a, b, c) {
  if (sc && this.pause) {
    this.pause(), setTimeout(() => {
      sc = !1;
      this.resume();
    }, 1000);
  } else {
    return rc.toLocaleString() + a + b.aa + c;
  }
}};

