var r = {a:2, b:2, c:2, d:2, e:2, f:2, g:2, h:2, i:2, j:2, k:2, l:2, m:2, n:2, o:2, p:2, q:2, r:2, s:2, t:2, u:2, v:2, w:2, x:2, y:2, z:2, A:1, B:1, C:1, D:1, E:1, F:1, G:1, H:1, I:1, J:1, K:1, L:1, M:1, N:1, O:1, P:1, Q:1, R:1, S:1, T:1, U:1, V:1, W:1, X:1, Y:1, Z:1, "\t":4, "\n":4, "\f":4, "\r":4, " ":4}, aa = {checked:!0, compact:!0, declare:!0, defer:!0, disabled:!0, ismap:!0, multiple:!0, nohref:!0, noresize:!0, noshade:!0, nowrap:!0, readonly:!0, selected:!0}, ba = {xml:!0, svg:!0, math:!0}, 
ca = {AREA:!0, BASE:!0, BASEFONT:!0, BR:!0, BGSOUND:!0, COL:!0, COMMAND:!0, FRAME:!0, HR:!0, IMG:!0, INPUT:!0, ISINDEX:!0, KEYGEN:!0, LINK:!0, META:!0, PARAM:!0, SOURCE:!0, TRACK:!0, EMBED:!0, WBR:!0, area:!0, base:!0, basefont:!0, br:!0, bgsound:!0, col:!0, command:!0, frame:!0, hr:!0, img:!0, input:!0, isindex:!0, keygen:!0, link:!0, meta:!0, param:!0, source:!0, track:!0, embed:!0, wbr:!0}, da = {SCRIPT:!0, STYLE:!0, TEXTAREA:!0, TITLE:!0, PLAINTEXT:!0, XMP:!0, script:!0, style:!0, textarea:!0, 
title:!0, plaintext:!0, xmp:!0}, H = {CAPTION:{ARTICLE:!0, SECTION:!0, NAV:!0, ASIDE:!0, H1:!0, H2:!0, H3:!0, H4:!0, H5:!0, H6:!0, HEADER:!0, FOOTER:!0, ADDRESS:!0, P:!0, HR:!0, PRE:!0, BLOCKQUOTE:!0, OL:!0, UL:!0, DL:!0, FIGURE:!0, DIV:!0, A:!0, EM:!0, STRONG:!0, SMALL:!0, S:!0, CITE:!0, Q:!0, DFN:!0, ABBR:!0, DATA:!0, TIME:!0, CODE:!0, VAR:!0, SAMP:!0, KBD:!0, SUB:!0, SUP:!0, I:!0, B:!0, U:!0, MARK:!0, RUBY:!0, BDI:!0, BDO:!0, SPAN:!0, BR:!0, WBR:!0, INS:!0, DEL:!0, PICTURE:!0, IMG:!0, IFRAME:!0, 
EMBED:!0, OBJECT:!0, VIDEO:!0, AUDIO:!0, MAP:!0, AREA:!0, math:!0, svg:!0, FORM:!0, LABEL:!0, INPUT:!0, BUTTON:!0, SELECT:!0, DATALIST:!0, TEXTAREA:!0, KEYGEN:!0, OUTPUT:!0, PROGRESS:!0, METER:!0, FIELDSET:!0, DETAILS:!0, DIALOG:!0, SCRIPT:!0, NOSCRIPT:!0, TEMPLATE:!0, CANVAS:!0}, DD:{ARTICLE:!0, SECTION:!0, NAV:!0, ASIDE:!0, H1:!0, H2:!0, H3:!0, H4:!0, H5:!0, H6:!0, HEADER:!0, FOOTER:!0, ADDRESS:!0, P:!0, HR:!0, PRE:!0, BLOCKQUOTE:!0, OL:!0, UL:!0, DL:!0, FIGURE:!0, DIV:!0, A:!0, EM:!0, STRONG:!0, 
SMALL:!0, S:!0, CITE:!0, Q:!0, DFN:!0, ABBR:!0, DATA:!0, TIME:!0, CODE:!0, VAR:!0, SAMP:!0, KBD:!0, SUB:!0, SUP:!0, I:!0, B:!0, U:!0, MARK:!0, RUBY:!0, BDI:!0, BDO:!0, SPAN:!0, BR:!0, WBR:!0, INS:!0, DEL:!0, PICTURE:!0, IMG:!0, IFRAME:!0, EMBED:!0, OBJECT:!0, VIDEO:!0, AUDIO:!0, MAP:!0, AREA:!0, math:!0, svg:!0, TABLE:!0, FORM:!0, LABEL:!0, INPUT:!0, BUTTON:!0, SELECT:!0, DATALIST:!0, TEXTAREA:!0, KEYGEN:!0, OUTPUT:!0, PROGRESS:!0, METER:!0, FIELDSET:!0, DETAILS:!0, DIALOG:!0, SCRIPT:!0, NOSCRIPT:!0, 
TEMPLATE:!0, CANVAS:!0}, DT:{ADDRESS:!0, P:!0, HR:!0, PRE:!0, BLOCKQUOTE:!0, OL:!0, UL:!0, DL:!0, FIGURE:!0, DIV:!0, A:!0, EM:!0, STRONG:!0, SMALL:!0, S:!0, CITE:!0, Q:!0, DFN:!0, ABBR:!0, DATA:!0, TIME:!0, CODE:!0, VAR:!0, SAMP:!0, KBD:!0, SUB:!0, SUP:!0, I:!0, B:!0, U:!0, MARK:!0, RUBY:!0, BDI:!0, BDO:!0, SPAN:!0, BR:!0, WBR:!0, INS:!0, DEL:!0, PICTURE:!0, IMG:!0, IFRAME:!0, EMBED:!0, OBJECT:!0, VIDEO:!0, AUDIO:!0, MAP:!0, AREA:!0, math:!0, svg:!0, TABLE:!0, FORM:!0, LABEL:!0, INPUT:!0, BUTTON:!0, 
SELECT:!0, DATALIST:!0, TEXTAREA:!0, KEYGEN:!0, OUTPUT:!0, PROGRESS:!0, METER:!0, FIELDSET:!0, DETAILS:!0, DIALOG:!0, SCRIPT:!0, NOSCRIPT:!0, TEMPLATE:!0, CANVAS:!0}, P:{A:!0, EM:!0, STRONG:!0, SMALL:!0, S:!0, CITE:!0, Q:!0, DFN:!0, ABBR:!0, DATA:!0, TIME:!0, CODE:!0, VAR:!0, SAMP:!0, KBD:!0, SUB:!0, SUP:!0, I:!0, B:!0, U:!0, MARK:!0, RUBY:!0, BDI:!0, BDO:!0, SPAN:!0, BR:!0, WBR:!0, INS:!0, DEL:!0, PICTURE:!0, IMG:!0, IFRAME:!0, EMBED:!0, OBJECT:!0, VIDEO:!0, AUDIO:!0, MAP:!0, AREA:!0, math:!0, svg:!0, 
LABEL:!0, INPUT:!0, BUTTON:!0, SELECT:!0, DATALIST:!0, TEXTAREA:!0, KEYGEN:!0, OUTPUT:!0, PROGRESS:!0, METER:!0, SCRIPT:!0, NOSCRIPT:!0, TEMPLATE:!0, CANVAS:!0}, HTML:{HEAD:!0, BODY:!0}, HEAD:{TITLE:!0, BASE:!0, BGSOUND:!0, LINK:!0, META:!0, STYLE:!0, SCRIPT:!0, NOSCRIPT:!0, TEMPLETE:!0}, COLGROUP:{COL:!0}, OPTGROUP:{OPTION:!0}, OPTION:{}, TBODY:{TR:!0}, TR:{TH:!0, TD:!0}, RBC:{RB:!0, RP:!0, RT:!0}};
H.LI = H.TD = H.DD;
H.TH = H.DT;
H.RB = H.RP = H.RT = H.P;
H.TFOOT = H.THEAD = H.TBODY;
H.RTC = H.RBC;
function ea(a, b) {
  var c = 0;
  function e() {
    c && (fa(b, g(a.substring(0, c))), a = a.substring(c), c = 0);
  }
  function g(E) {
    return E.split("&lt;").join("<").split("&gt;").join(">").split("&amp;").join("&");
  }
  function d(E, w, G) {
    for (var t = 0, x = G.length, z = 3, p, m; z < x && 2 !== t;) {
      m = G.charAt(z);
      switch(t) {
        case 0:
          r[m] & 4 ? t = 1 : ">" === m && (t = 2);
          t && (p = G.substring(2, z));
          break;
        case 1:
          ">" === m && (t = 2);
      }
      ++z;
    }
    return 2 === t ? (ca[p] || l(E, w, n ? p : p.toUpperCase(), !1), z) : 0;
  }
  function l(E, w, G, t) {
    var x = 0, z = E.length;
    if (G) {
      for (x = z; 0 <= x && E[--x] !== G;) {
      }
    }
    if (0 <= x) {
      for (; x < z;) {
        ha(w, E[--z], t && !H[E[z]], !1), n && ba[E[z]] && (n = !!w.fa);
      }
      E.length = x;
    } else {
      ha(w, G, !1, !0);
    }
  }
  function h(E, w, G, t) {
    function x(S, P) {
      y[S] = !0 === P ? !0 : aa[S.toLowerCase()] ? n ? g(P || S) : !0 : g(P || "");
      ++v;
    }
    function z() {
      (u = "/>" === t.substr(k, 2)) && ++k;
      return u;
    }
    for (var p = 1, m = t.length, k = 2, y = {}, v = 0, u = !1, A, F, I, M, O, K; k < m && 9 > p;) {
      A = t.charAt(k);
      switch(p) {
        case 1:
          if (r[A] & 4) {
            p = 2, F = t.substring(1, k);
          } else if (">" === A || z()) {
            p = 9, F = t.substring(1, k);
          }
          break;
        case 2:
          ">" === A || z() ? p = 9 : r[A] & 4 || (p = 3, I = k);
          break;
        case 3:
          if ("=" === A) {
            p = 5, M = t.substring(I, k);
          } else if (r[A] & 4) {
            p = 4, M = t.substring(I, k);
          } else if (">" === A || z()) {
            p = 9, x(t.substring(I, k), !0);
          }
          break;
        case 4:
          "=" === A ? p = 5 : ">" === A || z() ? (p = 9, x(M, !0)) : r[A] & 4 || (p = 3, x(M, !0), I = k);
          break;
        case 5:
          '"' === A || "'" === A ? (p = 6, O = A, I = k + 1) : r[A] & 4 || (p = 7, I = k);
          K = !1;
          break;
        case 6:
          K || A !== O || (p = 2, x(M, t.substring(I, k)));
          K = "\\" === A && !K;
          break;
        case 7:
          r[A] & 4 ? p = 2 : ">" === A && (p = 9), 7 !== p && x(M, t.substring(I, k));
      }
      ++k;
    }
    if (9 === p) {
      p = F.toUpperCase();
      n ||= !!ba[F];
      if (!n) {
        for (; w;) {
          if (H[w] && !H[w][p]) {
            l(E, G, w, !1), w = E[E.length - 1];
          } else {
            break;
          }
        }
      }
      (u = u || !!ca[p]) || (E[E.length] = n ? F : p);
      ia(G, n ? F : p, v ? y : null, u);
      return k;
    }
    return 0;
  }
  for (var f = [], n = !!b.fa, D = a.length - c, B, q; a;) {
    B = f[f.length - 1];
    if (da[B]) {
      if ("PLAINTEXT" === B || "plaintext" === B) {
        fa(b, g(a)), a = "";
      } else {
        if (q = a.indexOf("</" + (n ? B : B.toLowerCase())), -1 === q && (q = a.indexOf("</" + (n ? B.toUpperCase() : B))), 0 <= q) {
          if (c = q, e(), B = d(f, b, a)) {
            a = a.substring(B);
          } else {
            throw a;
          }
        } else {
          throw a;
        }
      }
    } else if (a.indexOf("<!DOCTYPE ") === c) {
      if (e(), q = a.indexOf(">"), -1 !== q) {
        ja(b, a.substring(10, q)), a = a.substring(q + 1);
      } else {
        throw a;
      }
    } else if (a.indexOf("<?") === c) {
      if (e(), q = a.indexOf("?>"), -1 !== q) {
        ka(b, g(a.substring(2, q))), a = a.substring(q + 2);
      } else {
        throw a;
      }
    } else if (a.indexOf("<![CDATA[") === c) {
      if (e(), q = a.indexOf("]]\x3e"), -1 !== q) {
        la(b, g(a.substring(9, q))), a = a.substring(q + 3);
      } else {
        throw a;
      }
    } else if (a.indexOf("\x3c!--") === c) {
      if (e(), q = a.indexOf("--\x3e"), -1 !== q) {
        ma(b, g(a.substring(4, q))), a = a.substring(q + 3);
      } else {
        throw a;
      }
    } else if (a.indexOf("</") === c && r[a.charAt(c + 2)] & 3) {
      if (e(), B = d(f, b, a)) {
        a = a.substring(B);
      } else {
        throw a;
      }
    } else if ("<" === a.charAt(c) && r[a.charAt(c + 1)] & 3) {
      if (e(), B = h(f, B, b, a)) {
        a = a.substring(B);
      } else {
        throw a;
      }
    } else {
      q = a.indexOf("<", c), -1 === q ? (fa(b, g(a)), a = "") : c < q ? c = q : ++c;
    }
    B = a.length - c;
    if (B === D) {
      throw a;
    }
    D = B;
  }
  e();
  l(f, b, "", !0);
}
;var na = {HTML:!0, HEAD:!0, BODY:!0, P:!0, DT:!0, DD:!0, LI:!0, OPTION:!0, TBODY:!0, THEAD:!0, TFOOT:!0, TD:!0, TH:!0, TR:!0, RB:!0, RBC:!0, RP:!0, RT:!0, RTC:!0, OPTGROUP:!0, CAPTION:!0, COLGROUP:!0}, oa = {A:!0, AUDIO:!0, DEL:!0, INS:!0, MAP:!0, NOSCRIPT:!0, VIDEO:!0}, pa = {H1:!0, H2:!0, H3:!0, H4:!0, H5:!0, H6:!0, ADDRESS:!0, BLOCKQUOTE:!0, DIV:!0, DL:!0, FIELDSET:!0, FORM:!0, HR:!0, LEGEND:!0, MENU:!0, NOSCRIPT:!0, OL:!0, P:!0, PRE:!0, UL:!0, CENTER:!0, DIR:!0, NOFRAMES:!0, MARQUEE:!0}, qa = 
{SCRIPT:!0, STYLE:!0, TEXTAREA:!0, TITLE:!0, PLAINTEXT:!0, XMP:!0, script:!0, style:!0, textarea:!0, title:!0, plaintext:!0, xmp:!0}, ra = {SCRIPT:!0, STYLE:!0, TEXTAREA:!0, script:!0, style:!0, textarea:!0}, sa = {PRE:!0, LISTING:!0, pre:!0, listing:!0};
function J(a) {
  return !(!a || a.pop !== [].pop);
}
function L(a) {
  return !(!a || "object" !== typeof a);
}
function N(a) {
  return "" + a === a;
}
function R(a) {
  return N(a) || a === +a;
}
function ta(a) {
  return a === "" + +a && a === a && a !== "" + 1 / 0 && a !== "" + -1 / 0 ? +a : a;
}
function ua(a) {
  if (R(a)) {
    a = 3;
  } else {
    if (J(a)) {
      if (N(a[0])) {
        a = 1;
      } else {
        var b = a[0];
        a = b === +b ? a[0] : -1;
      }
    } else {
      a = -1;
    }
  }
  return a;
}
function va(a) {
  return !J(a) && L(a);
}
function wa(a, b, c, e, g) {
  var d = b[1], l = b.slice(2), h;
  "function" === typeof a ? h = l.length ? a(d, l) : a(d) : h = l.length ? a[d](l) : a[d]();
  void 0 !== h && null !== h && "" !== h && (R(h) ? c ? c.splice(e, 1, h) : (b.length = 0, b.push(3, b)) : J(h) ? 11 === h[0] ? c ? (h.shift(), h.unshift(e, 1), c.splice.apply(c, h)) : (b.length = 0, b.push.apply(b, h)) : J(h[0]) ? c ? (h.unshift(e, 1), c.splice.apply(c, h)) : (b.length = 0, b.push(11), b.push.apply(b, h)) : c ? c.splice(e, 1, h) : (b.length = 0, b.push(11, h)) : g("PROCESSING_INSTRUCTION Error! [" + JSON.stringify(b) + "]"));
  return h;
}
function xa(a, b, c, e, g) {
  var d;
  if (J(e) && N(e[0])) {
    var l = e[0];
    e = e.slice(1);
    "function" === typeof b ? d = e.length ? b(l, e) : b(l) : d = e.length ? b[l](e) : b[l]();
  } else {
    N(e) ? "function" === typeof b ? d = b(e) : d = b[e]() : g("Invalid InstructionAttr value! [" + c + "=" + e + "]");
  }
  return a && J(d) ? xa(!0, b, c, d, g) : d;
}
function ya(a) {
  return a.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;");
}
function za(a, b, c) {
  a = ya("" + a);
  var e = a.match('"'), g = a.match("'"), d = b ? "'" : '"';
  if (e && g) {
    a = b ? d + a.split("'").join("\\'") + d : d + a.split('"').join('\\"') + d;
  } else if (e) {
    a = "'" + a + "'";
  } else if (g) {
    a = b ? d + a.split("'").join("\\'") + d : d + a + d;
  } else if (c || a.match(/[^0-9a-z\.\-]/g) || 72 < a.length) {
    a = d + a + d;
  }
  return a;
}
function T(a) {
  var b = a[0], c = b === +b ? 2 : 1;
  return 1 === ua(a) || 17 === b ? va(a[c]) ? c + 1 : c : 11 === b ? 1 : 9 === b || 13 === b || 16 === b ? 2 : Infinity;
}
function Aa(a) {
  var b = T(a), c = "", e;
  if (b < a.length) {
    for (e = b; e < a.length;) {
      b = a[e];
      var g = ua(b);
      3 === g ? (c = R(b) ? c + b : c + b[1], a.splice(e, 1)) : (c && (a.splice(e, 0, ta(c)), c = ""), ++e, 1 !== g && 17 !== g && 13 !== g && 16 !== g || Aa(b));
    }
    c && (a[e] = ta(c));
  }
}
function Ba(a, b, c, e, g, d) {
  if (!b && e) {
    if (c) {
      a = Ca(Da(a, "\n"), "\n");
    } else {
      a = a.split("\r\n").join("\n");
      d && (a = a.replace(/([\uFF01-\uFF60\u3040-\u309F\u30A0-\u30FF\u4E00-\u9FFF])\s([\uFF01-\uFF60\u3040-\u309F\u30A0-\u30FF\u4E00-\u9FFF])/g, "$1$2"));
      for (a = a.split("\t").join(" "); 0 <= a.indexOf("\n\n");) {
        a = a.split("\n\n").join("\n");
      }
      if (g) {
        var l = "\n" === a.charAt(0) && /\n[ ]*$/.test(a);
      }
      a = Ca(a, "\n");
      for (a = a.split("\n").join(" "); 0 <= a.indexOf("  ");) {
        a = a.split("  ").join(" ");
      }
      l && (a = Ca(Da(a, " "), " "));
      a = a.split("\\u0020").join(" ").split("&#x20;").join(" ").split("&#32;").join(" ");
    }
  }
  return ta(a);
}
function Da(a, b) {
  for (; a.charAt(0) === b;) {
    a = a.substr(1);
  }
  return a;
}
function Ca(a, b) {
  for (; a.charAt(a.length - 1) === b;) {
    a = a.substr(0, a.length - 1);
  }
  return a;
}
function Ea(a) {
  var b = a.indexOf("#"), c = a.indexOf("."), e = "", g = "";
  b < c ? (e = a.split(".")[1], a = a.split(".")[0], 0 < b && (g = a.split("#")[1], a = a.split("#")[0])) : c < b && (g = a.split("#")[1], a = a.split("#")[0], 0 < c && (e = a.split(".")[1], a = a.split(".")[0]));
  return [a, g, e];
}
function Fa(a, b, c) {
  b && (a += "#" + b);
  c && (a += "." + c);
  return a;
}
function Ga(a, b) {
  function c(g) {
    var d = g[0], l = g[1], h = d, f = 1;
    switch(d) {
      case 9:
      case 11:
      case 13:
      case 16:
        return e(g);
      case 7:
        return !0;
      case 1:
      case 17:
        h = l, f = 2;
      default:
        if (N(h)) {
          if (d = va(g[f])) {
            a: {
              f = g[f];
              for (var n in f) {
                if (0 === n.indexOf(b)) {
                  d = !0;
                  break a;
                }
              }
              d = !1;
            }
          }
          return d ? !0 : e(g);
        }
    }
    return !1;
  }
  function e(g) {
    for (var d = T(g), l = g.length, h; d < l; ++d) {
      if (h = g[d], J(h) && c(h)) {
        return !0;
      }
    }
    return !1;
  }
  return !c(a);
}
;function Ha(a) {
  return 1 === a.$ || 17 === a.$ || 13 === a.$ || 16 === a.$ || Ia(a);
}
function Ia(a) {
  return 9 === a.$ || 11 === a.$;
}
function Ja(a) {
  return a === Ka && !a.Ja;
}
function La(a, b, c, e, g) {
  if (a === !!a) {
    var d = null;
    this.ba = a;
  } else {
    d = a, this.ba = d.ba;
  }
  if (d) {
    switch(d.$) {
      case 3:
      case 8:
      case 4:
      case 7:
      case 15:
      case 18:
        throw "nodeType:" + d.$ + " \u306f\u89aa\u306b\u306a\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u305b\u3093!";
    }
    if (Ia(this)) {
      throw "nodeType:" + d.$ + " \u306f\u5b50\u306b\u306a\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u305b\u3093!";
    }
  }
  this.ja = d;
  this.$ = c;
  if (d) {
    if (d.ca || (d.ca = []), a = d.ca, 0 <= b && b < a.length) {
      if (1 <= b && 17 === a[b - 1].$) {
        throw "\u9589\u3058\u30bf\u30b0\u306e\u7121\u3044 Element \u306e\u6b21\u306b Node \u3092\u633f\u5165\u3059\u308b\u3053\u3068\u306f\u51fa\u6765\u307e\u305b\u3093!";
      }
      a.splice(b, 0, this);
    } else {
      if (a.length && 17 === a[a.length - 1].$) {
        throw "\u9589\u3058\u30bf\u30b0\u306e\u7121\u3044 Element \u306e\u6b21\u306b Node \u3092\u633f\u5165\u3059\u308b\u3053\u3068\u306f\u51fa\u6765\u307e\u305b\u3093!";
      }
      a.push(this);
    }
  }
  switch(c) {
    case 1:
    case 17:
      this.pa = g || null;
    case 18:
      this.qa = e;
      break;
    case 7:
      this.Ia = g || null;
    case 3:
    case 4:
    case 8:
    case 9:
    case 13:
    case 14:
    case 16:
      this.ma = e;
  }
}
var Ka = null, U = !1;
La.prototype.ha = function() {
  if (this.ba) {
    throw "restricted mode \u3067\u306f getHTMLJSON() \u306f\u975e\u5bfe\u5fdc\u3067\u3059!";
  }
  var a = [this.$], b = this.ca, c;
  switch(this.$) {
    case 1:
      a.length = 0;
    case 17:
      a.push(this.qa);
      va(this.pa) && a.push(this.pa);
      break;
    case 18:
      a[1] = this.qa;
      break;
    case 7:
      a[2] = this.Ia;
    case 3:
    case 4:
    case 8:
    case 9:
    case 13:
    case 14:
    case 16:
      a[1] = this.ma;
  }
  if (b) {
    var e = 0;
    for (c = b.length; e < c; ++e) {
      a.push(b[e].ha());
    }
  }
  return a;
};
function V(a) {
  switch(a.$) {
    case 3:
    case 4:
    case 7:
    case 8:
    case 9:
    case 13:
    case 14:
    case 16:
      return a.ma;
    default:
      throw "getNodeValue() \u3092\u30b5\u30dd\u30fc\u30c8\u3057\u306a\u3044 nodeType \u3067\u3059!";
  }
}
function Ma(a, b) {
  if (a.ba && !Ja(a)) {
    throw "restricted mode \u3067\u306f\u73fe\u5728\u306e\u30ce\u30fc\u30c9\u4ee5\u5916\u3078\u306e setNodeValue() \u306f\u975e\u5bfe\u5fdc\u3067\u3059!";
  }
  switch(a.$) {
    case 3:
    case 4:
    case 7:
    case 8:
    case 9:
      a.ma !== b && (U = !0);
      a.ma = b;
      break;
    default:
      throw "setNodeValue() \u3092\u30b5\u30dd\u30fc\u30c8\u3057\u306a\u3044 nodeType \u3067\u3059!";
  }
}
function Na(a) {
  if (1 !== a.$ && 17 !== a.$ && 18 !== a.$) {
    throw "getTagName() \u3092\u30b5\u30dd\u30fc\u30c8\u3057\u306a\u3044 nodeType \u3067\u3059!";
  }
  return a.qa;
}
function W(a) {
  if (!Ha(a)) {
    throw "getChildNodeLength() \u3092\u30b5\u30dd\u30fc\u30c8\u3057\u306a\u3044 nodeType \u3067\u3059!";
  }
  if (a.ba) {
    throw "restricted mode \u3067\u306f getChildNodeLength() \u306f\u975e\u5bfe\u5fdc\u3067\u3059!";
  }
  return a.ca && a.ca.length;
}
function X(a, b) {
  if (!Ha(a)) {
    throw "getChildNodeAt() \u3092\u30b5\u30dd\u30fc\u30c8\u3057\u306a\u3044 nodeType \u3067\u3059!";
  }
  if (a.ba) {
    throw "restricted mode \u3067\u306f getChildNodeAt() \u306f\u975e\u5bfe\u5fdc\u3067\u3059!";
  }
  return a.ca && a.ca[b] || null;
}
La.prototype.remove = function() {
  if (Ia(this)) {
    throw "remove() \u3092\u30b5\u30dd\u30fc\u30c8\u3057\u306a\u3044 nodeType \u3067\u3059!";
  }
  if (this.ba && !Ja(this)) {
    throw "restricted mode \u3067\u306f\u73fe\u5728\u306e\u30ce\u30fc\u30c9\u4ee5\u5916\u3078\u306e discard() \u306f\u975e\u5bfe\u5fdc\u3067\u3059!";
  }
  if (this.ba) {
    return this.Ja = U = !0, null;
  }
  if (Ia(this)) {
    throw "getMyIndex() \u3092\u30b5\u30dd\u30fc\u30c8\u3057\u306a\u3044 nodeType \u3067\u3059!";
  }
  if (this.ba) {
    throw "restricted mode \u3067\u306f getMyIndex() \u306f\u975e\u5bfe\u5fdc\u3067\u3059!";
  }
  var a = this.ja ? this.ja.ca.indexOf(this) : -1;
  0 <= a && (this.ja.ca.splice(a, 1), this.ja = null, U = !0);
};
function Y(a, b, c, e) {
  if (a.ba && (!Ja(a) || !Ha(a))) {
    throw "restricted mode \u3067\u306f\u73fe\u5728\u306e\u30ce\u30fc\u30c9\u4ee5\u5916\u3078\u306e insertNodeLast() \u306f\u975e\u5bfe\u5fdc\u3067\u3059!";
  }
  if (a.ba) {
    return a.fa = a.fa || [], a.fa.push([b, c, e]), U = !0, null;
  }
  var g = W(a);
  if (a.ba) {
    throw "restricted mode \u3067\u306f insertNodeAt() \u306f\u975e\u5bfe\u5fdc\u3067\u3059!";
  }
  U = !0;
  return new La(a, g, b, c, e);
}
;function Oa(a, b, c) {
  function e(k, y, v, u) {
    switch(k.$) {
      case 1:
      case 17:
        var A = {};
        u = Na(k);
        var F = !!sa[u];
        var I = k.pa, M = 0, O;
        if (I) {
          for (O in I) {
            var K = aa[O] ? 1 : I[O];
            if ("id" === O) {
              var S = K;
            } else if ("class" === O) {
              var P = K;
            } else {
              if (O.startsWith(x)) {
                var C = g(K);
                C.la ? (K = [C.na], D.apply(K, C.la)) : K = C.na;
              }
              A[O] = ta(K);
              ++M;
            }
          }
        }
        u = Fa(u, S, P);
        if (F && B) {
          for (; C = l(k);) {
            if (f(V(C))) {
              Ma(C, Da(V(C), "\n"));
              break;
            } else {
              C.remove();
            }
          }
          for (; C = h(k);) {
            if (f(V(C))) {
              Ma(C, Ca(V(C), "\n"));
              break;
            } else {
              C.remove();
            }
          }
        }
        A = M ? [u, A] : [u];
        for (C = 0; C < W(k); ++C) {
          e(X(k, C), A, F || v, !!ra[u]);
        }
        y.push(A);
        17 !== k.$ || A.unshift(17);
        break;
      case 18:
        y.push([18, Na(k)]);
        break;
      case 3:
        (F = Ba("" + V(k), v, u, B, q, E)) && y.push(F);
        break;
      case 4:
        w && (F = V(k), y.push([4, ta(F)]));
        break;
      case 7:
        F = V(k);
        C = g(F);
        A = [7, C.na];
        C.la && D.apply(A, C.la);
        y.push(A);
        break;
      case 8:
        F = V(k);
        if (F.startsWith("[if") && 0 < F.indexOf("<![endif]")) {
          k = Pa(d(F, ">", "<![endif]", !0), !0);
          A = [13, d(F, "[", "]", !1)];
          for (C = 0; C < W(k); ++C) {
            e(X(k, C), A, v, u);
          }
          (2 < A.length || t) && y.push(A);
        } else if (F.startsWith("{") && 2 < F.indexOf("};")) {
          k = Pa(F.substring(F.indexOf("};") + 2), !0);
          A = [16, d(F, "{", "};", !1)];
          for (C = 0; C < W(k); ++C) {
            e(X(k, C), A, v, u);
          }
          (2 < A.length || t) && y.push(A);
        } else {
          F.startsWith("[if") && 0 < F.indexOf("><!") ? (y.push([14, d(F, "[", "]", !1)]), m = !0) : "<![endif]" === F && m ? (v = y[y.length - 1], t || !v || 14 !== v[0] ? y.push([15]) : v && y.pop(), m = !1) : G && y.push([8, ta(F)]);
        }
        break;
      case 9:
        F = V(k);
        B && (F = F.split("\n").join(" ").split("  ").join(" "));
        A = [9, F];
        y.push(A);
        for (C = 0; C < W(k); ++C) {
          e(X(k, C), A, !1, !1);
        }
        break;
      case 11:
        for (A = [11], y.push(A), C = 0; C < W(k); ++C) {
          e(X(k, C), A, v, u);
        }
    }
  }
  function g(k) {
    var y = k.indexOf(z), v = Ca(Da(-1 === y ? k : k.substr(0, y), " "), " ");
    k = -1 === y ? [] : JSON.parse("[" + k.substring(y + z.length, k.lastIndexOf(p) - 2) + "]");
    return k.length ? {na:v, la:k} : {na:v};
  }
  function d(k, y, v, u) {
    y = k.indexOf(y) + y.length;
    v = u ? k.lastIndexOf(v) : k.indexOf(v, y);
    return k.substring(y, v);
  }
  function l(k) {
    for (var y = 0, v = W(k), u; y < v; ++y) {
      if (u = X(k, y), 1 !== u.$ && 17 !== u.$ || (u = l(u)), u && 3 === u.$) {
        return u;
      }
    }
  }
  function h(k) {
    for (var y = W(k), v; y;) {
      if (v = X(k, --y), 1 !== v.$ && 17 !== v.$ || (v = h(v)), v && 3 === v.$) {
        return v;
      }
    }
  }
  function f(k) {
    return k.split("\n").join("").split(" ").join("").split("\t").join("");
  }
  const n = [], D = n.push;
  a = Pa(a, b);
  c = c || {};
  const B = -1 === ["none", !1].indexOf(c.trimWhitespaces), q = "aggressive" === c.trimWhitespaces, E = !!c.removeNewlineBetweenFullWidthChars, w = !0 === c.keepCDATASections, G = !0 === c.keepComments, t = !0 === c.keepEmptyConditionalComment, x = c.instructionAttrPrefix || ":";
  c = c.argumentBrackets || "()";
  const z = c.substr(0, c.length / 2), p = c.substr(c.length);
  let m = !1;
  e(a, n, !1, !1);
  Aa(n[0]);
  return n[0];
}
function Pa(a, b) {
  b = new Qa(b);
  ea(a, b);
  return b.ba;
}
function Qa(a) {
  this.ca = a;
  this.$ = this.ba = new La(!1, 0, 11);
}
function ja(a, b) {
  var c = a.ba;
  if (c.ba) {
    throw "restricted mode \u3067\u306f setNodeType() \u306f\u975e\u5bfe\u5fdc\u3067\u3059!";
  }
  if (11 !== c.$) {
    throw "nodeType \u306e\u5909\u66f4\u306f DOCUMENT_FRAGMENT_NODE -> DOCUMENT_NODE \u3060\u3051\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u307e\u3059!";
  }
  9 !== c.$ && (U = !0);
  c.$ = 9;
  Ma(a.ba, b);
}
function ia(a, b, c, e) {
  if (e) {
    a = a.$;
    if (a.ba && (!Ja(a) || !Ha(a))) {
      throw "restricted mode \u3067\u306f\u73fe\u5728\u306e\u30ce\u30fc\u30c9\u4ee5\u5916\u3078\u306e insertElementLast() \u306f\u975e\u5bfe\u5fdc\u3067\u3059!";
    }
    if (a.ba) {
      a.fa = a.fa || [], a.fa.push([1, b, c, void 0]);
    } else {
      e = W(a);
      if (a.ba) {
        throw "restricted mode \u3067\u306f insertElementAt() \u306f\u975e\u5bfe\u5fdc\u3067\u3059!";
      }
      new La(a, e, 1, b, c);
    }
    U = !0;
  } else {
    a.$ = Y(a.$, 17, b, c);
  }
}
function ha(a, b, c, e) {
  if (e) {
    a.ca && Y(a.$, 18, b);
  } else if (!c || !a.ca) {
    if (b === Na(a.$)) {
      b = a.$;
      if (b.ba) {
        throw "restricted mode \u3067\u306f finalize() \u306f\u975e\u5bfe\u5fdc\u3067\u3059!";
      }
      if (17 !== b.$) {
        throw "finalize() \u3092\u30b5\u30dd\u30fc\u30c8\u3057\u306a\u3044 nodeType \u3067\u3059!";
      }
      1 !== b.$ && (U = !0);
      b.$ = 1;
      b = a.$;
      if (Ia(b)) {
        throw "getParent() \u3092\u30b5\u30dd\u30fc\u30c8\u3057\u306a\u3044 nodeType \u3067\u3059!";
      }
      if (b.ba && !Ja(b)) {
        throw "restricted mode \u3067\u306f\u73fe\u5728\u306e\u30ce\u30fc\u30c9\u4ee5\u5916\u3078\u306e getParent() \u306f\u975e\u5bfe\u5fdc\u3067\u3059!";
      }
      a.$ = b.ja;
    } else {
      throw "End tag error! " + b;
    }
  }
}
function fa(a, b) {
  Y(a.$, 3, b);
}
function ma(a, b) {
  Y(a.$, 8, b);
}
function la(a, b) {
  Y(a.$, 4, b);
}
function ka(a, b) {
  Y(a.$, 7, b);
}
;function Ra(a) {
  a && (a = Sa(a), this.$ = a + ("/" === a.charAt(a.length - 1) ? "" : "/"));
}
function Ta(a) {
  a = a.split("index.html");
  a[a.length - 1] || a.pop();
  return a.join("index.html");
}
function Ua(a, b) {
  if (!a.$) {
    throw "absoluteDirectoryPathOfRoot is empty!";
  }
  return 0 === b.indexOf(a.$);
}
function Sa(a) {
  return a.split("\\").join("/");
}
function Va(a, b, c) {
  if (Ua(a, c) || "/" === c.charAt(0)) {
    b = c;
  } else {
    if ("/" !== b.charAt(0)) {
      throw b + " is not a root relative path!";
    }
    var e;
    (e = "/" === c.charAt(0)) || (e = a.$ ? Ua(a, c) || Wa(c) : Wa(c));
    if (e) {
      throw c + " is not a relative path!";
    }
    a = c;
    b = b.split("/");
    b.pop();
    "" === b[0] && b.shift();
    for ("./" === a.substr(0, 2) && (a = a.substr(2)); "../" === a.substr(0, 3);) {
      a = a.substr(3), --b.length;
    }
    b = b.join("/") + "/" + a;
  }
  return b;
}
function Wa(a) {
  return "//" === a.substr(0, 2) || "http://" === a.substr(0, 7) || "https://" === a.substr(0, 8);
}
;var Xa = !1, Ya = !1, Za = !1, $a = !1;
function Z(a) {
  a = Z.ta(a);
  Xa && (a.html2json = Xa);
  Ya && (a.generator = Ya);
  Za && (a.json2json = Za);
  $a && (a.json2html = $a);
  return a;
}
Z.ta = function(a) {
  var b = a || {};
  a = require("path").resolve(b.srcRootPath || "./") + "/";
  const c = new Ra(a), e = b.allPagesPath && Va(c, "/", b.allPagesPath), g = Va(c, "/", b.allMixinsPath || "all-mixins.json");
  b = Va(c, "/", b.allTempletesPath || "all-templetes.json");
  return {Da:Sa(a), ua:e || "", Ea:g, Fa:b, Ba:Z.aa.za(b), Aa:Z.aa.za(g), da:null, ea:null, Ka:{}, path:c};
};
Z.xa = function(a, b) {
  if (b) {
    var c = new ab(a.FILE_PATH), e;
    c.$ = function() {
      return a;
    };
    if ("function" === typeof b) {
      return b.bind(c);
    }
    var g = {};
    for (e in b) {
      g[e] = function(d, l) {
        return b[d].apply(c, arguments);
      };
    }
    return g;
  }
};
Z.va = function(a, b) {
  if (b && ((new ab(a.FILE_PATH)).$ = function() {
    return a;
  }, "function" !== typeof b)) {
    var c = 0;
    for (b = b.length; c < b; c += 2) {
    }
  }
};
Z.Ga = function(a, b) {
  if (b) {
    var c = new ab(a.FILE_PATH);
    c.$ = function() {
      return a;
    };
    return b.bind(c);
  }
};
Z.wa = function(a, b) {
  if (b) {
    var c = new ab(a.FILE_PATH);
    c.$ = function() {
      return a;
    };
    return b.bind(c);
  }
};
function ab(a) {
  Ta(a);
}
;Z.ga = {};
Z.aa = {};
Z.ga.ia = !0;
Z.aa.ha = function(a) {
  a = a[0];
  if (Z.ga.ia && !J(a)) {
    throw "Not html.json! " + JSON.stringify(a);
  }
  return a;
};
Z.aa.ra = function(a) {
  a = Z.aa.ha(a)[0];
  return !J(a) && L(a) ? a : null;
};
Z.aa.ka = function(a) {
  var b = a[0];
  return J(a) && !J(b) && L(b);
};
Z.aa.sa = function(a) {
  return !J(a) && L(a) ? !!a.TEMPLETE : Z.aa.ka(a) ? a[0].TEMPLETE || !1 : !1;
};
Z.aa.oa = function(a) {
  return !J(a) && L(a) ? !!a.MIXINS : Z.aa.ka(a) ? a[0].MIXINS || !1 : !1;
};
Z.aa.Ca = function(a, b, c, e, g) {
  function d(n) {
    if (n) {
      for (let D = 0; D < n.length; ++D) {
        const B = e[n[D]];
        l(B[0], B[2]);
      }
    }
  }
  function l(n, D) {
    let B = 0;
    for (const q in n) {
      "TEMPLETE" === q ? (h = h || n[q], h === n[q] && ++B) : void 0 === a[q] && (a[q] = n[q], ++B);
    }
    B && f < D && (f = D);
  }
  if (Z.aa.sa(a) && !c) {
    if (g) {
      g(a.FILE_PATH + " has TEMPLETE property, and no templetes found!");
    } else {
      throw a.FILE_PATH + " has TEMPLETE property, and no templetes found!";
    }
  } else {
    if (Z.aa.oa(a) && !e) {
      if (g) {
        g(a.FILE_PATH + " has MIXINS property, and no mixins found!");
      } else {
        throw a.FILE_PATH + " has MIXINS property, and no mixins found!";
      }
    } else {
      var h = a.TEMPLETE, f = a.MODIFIED_AT;
      d(a.MIXINS);
      for (h && (b[0] = h); h;) {
        const n = c[h], D = Z.aa.ra(n);
        if (D) {
          if (Z.aa.oa(D) && !e) {
            if (g) {
              g(h + " has MIXINS property, and no mixins found!");
            } else {
              throw h + " has MIXINS property, and no mixins found!";
            }
            return;
          }
          h = "";
          l(D, n[2]);
          d(D.MIXINS);
          h && b.push(h);
        } else {
          h = "";
        }
      }
      a.UPDATED_AT = f;
    }
  }
};
Z.aa.La = function(a, b) {
  const c = b.split("/");
  a.FILE_NAME = c.pop();
  a.FOLDER_PATH = c.join("/");
  a.URL = Ta(b);
};
Z.aa.za = function(a) {
  let b = Sa(a).split(".json");
  if (Z.ga.ia && b[b.length - 1]) {
    throw a + " is not .json file path!";
  }
  b.pop();
  b = b.join(".json").split("/");
  return b.pop().split(".").pop();
};
Z.aa.Ha = function(a) {
  return bb(a, function(b, c) {
    return ("SCRIPT" === b || "script" === b) && c && ("application/json" === c.type || "nice-page-builder/object" === c.type) || !1;
  });
};
Z.aa.ya = function(a, b) {
  return bb(a, function(c) {
    return "SLOT" === c || "slot" === c;
  }, b);
};
function bb(a, b, c) {
  function e(l) {
    let h = T(l), f = l.length;
    for (var n; h < f; ++h) {
      var D = l[h], B;
      if (B = J(D)) {
        a: {
          n = D;
          B = l;
          D = h;
          var q = n[0];
          const E = n[1];
          let w = q, G = 1;
          switch(q) {
            case 9:
            case 11:
            case 13:
            case 16:
              n = e(n);
              break a;
            case 1:
            case 17:
              w = E, G = 2;
            default:
              if (N(w)) {
                q = n[G];
                n = b(w, va(q) ? q : null) ? [n, B, D] : e(n);
                break a;
              }
          }
          n = void 0;
        }
        B = n;
      }
      if (B) {
        return n;
      }
    }
  }
  let g = a[0], d;
  return !J(g) && L(g) ? (a.shift(), d = e(a), !c && (a.unshift(g), d && d[1] === a) ? [d[0], a, ++d[2]] : d) : e(a);
}
;Z.html2json = !0;
Xa = function(a, b, c) {
  a = Oa(a, b, c);
  if (b = Z.aa.Ha(a)) {
    c = b[0], b[1].splice(b[2], 1), c && 3 === c.length && (b = eval("(" + c[2] + ");"), !J(b) && L(b) && a.unshift(b));
  }
  return a;
};
function cb(a) {
  const b = this, c = require("plugin-error"), e = require("vinyl"), g = require("through2"), d = {}, l = b.ea = b.ea || {}, h = b.da = b.da || {};
  return g.obj(function(f, n, D) {
    var B = Sa(f.path);
    if (f.isNull()) {
      return D();
    }
    if (f.isStream()) {
      return this.emit("error", new c("NicePageBuilder.gulp.html2json", "Streaming not supported")), D();
    }
    if (0 !== B.indexOf(b.Da)) {
      return this.emit("error", new c("NicePageBuilder.gulp.html2json", '"' + B + '" is outside of srcRootPath:"' + b.Da + '"')), D();
    }
    const q = f.contents.toString(n);
    n = parseInt(f.stat.birthtimeMs, 10);
    const E = parseInt(f.stat.ctimeMs, 10);
    var w = b.path;
    if (!w.$) {
      throw "absoluteDirectoryPathOfRoot is empty!";
    }
    if (!Ua(w, B)) {
      throw B + " is not a absolute path!";
    }
    B = Sa(B).substr(w.$.length - 1);
    switch(f.extname) {
      case ".html":
      case ".htm":
      case ".xhtml":
      case ".php":
        f = Xa.call(b, q, !1, a);
        d[B] = [f, n, E];
        break;
      case ".json":
        f = JSON.parse(q);
        L(f) && (h[B] = [f, n, E]);
        break;
      default:
        this.push(f);
    }
    D();
  }, function(f) {
    function n(t, x, z, p) {
      if (x) {
        for (let k = 0, y = x.length; k < y; ++k) {
          const v = Va(b.path, t, x[k]);
          var m = h[v];
          x[k] = v;
          if (m && 3 === m.length) {
            m.push(!0), m = m[0], p ? m.MIXINS && (Z.ga.ia && console.log('Mixin:"' + v + '" cannot have MIXINS property!'), delete m.MIXINS) : n(v, m.MIXINS, z, !0), z || D(v, m.TEMPLETE, m);
          } else if (!m) {
            throw 'Mixin:"' + v + '" required by "' + t + '" does not exist!';
          }
        }
      }
    }
    function D(t, x, z) {
      for (; x;) {
        x = Va(b.path, t, x);
        const p = d[x];
        if (p) {
          if (delete d[x], l[x] = p, z.TEMPLETE = t = x, z = Z.aa.ra(p)) {
            n(t, z.MIXINS, !!z.TEMPLETE, !1), x = z.TEMPLETE;
          } else {
            break;
          }
        } else if (l[x]) {
          break;
        } else {
          throw 'Templete:"' + x + '" required by "' + t + '" does not exist!';
        }
      }
    }
    function B(t, x) {
      t = new e({base:"/", path:t, contents:Buffer.from(JSON.stringify(x))});
      t.extname = ".json";
      G.push(t);
    }
    for (var q in d) {
      const t = d[q];
      let x = Z.aa.ra(t);
      x && (n(q, x.MIXINS, !!x.TEMPLETE, !1), D(q, x.TEMPLETE, x), d[q] && t.push(!0));
    }
    for (var E in h) {
      q = h[E], 3 === q.length ? (Z.ga.ia && console.log("Unused mixin found! " + E), delete h[E]) : q.pop();
    }
    for (var w in d) {
      E = d[w], q = Z.aa.ha(E), 3 === E.length && Z.aa.ya(q, !1) && (Z.ga.ia && console.log("Unused templete found! " + w), delete d[w]);
    }
    const G = this;
    b.ua && B(b.ua, d);
    B(b.Ea, h);
    B(b.Fa, l);
    for (const t in d) {
      w = d[t], delete d[t], E = w[0], q = E[0], q = !J(q) && L(q) ? q : {}, q.FILE_PATH = t, q.CREATED_AT = w[1], q.MODIFIED_AT = w[2], q !== E[0] && E.unshift(q), B(t + ".json", E);
    }
    f();
  });
}
;Z.generator = !0;
Ya = function(a, b, c) {
  if (!Z.aa.ka(a)) {
    return a;
  }
  const e = a[0], g = [];
  Z.aa.Ca(e, g, b, c);
  for (var d = a; g.length;) {
    c = b[g.shift()];
    a = void 0;
    c = Z.aa.ha(c);
    c = JSON.parse(JSON.stringify(c));
    var l = Z.aa.ya(c, !0);
    if (l) {
      const h = l[1];
      l = l[2];
      !J(d[0]) && L(d[0]) && (a = d.shift());
      let f = T(d), n = d.length;
      h.splice(l, 1);
      for (l -= f; f < n; ++f) {
        h.splice(l + f, 0, d[f]);
      }
      a && c.unshift(a);
    }
    d = c;
  }
  delete e.TEMPLETE;
  delete e.MIXINS;
  return d;
};
function db() {
  const a = this, b = require("plugin-error"), c = require("vinyl"), e = require("through2"), g = {};
  let d = a.ea, l = a.da;
  return e.obj(function(h, f, n) {
    if (h.isNull()) {
      return n();
    }
    if (h.isStream()) {
      return this.emit("error", new b("NicePageBuilder.gulp.generator", "Streaming not supported")), n();
    }
    if (".json" !== h.extname) {
      return this.push(h), n();
    }
    f = h.contents.toString(f);
    f = JSON.parse(f);
    switch(h.stem.split(".").pop()) {
      case "html":
      case "htm":
      case "xhtml":
      case "php":
        return g[f[0].FILE_PATH] = f, n();
      case a.Ba:
        !J(f) && L(f) && (a.ea && JSON.stringify(a.ea) !== JSON.stringify(f) && console.log("NicePageBuilder.gulp.generator templete list changed!"), d = a.ea = f);
        break;
      case a.Aa:
        !J(f) && L(f) && (a.da && JSON.stringify(a.da) !== JSON.stringify(f) && console.log("NicePageBuilder.gulp.generator templete list changed!"), l = a.da = f);
    }
    this.push(h);
    n();
  }, function(h) {
    for (const f in g) {
      const n = Ya.call(a, g[f], d, l);
      delete g[f];
      this.push(new c({base:"/", path:f + ".json", contents:Buffer.from(JSON.stringify(n))}));
    }
    h();
  });
}
;function eb(a, b, c, e, g) {
  function d(p, m, k, y, v, u) {
    var A = p[0], F = p[1], I = 1, M = A, O;
    switch(A) {
      case 9:
      case 11:
        l(p, y, v, u);
        break;
      case 3:
        F = Ba("" + F, v, u, n, D, B);
        if ("" !== F) {
          m[k] = F;
        } else {
          return m.splice(k, 1), -1;
        }
        break;
      case 4:
        if (!q && m) {
          return m.splice(k, 1), -1;
        }
        break;
      case 8:
        if (!E && m) {
          return m.splice(k, 1), -1;
        }
        break;
      case 13:
        l(p, y, v, u);
        if (!w && m && 2 === p.length) {
          return m.splice(k, 1), -1;
        }
        break;
      case 15:
        p = m[k - 1];
        if (!w && p && 14 === p[0] && p) {
          return m.splice(k - 1, 2), -2;
        }
        break;
      case 16:
        l(p, y, v, u);
        if (!w && m && 2 === p.length) {
          return m.splice(k, 1), -1;
        }
        break;
      case 7:
        if (h) {
          if (p = wa(h, p, m, k, f), void 0 !== p) {
            if (null === p || "" === p) {
              return m ? m.splice(k, 1) : (a.length = 0, a.push(8, "")), -1;
            }
            if (!R(p) && J(p)) {
              return -1;
            }
          } else {
            z = !1;
          }
        } else {
          f("onInstruction is void!");
        }
        break;
      case 1:
      case 17:
        M = F, I = 2;
      default:
        if (N(M)) {
          if (1 + I <= p.length) {
            m = p[I];
            if (va(m)) {
              k = I - 1;
              u = 0;
              var K;
              A = Ea(p[k]);
              F = A[1];
              var S = A[2];
              A = A[0];
              for (Q in m) {
                var P = Q;
                var C = m[Q];
                if (K = 0 === Q.indexOf(G)) {
                  var Q = Q.substr(G.length);
                  "className" === Q && (Q = "class");
                  h ? C = xa(!1, h, Q, C, f) : f("onInstruction is void!");
                  if (void 0 !== C) {
                    if (delete m[P], J(C)) {
                      N(C[0]) ? (m[P] = C, z = !1, ++u) : f("Invalid dynamic attribute callback value! [" + P + "=" + C + "]");
                    } else if ((!aa[Q] || !1 !== C) && null !== C) {
                      if (N(C)) {
                        if ("id" === Q) {
                          F = C;
                          continue;
                        } else if ("class" === Q) {
                          P = C.split(" ");
                          for (C = P.length; C;) {
                            K = P[--C], -1 === (" " + S + " ").indexOf(" " + K + " ") && (S = (S ? " " : "") + K);
                          }
                          continue;
                        }
                      }
                      m[Q] = C;
                      ++u;
                    }
                  } else {
                    z = !1, ++u;
                  }
                } else {
                  ++u;
                }
              }
              p[k] = Fa(A, F, S);
              0 === u && p.splice(I, 1);
            }
            t || (O = t = t || ba[M] ? !0 : !1);
            I = !!sa[M];
            l(p, y, I || v, !!ra[M]);
            O && (t = !1);
          }
        } else {
          f("Not html.json! [" + p + "]");
        }
    }
    return 0;
  }
  function l(p, m, k, y) {
    var v = T(p);
    for (m.push(p); v < p.length; ++v) {
      var u = p[v];
      if (!R(u)) {
        if (J(u)) {
          if (u = d(u, p, v, m, k, y)) {
            v += u, x = !0;
          }
        } else {
          f("Invalid html.json! [" + u + "]");
        }
      }
    }
    m.pop();
  }
  var h = b || null;
  b = "function" === typeof c ? c : null;
  var f = "function" === typeof e ? e : function() {
  };
  e = g || {};
  var n = -1 !== ["normal", !0, "aggressive"].indexOf(e.trimWhitespaces), D = "aggressive" === e.trimWhitespaces, B = !!e.removeNewlineBetweenFullWidthChars, q = !1 !== e.keepCDATASections, E = !1 !== e.keepComments, w = !0 === e.keepEmptyConditionalComment, G = e.instructionAttrPrefix || ":", t = !1, x = !1, z = !0;
  if (J(a)) {
    return d(a, null, 0, [], !1, !1), x && Aa(a), b && fb(b, a) && (z = Ga(a, G)), z;
  }
  f("Invalid html.json document!");
}
function fb(a, b) {
  var c = gb(b);
  U = !1;
  a(c);
  if (a = U) {
    U = !1, b.length = 0, b.push.apply(b, c.ha()), Aa(b);
  }
  return a;
}
function gb(a) {
  function b(e, g) {
    function d(B, q, E) {
      return l ? Y(l, B, q, E) : new La(!1, 0, B, q, E);
    }
    var l = g === !!g ? null : g;
    g = e[0];
    var h = e[1], f = 1, n = g;
    switch(g) {
      case 9:
      case 13:
      case 16:
        var D = d(g, h);
        c(e, D);
        break;
      case 11:
        D = d(g);
        c(e, D);
        break;
      case 3:
      case 4:
      case 8:
      case 14:
      case 18:
        D = d(g, h);
        break;
      case 15:
        D = d(g);
        break;
      case 7:
        D = [];
        f = 2;
        for (n = e.length; f < n; ++f) {
          D[f - 2] = e[f];
        }
        D = d(g, h, n ? D : null);
        break;
      case 1:
      case 17:
        n = h, f = 2;
      default:
        N(n) && (D = d(1 === f ? 1 : g, n, e[f]), c(e, D));
    }
    return D;
  }
  function c(e, g) {
    for (var d = T(e), l; d < e.length; ++d) {
      l = e[d], R(l) ? Y(g, 3, l) : J(l) && b(l, g);
    }
  }
  return b(a, !1);
}
;Z.json2json = !0;
Za = function(a, b, c, e, g, d) {
  let l;
  Z.aa.ka(a) && (l = a.shift(), b = Z.xa(l, b), Z.va(l, c), e = Z.Ga(l, e), g = Z.wa(l, g), (Z.aa.sa(l) || Z.aa.oa(l)) && Z.aa.Ca(l, [], this.ea, this.da, g));
  b = eb(a, b, e, g, d);
  l && a.unshift(l);
  return b;
};
function hb(a, b, c, e, g) {
  const d = this, l = require("plugin-error");
  return require("through2").obj(function(h, f, n) {
    if (h.isNull()) {
      return n();
    }
    if (h.isStream()) {
      return this.emit("error", new l("NicePageBuilder.gulp.json2json", "Streaming not supported")), n();
    }
    if (".json" !== h.extname) {
      return this.push(h), n();
    }
    switch(h.stem.split(".").pop()) {
      case "html":
      case "htm":
      case "xhtml":
      case "php":
        f = JSON.parse(h.contents.toString(f));
        Za.call(d, f, a, b, c, e, g);
        h.contents = Buffer.from(JSON.stringify(f));
        break;
      case d.Ba:
        f = JSON.parse(h.contents.toString(f));
        !J(f) && L(f) && (d.ea && JSON.stringify(d.ea) !== JSON.stringify(f) && console.log("NicePageBuilder.gulp.json2json templete list changed!"), d.ea = f);
        break;
      case d.Aa:
        f = JSON.parse(h.contents.toString(f)), !J(f) && L(f) && (d.da && JSON.stringify(d.da) !== JSON.stringify(f) && console.log("NicePageBuilder.gulp.json2json templete list changed!"), d.da = f);
    }
    this.push(h);
    n();
  }, function(h) {
    h();
  });
}
;function ib(a, b, c, e) {
  function g(w, G, t, x, z) {
    function p() {
      var I = "";
      q && (I = "</" + q + ">", q = "");
      return I;
    }
    var m = "", k = w[0], y = w[1], v = 1, u = k, A;
    switch(k) {
      case 9:
        m = "<!DOCTYPE " + y + ">" + d(w, !1, z);
        break;
      case 11:
        m = d(w, x, z);
        break;
      case 3:
        m = p() + (z ? y : ya("" + y));
        break;
      case 4:
        N(y) || f("CDATA_SECTION Error! [" + w + "]");
        m = "<![CDATA[" + y + "]]\x3e";
        break;
      case 8:
        N(y) || f("COMMENT_NODE Error! [" + w + "]");
        m = "\x3c!--" + y + "--\x3e";
        break;
      case 13:
        N(y) || f("COND_CMT_HIDE_LOWER Error! [" + w + "]");
        m = p() + "\x3c!--[" + y + "]>" + d(w, !0, z) + "<![endif]--\x3e";
        break;
      case 16:
        N(y) || f("NETSCAPE4_COND_CMT_HIDE_LOWER Error! [" + w + "]");
        m = p() + "\x3c!--{" + y + "};" + d(w, !0, z) + "--\x3e";
        break;
      case 14:
        N(y) || f("COND_CMT_SHOW_LOWER_START Error! [" + w + "]");
        m = "\x3c!--[" + y + "]>\x3c!--\x3e";
        break;
      case 15:
        m = "\x3c!--<![endif]--\x3e";
        break;
      case 7:
        if (h) {
          if (x = wa(h, w, G, t, f), void 0 !== x && null !== x && "" !== x) {
            if (R(x) || J(x)) {
              return -1;
            }
            f("PROCESSING_INSTRUCTION Error! [" + JSON.stringify(w) + "] result:" + JSON.stringify(x));
          }
        } else {
          f("onInstruction is void!");
        }
        break;
      case 18:
        N(y) || f("ELEMENT_END_TAG Error! [" + w + "]");
        m = "</" + y + ">";
        break;
      case 17:
        var F = !0;
      case 1:
        u = w[1], v = 2;
      default:
        N(u) || f("Not html.json! [" + w + "]"), u = Ea(u), G = u[1], t = u[2], u = u[0], v = w[v], "P" !== q || pa[u] ? q = "" : m = p(), m += "<" + u, G && (m += " id=" + za(G, D, E || n)), t && (m += " class=" + za(t, D, E || n)), E || (A = E = E || ba[u] ? !0 : !1), va(v) && (m += l(v)), m = (w = d(w, oa[u], z || qa[u])) ? m + (">" + w) : F ? m + ">" : m + (E ? " />" : ">"), F ? q = "" : E && !w || na[u] && (!x || "P" !== u) ? q = ca[u] ? "" : u : (m += "</" + u + ">", q = ""), A && (E = !1);
    }
    return m;
  }
  function d(w, G, t) {
    for (var x = [], z = T(w), p = -1, m; z < w.length; ++z) {
      m = w[z], R(m) ? x[++p] = g([3, m], w, z, !1, t) : J(m) ? (m = g(m, w, z, G, t), -1 === m ? --z : x[++p] = m) : f("Invalid html.json! [" + m + "]");
    }
    return x.join("");
  }
  function l(w) {
    var G = "", t, x;
    for (t in w) {
      var z = w[t];
      (x = 0 === t.indexOf(B)) && (t = t.substr(B.length));
      "className" === t && (t = "class");
      x && (h ? z = xa(!0, h, t, z, f) : f("onInstruction is void!"));
      if (!(null == z || aa[t] && !1 === z || (G += " " + t, aa[t]))) {
        if ("style" === t && L(z)) {
          x = void 0;
          var p = z, m = [], k = -1;
          for (x in p) {
            z = p[x];
            "0px" === z && (z = 0);
            for (var y = ++k, v, u = [], A = x.split(""), F = A.length; F;) {
              v = A[--F], "A" <= v && "Z" >= v && (v = "-" + v.toLowerCase()), u[F] = v;
            }
            v = u.join("");
            m[y] = v + ":" + ya("" + z);
          }
          z = m.join(";").substr(1);
          if (!z) {
            continue;
          }
        }
        G += "=" + za(z, D, E || n);
      }
    }
    return G;
  }
  var h = b || null, f = "function" === typeof c ? c : function() {
  };
  b = e || {};
  var n = !0 === b.quotAlways, D = !0 === b.useSingleQuot, B = b.instructionAttrPrefix || ":", q, E = !1;
  if (J(a)) {
    return 7 === ua(a) && (a = [11, a]), g(a, null, 0, !1, !1);
  }
  f("Invalid html.json document!");
}
;Z.json2html = !0;
$a = function(a, b, c, e, g) {
  if (Z.aa.ka(a)) {
    const d = a.shift();
    if (Z.aa.sa(d) || Z.aa.oa(d)) {
      throw d.FILE_PATH + " is not complete document! Use nicePageBuilder.builder() before json2html().";
    }
    b = Z.xa(d, b);
    Z.va(d, c);
    e = Z.wa(d, e);
  }
  return ib(a, b, e, g) || "";
};
function jb(a, b, c, e) {
  const g = this, d = require("plugin-error");
  return require("through2").obj(function(l, h, f) {
    if (l.isNull()) {
      return f();
    }
    if (l.isStream()) {
      return this.emit("error", new d("NicePageBuilder.gulp.json2html", "Streaming not supported")), f();
    }
    if (".json" !== l.extname) {
      return this.push(l), f();
    }
    const n = l.stem.split(".").pop();
    switch(n) {
      case "html":
      case "htm":
      case "xhtml":
      case "php":
        h = JSON.parse(l.contents.toString(h));
        const D = l.path.split(".json");
        D.pop();
        l.path = D.join(".json");
        l.contents = Buffer.from($a.call(g, h, a, b, c, e));
        l.extname = "." + n;
    }
    this.push(l);
    f();
  });
}
;Z.module = {};
module.exports = Z;
Z.DOCUMENT_NODE = 9;
Z.DOCUMENT_FRAGMENT_NODE = 11;
Z.ELEMENT_NODE = 1;
Z.TEXT_NODE = 3;
Z.CDATA_SECTION = 4;
Z.PROCESSING_INSTRUCTION = 7;
Z.COMMENT_NODE = 8;
Z.COND_CMT_HIDE_LOWER = 13;
Z.COND_CMT_SHOW_LOWER_START = 14;
Z.NETSCAPE4_COND_CMT_HIDE_LOWER = 16;
Z.ELEMENT_START_TAG = 17;
Z.ELEMENT_END_TAG = 18;
Z.gulp = function(a) {
  a = Z.ta(a);
  Xa && (a.html2json = cb);
  Ya && (a.generator = db);
  Za && (a.json2json = hb);
  $a && (a.json2html = jb);
  return a;
};
Z.all = {};

